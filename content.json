{"meta":{"title":"Yan's Blog","subtitle":"","description":"","author":"OVYVO","url":"https://ovyvo.github.io/yanblog.github.io","root":"/yanblog.github.io/"},"pages":[{"title":"å…³äº","date":"2022-08-27T10:03:37.024Z","updated":"2022-08-27T10:03:37.024Z","comments":false,"path":"about/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/about/index.html","excerpt":"","text":"æ²ªæ¼‚å‰ç«¯æ”»åŸç‹® 123456789101112131415161718192021&#123; name: &#x27;è‹¥æ‹™&#x27; age: 26, gender: &#x27;ç”·&#x27;, profession: &#x27;Web Developer&#x27;, experience: &#x27;3.5&#x27;, address: &#x27;ä¸Šæµ·å¸‚æ™®é™€åŒº&#x27;, education: &#x27;æœ¬ç§‘&#x27;, github: &#x27;https://github.com/OVYVO&#x27;, email: &#x27;vue12306@163.com&#x27;, description: &#x27;å¤§ç“¢è´®æœˆå½’æ˜¥ç“®ï¼Œå°æ“åˆ†æ±Ÿå…¥å¤œç“¶&#x27;, skills: [ [&#x27;Html&#x27;, &#x27;JavaScript&#x27;, &#x27;TypeScript&#x27;, &#x27;ES6&#x27;], [&#x27;Vue&#x27;,&#x27;Nuxt&#x27;,&#x27;Taro&#x27;,&#x27;React&#x27;], [&#x27;AntDesign&#x27;, &#x27;Element&#x27;, &#x27;Vant&#x27;], [&#x27;Webpack&#x27;, &#x27;Gulp&#x27;, &#x27;Vite&#x27;], [&#x27;CSS&#x27;,&#x27;Less&#x27;,&#x27;Sass&#x27;], [&#x27;Git&#x27;,&#x27;Node&#x27;] ]&#125;"},{"title":"ä¹¦å•","date":"2022-07-31T11:43:24.895Z","updated":"2022-07-31T11:43:24.895Z","comments":false,"path":"books/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/books/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2022-11-27T04:13:15.828Z","updated":"2022-11-27T04:13:15.828Z","comments":false,"path":"links/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/links/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2022-07-31T11:43:24.895Z","updated":"2022-07-31T11:43:24.895Z","comments":false,"path":"categories/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/index.html","excerpt":"","text":""},{"title":"ä¸ªäººé¡¹ç›®","date":"2022-07-31T11:43:24.895Z","updated":"2022-07-31T11:43:24.895Z","comments":false,"path":"repository/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2022-07-31T11:43:24.896Z","updated":"2022-07-31T11:43:24.896Z","comments":false,"path":"tags/index.html","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Mac HomeBrewå®‰è£…åŠé•œåƒé…ç½®","slug":"blog21","date":"2023-07-07T16:00:00.000Z","updated":"2023-07-08T07:42:28.310Z","comments":false,"path":"2023/07/08/blog21/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/07/08/blog21/","excerpt":"","text":"å®‰è£…1/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot; å®‰è£…ç¼“æ…¢é—®é¢˜ æ›¿æ¢homebrew.git12cd $(brew --repo)git remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git æ›¿æ¢homebrew-core.git12cd $(brew --repo)/Library/Taps/homebrew/homebrew-coregit remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git æŸ¥çœ‹shellé…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¿®æ”¹æ­¥éª¤4|51echo $SHELL /bin/zshæ›¿æ¢homebrew-bottles12echo &#x27;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles&#x27; &gt;&gt; ~/.zshrcsource ~/.zshrc /bin/bashæ›¿æ¢homebrew-bottles12echo &#x27;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles&#x27; &gt;&gt; ~/.bash_profilesource ~/.bash_profile æ¢å¤é»˜è®¤é…ç½®12345678// step1:cd $(brew --repo)git remote set-url origin https://github.com/Homebrew/brew.git// step2:cd $(brew --repo)/Library/Taps/homebrew/homebrew-coregit remote set-url origin https://github.com/Homebrew/homebrew-core.git// step3:// å°†æ·»åŠ åˆ°~/.zshrc|~/.bash_profileæ–‡ä»¶çš„è¯­å¥æ³¨é‡Šæ‰å³å¯","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B7%A5%E5%85%B7/"}]},{"title":"nodeç‰ˆæœ¬ç®¡ç†å·¥å…·nvm","slug":"blog19","date":"2023-07-04T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2023/07/05/blog19/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/07/05/blog19/","excerpt":"","text":"nvmå®‰è£…MacOSè¯¦è§Windowsè¯¦è§ nvmå¸¸è§å‘½ä»¤ 12345678910111213141516171819nvm list æŸ¥çœ‹å·²ç»å®‰è£…çš„ç‰ˆæœ¬nvm list installed æŸ¥çœ‹å·²ç»å®‰è£…çš„ç‰ˆæœ¬nvm list available æŸ¥çœ‹ç½‘ç»œå¯ä»¥å®‰è£…çš„ç‰ˆæœ¬nvm install å®‰è£…æœ€æ–°ç‰ˆæœ¬nvmnvm use &lt;version&gt; ## åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬nodenvm ls åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬nvm currentæ˜¾ç¤ºå½“å‰ç‰ˆæœ¬nvm alias &lt;name&gt; &lt;version&gt; ## ç»™ä¸åŒçš„ç‰ˆæœ¬å·æ·»åŠ åˆ«ånvm unalias &lt;name&gt; ## åˆ é™¤å·²å®šä¹‰çš„åˆ«ånvm reinstall-packages &lt;version&gt; ## åœ¨å½“å‰ç‰ˆæœ¬nodeç¯å¢ƒä¸‹ï¼Œé‡æ–°å…¨å±€å®‰è£…æŒ‡å®šç‰ˆæœ¬å·çš„npmåŒ…nvm on æ‰“å¼€nodejsæ§åˆ¶nvm off å…³é—­nodejsæ§åˆ¶nvm proxy æŸ¥çœ‹è®¾ç½®ä¸ä»£ç†nvm node_mirror [url] è®¾ç½®æˆ–è€…æŸ¥çœ‹setting.txtä¸­çš„node_mirrorï¼Œå¦‚æœä¸è®¾ç½®çš„é»˜è®¤æ˜¯ https://nodejs.org/dist/nvm npm_mirror [url] è®¾ç½®æˆ–è€…æŸ¥çœ‹setting.txtä¸­çš„npm_mirror,å¦‚æœä¸è®¾ç½®çš„è¯é»˜è®¤çš„æ˜¯ https://github.com/npm/npm/archive/.nvm uninstall &lt;version&gt; å¸è½½åˆ¶å®šçš„ç‰ˆæœ¬nvm use [version] [arch] åˆ‡æ¢åˆ¶å®šçš„nodeç‰ˆæœ¬å’Œä½æ•°nvm root [path] è®¾ç½®å’ŒæŸ¥çœ‹rootè·¯å¾„nvm version æŸ¥çœ‹å½“å‰çš„ç‰ˆæœ¬ æ³¨æ„äº‹é¡¹ éé¦–æ¬¡å®‰è£…éœ€è¦å°†æœ¬åœ°ç¯å¢ƒçš„nodejsåˆ é™¤å¹²å‡€ï¼Œé¦–æ¬¡å®‰è£…åéœ€è¦å‡çº§nvmä¹Ÿéœ€è¦å°†æœ¬åœ°æ‰€æœ‰å®‰è£…çš„nodejsåˆ†åˆ«uninstall windowså¸è½½nvm: æ‰¾åˆ°nvmå®‰è£…ç›®å½•ï¼Œå¦‚æœç›®å½•ä¸­æœ‰unins000.exeæ–‡ä»¶ç›´æ¥æ‰§è¡Œå³å¯ å¦‚è‹¥æ²¡æœ‰unins000.exeï¼ŒæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ‰§è¡Œ åˆ é™¤nvmæ–‡ä»¶å¤¹ æ–‡ä»¶å¤¹å†…å³é”® æ­¤ç”µè„‘â€“ç‚¹å‡»å±æ€§â€“æ‰¾åˆ°é«˜çº§ç³»ç»Ÿè®¾ç½®â€“ç¯å¢ƒå˜é‡ã€‚ åˆ é™¤ç”¨æˆ·å˜é‡å’Œç³»ç»Ÿå˜é‡ä¸­åä¸º NVM_HOME å’Œ NVM_SYMLINK ä¸¤ä¸ªå˜é‡ã€‚å…¶ä»–çš„ä¸è¦æ”¹ã€‚ ç”¨æˆ·å˜é‡å’Œç³»ç»Ÿå˜é‡ä¸­pathä¸­çš„ %NVM_HOME%;%NVM_SYMLINK% ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä»–çš„ä¸è¦æ”¹ã€‚","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"element-pluså›¾æ ‡å°è£…","slug":"blog20","date":"2023-07-04T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2023/07/05/blog20/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/07/05/blog20/","excerpt":"","text":"æŒ‰éœ€åŠ è½½å¹¶æ–¹ä¾¿ä½¿ç”¨,ä¸éœ€è¦åœ¨æ¯ä¸ªé¡µé¢å•ç‹¬å¼•å…¥IconæŒ‰éœ€åŠ è½½é…ç½®è¯¦è§ å®‰è£…ä¾èµ–1npm install @element-plus/icons-vue utils/icon.ts123456789101112131415161718192021222324import &#123; createVNode &#125; from &#x27;vue&#x27;import * as ElementPlusIconsVue from &#x27;@element-plus/icons-vue&#x27;interface EIconInf&#123; type: string, size?: number, color?: string, cursor?: boolean&#125;export const EIcon = (props: EIconInf) =&gt; &#123; const &#123; type, size=20, color=&#x27;&#x27;, cursor=true &#125; = props const EIcon: &#123; [key: string]: any &#125; = ElementPlusIconsVue return createVNode( EIcon[type], &#123; style:&#123; width: `$&#123;size&#125;px`, color: color ? color : &#x27;inherit&#x27;, cursor: cursor ? &#x27;pointer&#x27; : &#x27;none&#x27;, &#125; &#125; )&#125; åœ¨main.jsä¸­å¼•å…¥å¹¶æ³¨å†Œ1234import &#123; EIcon &#125; from &#x27;./utils/icon&#x27;...//æ³¨å†ŒEIconç»„ä»¶app.component(&#x27;EIcon&#x27;, EIcon) é¡µé¢ä½¿ç”¨12345&lt;template&gt; &lt;div&gt; &lt;e-icon type=&quot;House&quot;&gt;&lt;/e-icon&gt; &lt;/div&gt;&lt;/template&gt;","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Element","slug":"Element","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/Element/"}]},{"title":"rsaåŠ è§£ç­¾åŠåŠ è§£å¯†å¸¸ç”¨å·¥å…·","slug":"blog18","date":"2023-06-05T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2023/06/06/blog18/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/06/06/blog18/","excerpt":"","text":"ä¾èµ– jsencrypt encryptlong jsrsasign npmåº“ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111import JSEncrypt from &#x27;jsencrypt&#x27;import Encrypt from &#x27;encryptlong&#x27;import jsrsasign from &#x27;jsrsasign&#x27;/** * ç”Ÿæˆéšæœºé•¿åº¦å­—ç¬¦ä¸² * @param &#123;Number&#125; length å­—ç¬¦ä¸²é•¿åº¦ */export const generateRandomString = (length) =&gt; &#123; let result = &#x27;&#x27;; let characters = &#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#x27;; let charactersLength = characters.length; for (let i = 0; i &lt; length; i++) &#123; result += characters.charAt(Math.floor(Math.random() * charactersLength)); &#125; return result;&#125;/** * ç§é’¥åŠ ç­¾ * @param &#123;object&#125; params åŠ å¯†å¯¹è±¡ * @param &#123;string&#125; privateKey ç§é’¥ */export const generateRSASign = (params, privateKey)=&gt;&#123; // 1. å°†å‚æ•°æŒ‰ç…§å­—å…¸åºæ’åº const sortedParams = Object.keys(params).sort(); // 2. å°†å‚æ•°æŒ‰ç…§ key=value çš„å½¢å¼æ‹¼æ¥æˆå­—ç¬¦ä¸² const paramString = sortedParams.map(key =&gt; `$&#123;params[key]&#125;`).join(&#x27;/n&#x27;); // 3. å¯¹å‚æ•°å­—ç¬¦ä¸²è¿›è¡Œ RSA ç­¾å const rsa = new jsrsasign.RSAKey() rsa = jsrsasign.KEYUTIL.getKey(privateKey) const signature = new jsrsasign.KJUR.crypto.Signature(&#123;alg: &#x27;SHA256withRSA&#x27;&#125;) signature.init(rsa) signature.updateString(paramString) const signResult = signature.sign() // 4. å°†ç­¾åè½¬æ¢ä¸º Base64 ç¼–ç  const signBase64 = jsrsasign.hextob64(signResult) return signBase64&#125;/** * å…¬é’¥éªŒç­¾ * @param &#123;string&#125; signData åŠ ç­¾æ•°æ® * @param &#123;string&#125; data åŠ ç­¾ä¹‹åå¾—åˆ°çš„ç­¾æ–‡ * @param &#123;string&#125; publicKey å…¬é’¥ */export const verifyRSASign = (signData, data, publicKey) =&gt;&#123; try &#123; const rsa = new jsrsasign.RSAKey() rsa = jsrsasign.KEYUTIL.getKey(publicKey) let signatureVf = new jsrsasign.KJUR.crypto.Signature(&#123; alg: &quot;SHA256withRSA&quot;, prvkeypem: rsa &#125;) signatureVf.updateString(data) let result = signatureVf.verify(jsrsasign.b64tohex(signData)) console.log(&quot;jsrsasign verify: &quot; + result) return result &#125; catch (e) &#123; console.error(e) &#125;&#125;/** * JSEncryptåŠ å¯† * @param &#123;string&#125; data åŠ å¯†å¯¹è±¡ * @param &#123;string&#125; publicKey å…¬é’¥ */export const getJSEncrypt = (data,publicKey)=&gt;&#123; let jsencrypt = new JSEncrypt() jsencrypt.setPublicKey(publicKey) let result = jsencrypt.encrypt(data) return result&#125;/** * JSEncryptè§£å¯† * @param &#123;string&#125; data è§£å¯†å¯¹è±¡ * @param &#123;string&#125; privateKey ç§é’¥ */export const getJSDecrypt = (data,privateKey)=&gt;&#123; let jsencrypt = new JSEncrypt() jsencrypt.setPrivateKey(privateKey) let result = jsencrypt.encrypt(data) return result&#125;/** * EncryptåŠ å¯† * @param &#123;string&#125; data åŠ å¯†å¯¹è±¡ * @param &#123;string&#125; publicKey å…¬é’¥ */export const getEncrypt = (data,publicKey)=&gt;&#123; let encrypt = new Encrypt(); encrypt.setPublicKey(publicKey); let result = encrypt.encryptLong(JSON.stringify(data)) return result&#125;/** * Encryptè§£å¯† * @param &#123;string&#125; data è§£å¯†å¯¹è±¡ * @param &#123;string&#125; privateKey ç§é’¥ */export const getDecrypt = (data,privateKey)=&gt;&#123; let decrypt = new Encrypt(); decrypt.setPrivateKey(privateKey); let result = decrypt.decryptLong(data) return result&#125;","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"Vueç”µæ± å°å›¾æ ‡","slug":"blog17","date":"2023-05-25T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2023/05/26/blog17/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/05/26/blog17/","excerpt":"","text":"ç®€å•çš„ç”µæ± å°å›¾æ ‡ï¼Œæ ¹æ®ç”µé‡å±•ç¤ºä¸åŒçš„é¢œè‰²ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;template&gt; &lt;div class=&quot;battery-container&quot;&gt; &lt;div class=&quot;shell&quot;&gt; &lt;div v-for=&quot;(item,index) in batteryChunk&quot; class=&quot;block&quot; :key=&quot;index&quot; :style=&quot;&#123; background: `$&#123;batteryColor&#125;` &#125;&quot; &gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; props:&#123; capacity:&#123; type: [Number,String], &#125; &#125;, computed:&#123; batteryChunk()&#123; return this.findInterval(this.capacity) &#125;, batteryColor()&#123; if(this.batteryChunk &gt;=0 &amp;&amp; this.batteryChunk &lt;= 1)&#123; return &#x27;#FE5F69&#x27; &#125;else if(this.batteryChunk &gt; 1 &amp;&amp; this.batteryChunk &lt;=4)&#123; return &#x27;#FFC95C&#x27; &#125;else&#123; return &#x27;#64BA8C&#x27; &#125; &#125; &#125;, methods:&#123; findInterval(num) &#123; var intervalSize = 100 / 6 var interval = Math.floor(num / intervalSize) if (interval === 6) &#123; return interval &#125; else &#123; return interval + 1 &#125; &#125; &#125;&#125;&lt;/script&gt;&lt;style lang=&#x27;less&#x27; scoped&gt;.battery-container&#123; width: 48px; height: 24px; border: 4px solid #DFE6EE ; border-radius: 4px; position: relative; transform: scale(0.5); transform-origin: left top; &amp;:after&#123; content: &quot;&quot;; display: block; height: 12px; width: 4px; position: absolute; background:#DFE6EE ; right: -8px; top: 0; bottom: 0; margin: auto 0; &#125; .shell&#123; width: 100%; height: 100%; box-sizing: border-box; padding: 2px; background: #F8FAFC ; display: grid; grid-template-columns: repeat(6,1fr); grid-column-gap: 2px; .block&#123; width: 100%; height: 100%; &#125; &#125;&#125;&lt;/style&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"}],"tags":[{"name":"vue-2","slug":"vue-2","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-2/"}]},{"title":"Vue3 H5è°ƒç”¨ç›¸æœºæ‰«æäºŒç»´ç ","slug":"blog16","date":"2023-05-22T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2023/05/23/blog16/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/05/23/blog16/","excerpt":"","text":"ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ‰«æäºŒç»´ç åº“æœ‰zxing-jsã€quaggaJSã€Html5Qrcodeç­‰ï¼Œå¯ä»¥åœ¨Vue3é¡¹ç›®ä¸­å®‰è£…å¹¶ä½¿ç”¨è¿™äº›åº“æ¥å®ç°æ‰«æäºŒç»´ç åŠŸèƒ½ã€‚ 1npm install zxing-js 12345678import &#123; BrowserQRCodeReader &#125; from &#x27;@zxing/library&#x27;;const codeReader = new BrowserQRCodeReader();codeReader.decodeFromInputVideoDevice(undefined, &#x27;video&#x27;).then((result) =&gt; &#123; console.log(result.text);&#125;).catch((err) =&gt; &#123; console.error(err);&#125;); ä½¿ç”¨æµè§ˆå™¨åŸç”ŸAPIç°ä»£æµè§ˆå™¨æä¾›äº†WebRTC APIï¼Œå¯ä»¥ä½¿ç”¨getUserMediaæ–¹æ³•è·å–æ‘„åƒå¤´è§†é¢‘æµï¼Œå†ä½¿ç”¨Canvas APIå°†è§†é¢‘æµæ¸²æŸ“åˆ°ç”»å¸ƒä¸Šï¼Œæœ€åä½¿ç”¨jsQRåº“è§£æäºŒç»´ç ã€‚ 1npm install jsqr 1234567891011121314151617181920212223import jsQR from &#x27;jsqr&#x27;;const video = document.createElement(&#x27;video&#x27;);navigator.mediaDevices.getUserMedia(&#123; video: true &#125;).then((stream) =&gt; &#123; video.srcObject = stream; video.play();&#125;).catch((err) =&gt; &#123; console.error(err);&#125;);const canvas = document.createElement(&#x27;canvas&#x27;);const ctx = canvas.getContext(&#x27;2d&#x27;);function scanQRCode() &#123; ctx.drawImage(video, 0, 0, canvas.width, canvas.height); const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height); const code = jsQR(imageData.data, imageData.width, imageData.height); if (code) &#123; console.log(code.data); &#125; else &#123; setTimeout(scanQRCode, 100); &#125;&#125;scanQRCode(); éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒgetUserMediaæ–¹æ³•éœ€è¦åœ¨httpsæˆ–localhostç¯å¢ƒä¸‹æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚","categories":[{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"}],"tags":[{"name":"vue-3","slug":"vue-3","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-3/"}]},{"title":"Vue3æ ¸å¿ƒæ¨¡å—åŠè™šæ‹ŸDOM","slug":"blog15","date":"2023-02-28T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2023/03/01/blog15/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/03/01/blog15/","excerpt":"","text":"img[alt=\"img\"]{ width:500px; } vue3ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—Reactive Module è·Ÿè¸ªã€è§‚å¯Ÿå˜åŒ–å¹¶åšå‡ºå“åº”çš„æ”¹å˜ Compiler Module è·å–HTMLæ¨¡æ¿å¹¶å°†å…¶ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•° Render Module Render Phaseï¼šè¿”å›è™šæ‹ŸèŠ‚ç‚¹ Mount Phaseï¼šä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºé¡µé¢ Patch Phaseï¼šä»¥è¡¥ä¸çš„å½¢å¼æ›´æ–°é¡µé¢ ç»„ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­Vueçš„æ“ä½œç¼–è¯‘æ¨¡å—å°†HTMLè½¬æ¢æˆä¸€ä¸ªæ¸²æŸ“å‡½æ•° åˆå§‹åŒ–å“åº”å¼å¯¹è±¡ä½¿ç”¨å“åº”å¼æ¨¡å— è¿›å…¥Renderæ¸²æŸ“é˜¶æ®µè°ƒç”¨renderå‡½æ•°ï¼Œå¼•ç”¨å“åº”å¼å¯¹è±¡ï¼Œè§‚å¯Ÿå¯¹è±¡å˜åŒ–ï¼Œrenderè¿”å›ä¸€ä¸ªè™šæ‹ŸDOMèŠ‚ç‚¹ ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºwebç•Œé¢ å¦‚æœå“åº”å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œå†æ¬¡è°ƒç”¨renderåˆ›å»ºè™šæ‹ŸDOMèŠ‚ç‚¹ï¼Œæ–°æ—§èŠ‚ç‚¹å¯¹æ¯”å‘é€è¡¥ä¸æ›´æ–°é¡µé¢ è™šæ‹ŸDOMè™šæ‹ŸDOMä¼˜ç‚¹ ä¿è¯æ€§èƒ½ä¸‹é™ï¼šè™šæ‹ŸDOMéœ€è¦é€‚é…ä»»ä½•ä¸Šå±‚APIå¯èƒ½äº§ç”Ÿçš„æ“ä½œï¼ŒDOMæ“ä½œçš„å®ç°å¿…é¡»æ˜¯æ™®é€‚çš„ï¼Œå› æ­¤è™šæ‹ŸDOMçš„æ€§èƒ½å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œä½†æ˜¯ç›¸è¾ƒäºç›´æ¥æ“ä½œDOMæ€§èƒ½è¿˜æ˜¯è¦å¥½å¾ˆå¤šï¼Œå› æ­¤æ¡†æ¶çš„è™šæ‹ŸDOMå¯ä»¥ä¿è¯ä¸éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–æƒ…å†µä¸‹æä¾›è¿˜ä¸é”™çš„åŠŸèƒ½ï¼Œå³ä¿è¯æ€§èƒ½ä¸‹é™ã€‚ æ— éœ€æ‰‹åŠ¨æ“ä½œDOMï¼šæ— éœ€æ‰‹åŠ¨æ“ä½œDOMï¼Œåªéœ€è¦å†™å¥½View-Modelä»£ç é€»è¾‘ï¼Œæ¡†æ¶ä¼šå¤„ç†å¥½æ•°æ®ä¸DOMçš„åŒå‘ç»‘å®šï¼Œå¸®åŠ©æˆ‘ä»¬ä»¥å¯é¢„æœŸçš„æ–¹å¼æ›´æ–°è§†å›¾ï¼Œæå¤§ç¨‹åº¦çš„æé«˜å¼€å‘æ•ˆç‡ã€‚ è·¨å¹³å°ï¼šè™šæ‹ŸDOMæœ¬è´¨ä¸Šå°±æ˜¯jsçš„å¯¹è±¡ï¼Œè€ŒDOMä¸å¹³å°å¼ºç›¸å…³ï¼Œç›¸æ¯”ä¹‹ä¸‹è™šæ‹ŸDOMå¯ä»¥è¿›è¡Œæ›´æ–¹ä¾¿çš„è·¨å¹³å°æ“ä½œã€‚ è™šæ‹ŸDOMçš„ç¼ºç‚¹ æ— æ³•ç¦æ­¢æè‡´ä¼˜åŒ–ï¼šè™½ç„¶è™šæ‹ŸDOM+åˆç†çš„ä¼˜åŒ–å¯ä»¥åº”å¯¹å¤§éƒ¨åˆ†åº”ç”¨çš„æ€§èƒ½éœ€æ±‚ï¼Œä½†æ˜¯åœ¨ä¸€äº›æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨ä¸­è™šæ‹ŸDOMæ— æ³•è¿›è¡Œé’ˆå¯¹æ€§çš„æè‡´ä¼˜åŒ–ã€‚ éœ€è¦é¢å¤–çš„åˆ›å»ºå‡½æ•°ï¼Œå¦‚createElementæˆ–è€…hå‡½æ•°ã€‚","categories":[{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"}],"tags":[{"name":"vue-3","slug":"vue-3","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-3/"}]},{"title":"Promiseæ¦‚è¿°åŠåº”ç”¨","slug":"blog14","date":"2023-02-19T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2023/02/20/blog14/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/02/20/blog14/","excerpt":"","text":"1.Promiseæ¦‚è¿°Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆã€‚ç®€å•æ¥è¯´æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜äº†å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚Promiseæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š å¯¹è±¡å†…éƒ¨çŠ¶æ€ä¸å—å¤–ç•Œç¯å¢ƒå½±å“ã€‚promiseä»…æœ‰ä¸‰ç§çŠ¶æ€pending(è¿›è¡Œä¸­)ã€fulfilled(å·²æˆåŠŸ)ã€rejected(å·²å¤±è´¥)ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰å±äºå“ªä¸€ç§çŠ¶æ€ã€‚ çŠ¶æ€ä¸€æ—¦ç¡®å®šå°±æ— æ³•æ”¹å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚promiseçš„ç»“æœæ”¹å˜åªæœ‰ä¸¤ç§çŠ¶æ€ï¼šä»pending-&gt;fulfilledã€ä»pending-&gt;rejectedã€‚åªè¦è¿™ä¸¤ä¸ªçŠ¶æ€å‘ç”Ÿå°±æ— æ³•æ”¹å˜ã€‚Promiseçš„ç¼ºç‚¹ï¼š æ— æ³•å–æ¶ˆPromise,ä¸€æ—¦æ–°å»ºå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚ å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œpromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯æ— æ³•è¢«å¤–ç•Œæ•è·ã€‚ å½“å¤„äºpendingçŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€é˜¶æ®µã€‚ æ³¨æ„ï¼šåœ¨æ„é€ Promiseçš„æ—¶å€™ï¼Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚ 2.åŸºæœ¬ç”¨æ³• é€šå¸¸ä½¿ç”¨new Promiseæ„é€ ä¸€ä¸ªæ–°çš„promiseå‡½æ•°ã€‚ 12345678const promise = new Promise((resolve, reject) =&gt; &#123; // ... some code if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */)&#123; resolve(value); &#125; else &#123; reject(error); &#125;&#125;); then()æ–¹æ³•ï¼šæ¥æ”¶ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€ä¸ªä½œä¸ºresolveçŠ¶æ€å›è°ƒï¼Œä¸€ä¸ªä½œä¸ºrejectå›è°ƒ 12345promise.then(res=&gt;&#123; console.log(res) // value&#125;,err=&gt;&#123; console.log(err) // error&#125;) catch()æ–¹æ³•ï¼šæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨æ¥æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å‡½æ•°ã€‚ç›¸å½“äºthenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‡½æ•°ã€‚ 123456promise.then(res=&gt;&#123; console.log(res) // value&#125;)promise.catch(err=&gt;&#123; console.log(err) // error&#125;) finally()æ–¹æ³•ï¼šç”¨äºæŒ‡å®šä¸ç®¡Promiseå¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ–¹æ³•ã€‚ 1234promise.then(res =&gt; &#123;Â·Â·Â·&#125;).catch(err =&gt; &#123;Â·Â·Â·&#125;).finally(() =&gt; &#123;Â·Â·Â·&#125;) all()æ–¹æ³•ï¼šç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚åªæœ‰å¤šä¸ªPromiseçš„è¿”å›çŠ¶æ€éƒ½ä¸ºresolveæ—¶æ–°çš„PromiseçŠ¶æ€æ‰ä¸ºresolve,ä»»æ„ä¸€ä¸ªPromiseçŠ¶æ€ä¸ºrejectæ—¶æ–°PromiseçŠ¶æ€ä¸ºrejectã€‚å¦‚æœå‚æ•°Promiseå®šä¹‰äº†è‡ªå·±çš„catchæ–¹æ³•ï¼Œé‚£ä¹ˆä¸€æ—¦è¢«rejectedä¸ä¼šè§¦å‘Promise.all()çš„catchæ–¹æ³•ã€‚å¦‚æœå‚æ•°Promiseæ²¡æœ‰è‡ªå·±çš„catchæ–¹æ³•ï¼Œåˆ™è°ƒç”¨Promise.all()çš„catchæ–¹æ³•ã€‚ 123456789101112131415161718const p = Promise.all([p1, p2, p3]);const p1 = new Promise((resolve, reject) =&gt; &#123; resolve(&#x27;hello&#x27;);&#125;).then(result =&gt; result).catch(e =&gt; e);const p2 = new Promise((resolve, reject) =&gt; &#123; throw new Error(&#x27;æŠ¥é”™äº†&#x27;);&#125;).then(result =&gt; result).catch(e =&gt; e);Promise.all([p1, p2]).then(result =&gt; console.log(result)).catch(e =&gt; console.log(e));// [&quot;hello&quot;, Error: æŠ¥é”™äº†] race()æ–¹æ³•ï¼šåŒæ ·æ˜¯å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°Promiseå®ä¾‹ï¼Œä¸allä¸åŒçš„æ˜¯ï¼šæŸä¸€ä¸ªå‚æ•°Promiseå…ˆæ”¹å˜çŠ¶æ€ï¼Œåˆ™è¿”å›ç‡å…ˆæ”¹å˜çš„é‚£ä¸ªPromiseçš„è¿”å›å€¼ï¼Œç›´æ¥ç»“æŸåŒ…è£…å®ä¾‹ã€‚ 1const p = Promise.race([p1, p2, p3]); any()æ–¹æ³•ï¼šåªè¦æœ‰ä¸€ä¸ªå‚æ•°å®ä¾‹å˜æˆfulfilledçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å˜æˆfulfilledçŠ¶æ€ï¼Œå¦‚æœæ‰€æœ‰çš„å®ä¾‹éƒ½å˜æˆrejectedçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹ä¼šå˜æˆrejectedçŠ¶æ€ã€‚ä¸raceæ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼šPromise.any()ä¸ä¼šå› ä¸ºæŸä¸ªPromiseå˜æˆrejectedçŠ¶æ€è€Œç»“æŸï¼Œå¿…é¡»ç­‰åˆ°æ‰€æœ‰å‚æ•°çš„Promiseå˜æˆrejectedçŠ¶æ€æ‰ç»“æŸã€‚ 1const p = Promise.any([p1, p2, p3]); resolve()æ–¹æ³•ï¼šå°†ç°æœ‰å¯¹è±¡è½¬åŒ–ä¸ºPromiseå¯¹è±¡ã€‚ 123Promise.resolve(&#x27;foo&#x27;)// ç­‰ä»·äºnew Promise(resolve =&gt; resolve(&#x27;foo&#x27;)) resolveå‚æ•°åˆ†å››ç§æƒ…å†µï¼š å‚æ•°æ˜¯ä¸€ä¸ªPromiseå®ä¾‹ï¼šPromise.resolveä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨è¿”å›è¿™ä¸ªå®ä¾‹ã€‚ å‚æ•°æ˜¯ä¸€ä¸ªthenableå¯¹è±¡(å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡)ï¼šPromise.resolve()æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œç„¶åç«‹å³æ‰§è¡Œthenableå¯¹è±¡çš„then()æ–¹æ³•ã€‚ 123456789let thenable = &#123; then: function(resolve, reject) &#123; resolve(42); &#125;&#125;;let p1 = Promise.resolve(thenable);p1.then(function (value) &#123; console.log(value); // 42&#125;); å‚æ•°ä¸æ˜¯å…·æœ‰then()æ–¹æ³•çš„å¯¹è±¡ï¼Œæˆ–æ ¹æœ¬å°±ä¸æ˜¯å¯¹è±¡ï¼šå¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰then()æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolve()æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºresolvedã€‚ 12345const p = Promise.resolve(&#x27;Hello&#x27;);p.then(function (s) &#123; console.log(s)&#125;);// Hello ä¸å¸¦æœ‰ä»»ä½•å‚æ•°:Promise.resolve()æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„ Promise å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«‹å³resolve()çš„ Promise å¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚ 12345678910setTimeout(function () &#123; console.log(&#x27;three&#x27;);&#125;, 0);Promise.resolve().then(function () &#123; console.log(&#x27;two&#x27;);&#125;);console.log(&#x27;one&#x27;);// one// two// three reject()æ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸ºrejectedã€‚ 12345678const p = Promise.reject(&#x27;å‡ºé”™äº†&#x27;);// ç­‰åŒäºconst p = new Promise((resolve, reject) =&gt; reject(&#x27;å‡ºé”™äº†&#x27;))p.then(null, function (s) &#123; console.log(s)&#125;);// å‡ºé”™äº†","categories":[{"name":"ES6","slug":"ES6","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/ES6/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"Reflectæ¦‚è¿°åŠåº”ç”¨","slug":"blog12","date":"2023-02-13T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2023/02/14/blog12/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/02/14/blog12/","excerpt":"","text":"Reflectæ¦‚è¿°Reflectæ˜¯ES6æä¾›çš„æ“ä½œå¯¹è±¡çš„Api,å…¶ä¸»è¦ç›®çš„æœ‰ å°†Objectå¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.definePropertyï¼‰ï¼Œæ”¾åˆ°Reflectå¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨Objectå’ŒReflectå¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨Reflectå¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»Reflectå¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚ ä¿®æ”¹æŸäº›Objectæ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼ŒObject.defineProperty(obj, name, desc)åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€ŒReflect.defineProperty(obj, name, desc)åˆ™ä¼šè¿”å›falseã€‚ è®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›Objectæ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚name in objå’Œdelete obj[name]ï¼Œè€ŒReflect.has(obj, name)å’ŒReflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚ Reflectå¯¹è±¡çš„æ–¹æ³•ä¸Proxyå¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯Proxyå¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨Reflectå¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©Proxyå¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ Reflecté™æ€æ–¹æ³• Reflect.get(target,name,receiver):æŸ¥æ‰¾å¹¶è¿”å›targetå¯¹è±¡çš„nameå±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§è¿”å›undefined 123456789101112131415161718var myObject = &#123; foo: 1, bar: 2, get baz() &#123; return this.foo + this.bar; &#125;,&#125;var myReceiverObject = &#123; foo: 4, bar: 4,&#125;;// Reflect.getçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ä¼šæŠ¥é”™Reflect.get(myObject, &#x27;foo&#x27;) // 1Reflect.get(myObject, &#x27;bar&#x27;) // 2Reflect.get(myObject, &#x27;baz&#x27;) // 3// å¦‚æœæœ‰reciverå‚æ•°åˆ™getterçš„thisç»‘å®šreceiverReflect.get(myObject, &#x27;baz&#x27;, myReceiverObject) // 8 Reflect.set(target,name,value,receiver):è®¾ç½®å¯¹è±¡çš„nameå±æ€§å€¼ä¸ºvalue 1234567891011121314var myObject = &#123; foo: 4, set bar(value) &#123; return this.foo = value; &#125;,&#125;;var myReceiverObject = &#123; foo: 0,&#125;;Reflect.set(myObject, &#x27;bar&#x27;, 1, myReceiverObject);myObject.foo // 4myReceiverObject.foo // 1 Reflect.has(obj,name):åˆ¤æ–­objå¯¹è±¡æ˜¯å¦åŒ…å«nameå±æ€§ 12345678var myObject = &#123; foo: 1,&#125;;// æ—§å†™æ³•&#x27;foo&#x27; in myObject // true// æ–°å†™æ³•Reflect.has(myObject, &#x27;foo&#x27;) // true Reflect.deleteProperty(obj, name):ç­‰åŒäºdelete obj[name]æ–¹æ³•ï¼Œåˆ é™¤å¯¹è±¡çš„nameå±æ€§å€¼ 123456const myObj = &#123; foo: &#x27;bar&#x27; &#125;;// æ—§å†™æ³•delete myObj.foo;// æ–°å†™æ³•Reflect.deleteProperty(myObj, &#x27;foo&#x27;); Reflect.construct(target,args):ç­‰åŒäºnew target(â€¦args)æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨newè°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚ 12345678function Greeting(name) &#123; this.name = name;&#125;// new çš„å†™æ³•const instance = new Greeting(&#x27;å¼ ä¸‰&#x27;);// Reflect.construct çš„å†™æ³•const instance = Reflect.construct(Greeting, [&#x27;å¼ ä¸‰&#x27;]); Reflect.apply(func,thisArg,args):ç­‰åŒäºFunction.prototype.apply.call(func,thisArg,args)ç”¨äºç»‘å®šthiså¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°ã€‚ 1234567891011const ages = [11, 33, 12, 54, 18, 96];// æ—§å†™æ³•const youngest = Math.min.apply(Math, ages);const oldest = Math.max.apply(Math, ages);const type = Object.prototype.toString.call(youngest);// æ–°å†™æ³•const youngest = Reflect.apply(Math.min, Math, ages);const oldest = Reflect.apply(Math.max, Math, ages);const type = Reflect.apply(Object.prototype.toString, youngest, []); Reflect.ownKeys(target):è¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œç­‰åŒäºObject.getOwnPropertyNamesä¸Object.getOwnPropertySymbolsä¹‹å’Œ 1234567891011121314151617var myObject = &#123; foo: 1, bar: 2, [Symbol.for(&#x27;baz&#x27;)]: 3, [Symbol.for(&#x27;bing&#x27;)]: 4,&#125;;// æ—§å†™æ³•Object.getOwnPropertyNames(myObject)// [&#x27;foo&#x27;, &#x27;bar&#x27;]Object.getOwnPropertySymbols(myObject)//[Symbol(baz), Symbol(bing)]// æ–°å†™æ³•Reflect.ownKeys(myObject)// [&#x27;foo&#x27;, &#x27;bar&#x27;, Symbol(baz), Symbol(bing)] å…¶ä»–Apiå‚è§ CDN-Reflect å®ä¾‹ï¼šä½¿ç”¨Proxyå’ŒReflectå®ç°è§‚å¯Ÿè€…æ¨¡å¼1234567891011121314// è§‚å¯Ÿç›®æ ‡const person = observable(&#123; name: &#x27;å¼ ä¸‰&#x27;, age: 20&#125;);// è§‚å¯Ÿè€…function print() &#123; console.log(`$&#123;person.name&#125;, $&#123;person.age&#125;`)&#125;observe(print);person.name = &#x27;æå››&#x27;;// è¾“å‡º// æå››, 20 å®ç°ï¼š 12345678910const queuedObservers = new Set();const observe = fn =&gt; queuedObservers.add(fn);const observable = obj =&gt; new Proxy(obj, &#123;set&#125;);function set(target, key, value, receiver) &#123; const result = Reflect.set(target, key, value, receiver); queuedObservers.forEach(observer =&gt; observer()); return result;&#125;","categories":[{"name":"ES6","slug":"ES6","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/ES6/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"Proxyæ¦‚è¿°åŠåº”ç”¨","slug":"blog13","date":"2023-02-13T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2023/02/14/blog13/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/02/14/blog13/","excerpt":"","text":"1.proxyæ¦‚è¿°ç”¨äºåœ¨ä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œå¯ç†è§£ä¸ºåœ¨ç›®æ ‡ä¹‹å‰æ¶è®¾ä¸€å±‚æ‹¦æˆªå™¨ï¼Œå¤–ç•Œæ‰€æœ‰çš„è®¿é—®éƒ½è¦é€šè¿‡è¯¥æ‹¦æˆªå™¨ï¼Œå¯ä»¥å¯¹è®¿é—®åšå‡ºè¿‡æ»¤å’Œæ”¹å†™ã€‚ 1234567891011121314151617181920var proxy = new Proxy(target, handler);// target:æ‹¦æˆªå¯¹è±¡ handler:å¯¹è±¡ï¼Œå®šä¹‰æ‹¦æˆªè¡Œä¸ºvar obj = new Proxy(&#123;&#125;, &#123; get: function (target, propKey, receiver) &#123; console.log(`getting $&#123;propKey&#125;!`); return Reflect.get(target, propKey, receiver); &#125;, set: function (target, propKey, value, receiver) &#123; console.log(`setting $&#123;propKey&#125;!`); return Reflect.set(target, propKey, value, receiver); &#125;&#125;);obj.count = 1// setting count!++obj.count// getting count!// setting count!// 2 2.proxyæ‹¦æˆªæ“ä½œ get(target, propKey, receiver)ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚proxy.fooå’Œproxy[â€˜fooâ€™]ã€‚ set(target, propKey, value, receiver)ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚proxy.foo = væˆ–proxy[â€˜fooâ€™] = vï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ has(target, propKey)ï¼šæ‹¦æˆªpropKey in proxyçš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ deleteProperty(target, propKey)ï¼šæ‹¦æˆªdelete proxy[propKey]çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ownKeys(target)ï¼šæ‹¦æˆªObject.getOwnPropertyNames(proxy)ã€Object.getOwnPropertySymbols(proxy)ã€Object.keys(proxy)ã€forâ€¦inå¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€ŒObject.keys()çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚ getOwnPropertyDescriptor(target, propKey)ï¼šæ‹¦æˆªObject.getOwnPropertyDescriptor(proxy, propKey)ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚ defineProperty(target, propKey, propDesc)ï¼šæ‹¦æˆªObject.defineProperty(proxy, propKey, propDescï¼‰ã€Object.defineProperties(proxy, propDescs)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ preventExtensions(target)ï¼šæ‹¦æˆªObject.preventExtensions(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ getPrototypeOf(target)ï¼šæ‹¦æˆªObject.getPrototypeOf(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ isExtensible(target)ï¼šæ‹¦æˆªObject.isExtensible(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ setPrototypeOf(target, proto)ï¼šæ‹¦æˆªObject.setPrototypeOf(proxy, proto)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚ apply(target, object, args)ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚proxy(â€¦args)ã€proxy.call(object, â€¦args)ã€proxy.apply(â€¦)ã€‚ construct(target, args)ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚new proxy(â€¦args)ã€‚ 3.proxyå¸¸ç”¨å®ä¾‹æ–¹æ³• get():ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œï¼Œå¯æ¥å—ä¸‰ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€å±æ€§åã€proxyå®ä¾‹æœ¬èº«(å¯é€‰) 12345678910111213141516var person = &#123; name: &quot;å¼ ä¸‰&quot;&#125;;var proxy = new Proxy(person, &#123; get: function(target, propKey) &#123; if (propKey in target) &#123; return target[propKey]; &#125; else &#123; throw new ReferenceError(&quot;Prop name \\&quot;&quot; + propKey + &quot;\\&quot; does not exist.&quot;); &#125; &#125;&#125;);proxy.name // &quot;å¼ ä¸‰&quot;proxy.age // æŠ›å‡ºä¸€ä¸ªé”™è¯¯ set():ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œï¼Œæ¥æ”¶å››ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€å±æ€§åã€å±æ€§å€¼ã€proxyå®ä¾‹æœ¬èº«(å¯é€‰) 12345678910111213141516171819202122let validator = &#123; set: function(obj, prop, value) &#123; if (prop === &#x27;age&#x27;) &#123; if (!Number.isInteger(value)) &#123; throw new TypeError(&#x27;The age is not an integer&#x27;); &#125; if (value &gt; 200) &#123; throw new RangeError(&#x27;The age seems invalid&#x27;); &#125; &#125; // å¯¹äºæ»¡è¶³æ¡ä»¶çš„ age å±æ€§ä»¥åŠå…¶ä»–å±æ€§ï¼Œç›´æ¥ä¿å­˜ obj[prop] = value; return true; &#125;&#125;;let person = new Proxy(&#123;&#125;, validator);person.age = 100;person.age // 100person.age = &#x27;young&#x27; // æŠ¥é”™person.age = 300 // æŠ¥é”™ 3.apply():æ‹¦æˆªå‡½æ•°çš„è°ƒç”¨ã€callã€applyæ“ä½œï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€ç›®æ ‡å¯¹è±¡çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€ç›®æ ‡å¯¹è±¡çš„å‚æ•°æ•°ç»„ã€‚ 123456789101112var twice = &#123; apply (target, ctx, args) &#123; return Reflect.apply(...arguments) * 2; &#125;&#125;;function sum (left, right) &#123; return left + right;&#125;;var proxy = new Proxy(sum, twice);proxy(1, 2) // 6proxy.call(null, 5, 6) // 22proxy.apply(null, [7, 8]) // 30 has():æ‹¦æˆªHasPropertyæ“ä½œï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§ï¼Œå³inè¿ç®—ç¬¦ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€éœ€æŸ¥è¯¢å±æ€§åã€‚haså¯¹for inéå†ä¸æ‹¦æˆªã€‚ 1234567891011var handler = &#123; has (target, key) &#123; if (key[0] === &#x27;_&#x27;) &#123; return false; &#125; return key in target; &#125;&#125;;var target = &#123; _prop: &#x27;foo&#x27;, prop: &#x27;foo&#x27; &#125;;var proxy = new Proxy(target, handler);&#x27;_prop&#x27; in proxy // false construct():ç”¨äºæ‹¦æˆªnewå‘½ä»¤ï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€æ„é€ å‡½æ•°çš„å‚æ•°æ•°ç»„ã€åˆ›é€ å®ä¾‹å‚æ•°æ—¶ï¼Œnewå‘½ä»¤ä½œç”¨çš„æ„é€ å‡½æ•°ã€‚æ³¨æ„ï¼Œconstructå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ 123456789101112131415161718const p = new Proxy(function () &#123;&#125;, &#123; construct: function(target, args) &#123; console.log(&#x27;called: &#x27; + args.join(&#x27;, &#x27;)); return &#123; value: args[0] * 10 &#125;; &#125;&#125;);// på³ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°(new p(1)).valueconst handler = &#123; construct: function(target, args) &#123; console.log(this === handler); // thisæŒ‡å‘proxyé…ç½®çš„æ‹¦æˆªå¯¹è±¡ return new target(...args); &#125;&#125;let p = new Proxy(function () &#123;&#125;, handler);new p() // true deleteProperty():ç”¨äºæ‹¦æˆªdeleteæ“ä½œï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚ç›®æ ‡å¯¹è±¡ã€åˆ é™¤keyå€¼ã€‚å¦‚æœæ–¹æ³•æŠ›å‡ºé”™è¯¯æˆ–è€…è¿”å›falseè¯´æ˜å½“å‰å±æ€§æ— æ³•è¢«deleteåˆ é™¤ã€‚ 1234567891011121314151617var handler = &#123; deleteProperty (target, key) &#123; invariant(key, &#x27;delete&#x27;); delete target[key]; return true; &#125;&#125;;function invariant (key, action) &#123; if (key[0] === &#x27;_&#x27;) &#123; throw new Error(`Invalid attempt to $&#123;action&#125; private &quot;$&#123;key&#125;&quot; property`); &#125;&#125;var target = &#123; _prop: &#x27;foo&#x27; &#125;;var proxy = new Proxy(target, handler);delete proxy._prop// Error: Invalid attempt to delete private &quot;_prop&quot; property","categories":[{"name":"ES6","slug":"ES6","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/ES6/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"Generatorå‡½æ•°åŠAsync/Await","slug":"blog11","date":"2023-02-12T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2023/02/13/blog11/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2023/02/13/blog11/","excerpt":"","text":"1.Generatorå‡½æ•°Generatorå‡½æ•°æ˜¯ES6ä¸­æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ³•ã€‚Generatoræ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¯ä»¥ä¾æ¬¡éå†å‡½æ•°å†…éƒ¨çš„æ²¡ä¸€ä¸ªçŠ¶æ€ã€‚ç®€å•å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯æš‚åœæ‰§è¡Œçš„å‡½æ•°ï¼Œyieldå°±æ˜¯æš‚åœæ ‡å¿—ã€‚ functionåé¢æœ‰â€*â€ å‡½æ•°å†…éƒ¨æœ‰yieldè¡¨è¾¾å¼ 123456functon * call()&#123; console.log(1) yield &#x27;1&#x27; consol.log(2) yield &#x27;2&#x27;&#125; 2.Generatorå‡½æ•°æ‰§è¡Œæœºåˆ¶ä½¿ç”¨generatorå‡½æ•°å’Œä½¿ç”¨æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåœ¨åé¢åŠ ä¸Š()å°±å¯ä»¥äº†,ä½†æ˜¯å‡½æ•°å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å‡½æ•°çš„æŒ‡é’ˆï¼Œè°ƒç”¨éå†å™¨å¯¹è±¡Iteratorçš„nextæ–¹æ³•ï¼Œä¼šåˆ†æ­¥æ‰§è¡Œgeneratorå‡½æ•°ä¸­çš„å¯¹åº”é€»è¾‘ 123456789let f = callf.next() //console =&gt; 1//yield =&gt; &#123;value: &#x27;1&#x27;, done: false&#125; f.next() //console =&gt; 2//yield =&gt; &#123;value: &#x27;2&#x27;, done: false&#125; f.next()//yield =&gt; &#123;value: undefined, done: true&#125; 3.nextæ–¹æ³•nextå‡½æ•°ä¸ä¼ å…¥å‚æ•°æ—¶yieldè¡¨è¾¾å¼è¿”å›å€¼æ˜¯undefinedï¼Œå½“nextä¼ å…¥å‚æ•°çš„æ—¶å€™å‚æ•°ä¼šä½œä¸ºä¸Šä¸€æ­¥yieldçš„è¿”å›å€¼ 1234567891011121314151617181920functon * call2()&#123; console.log(&#x27;å¼€å§‹&#x27;) const a = yield 1 consol.log(a) const b = yield 2 console.log(b)&#125;const f2 = call2()f2.next()//console =&gt; &#x27;å¼€å§‹&#x27;f2.next(10)//console =&gt; (10)//yield =&gt; &#123;value: 1, done: false&#125;f2.next(20)//console =&gt; (20)//yield =&gt; &#123;value: 2, done: false&#125;f2.next()//yield =&gt; &#123;value: undefined, done: true&#125; 4.returnæ–¹æ³•returnè¿”å›ç»™å®šå€¼å¹¶ç»“æŸéå†Generatorå‡½æ•°ã€‚returnæœ‰å‚æ•°è¿”å›å‚æ•°æ²¡å‚æ•°è¿”å›undefinedã€‚ 12345678910111213141516171819functon * call3()&#123; console.log(&#x27;å¼€å§‹&#x27;) const a = yield 1 consol.log(a) const b = yield 2 console.log(b)&#125;const f3 = call3()f3.next()//console =&gt; &#x27;å¼€å§‹&#x27;f3.next(10)//console =&gt; (10)//yield =&gt; &#123;value: 1, done: false&#125;f3.return(&quot;end&quot;)//yield =&gt; &#123;value: &quot;end&quot;, done: true&#125;f3.next()//yield =&gt; &#123;value: undefined, done: true&#125; 5.*yield*yieldè¡¨ç¤ºyieldè¿”å›å¦ä¸€ä¸ªGeneratorå¯¹è±¡,å¯ä»¥åœ¨Generatorå†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ªGeneratorå‡½æ•°ã€‚ 123456789101112function* callA() &#123; console.log(&quot;callA: &quot; + (yield))&#125;function* callerB() &#123; while (true) &#123; yield* callA(); &#125;&#125;const callerObj = callerB()callerObj.next()callerObj.next(&quot;first&quot;) // console =&gt; callA :firstcallerObj.next(&quot;second&quot;) // console =&gt; callA :second 6.async/awaitES7ä¸­å¼•å…¥ï¼Œå¯ä»¥ç†è§£ä¸ºGeneratorçš„è¯­æ³•ç³–ï¼Œå¯¹Generatorå‡½æ•°è¿›è¡Œäº†ä¿®æ”¹ã€‚awaitç­‰å¾…çš„æ˜¯ä¸€ä¸ªéšå¼è¿”å›Promiseä½œä¸ºç»“æœçš„å‡½æ•°ã€‚asyncã€awaitç­‰åŒäºä¸€ä¸ªgenerator+è‡ªåŠ¨æ‰§è¡Œå™¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445function fn(nums) &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve(nums * 2) &#125;, 1000) &#125;)&#125;function* gen() &#123; const num1 = yield fn(1) console.log(num1) // 2 const num2 = yield fn(num1) console.log(num2) // 4 const num3 = yield fn(num2) console.log(num3) // 8 return num3&#125;function generatorToAsync(generatorFn) &#123; return function() &#123; const gen = generatorFn.apply(this, arguments) // genæœ‰å¯èƒ½ä¼ å‚ // è¿”å›ä¸€ä¸ªPromise return new Promise((resolve, reject) =&gt; &#123; function go(key, arg) &#123; let res try &#123; res = gen[key](arg) // è¿™é‡Œæœ‰å¯èƒ½ä¼šæ‰§è¡Œè¿”å›rejectçŠ¶æ€çš„Promise &#125; catch (error) &#123; return reject(error) // æŠ¥é”™çš„è¯ä¼šèµ°catchï¼Œç›´æ¥reject &#125; // è§£æ„è·å¾—valueå’Œdone const &#123; value, done &#125; = res if (done) &#123; // å¦‚æœdoneä¸ºtrueï¼Œè¯´æ˜èµ°å®Œäº†ï¼Œè¿›è¡Œresolve(value) return resolve(value) &#125; else &#123; // å¦‚æœdoneä¸ºfalseï¼Œè¯´æ˜æ²¡èµ°å®Œï¼Œè¿˜å¾—ç»§ç»­èµ° // valueæœ‰å¯èƒ½æ˜¯ï¼šå¸¸é‡ï¼ŒPromiseï¼ŒPromiseæœ‰å¯èƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥ return Promise.resolve(value).then(val =&gt; go(&#x27;next&#x27;, val), err =&gt; go(&#x27;throw&#x27;, err)) &#125; &#125; go(&quot;next&quot;) // ç¬¬ä¸€æ¬¡æ‰§è¡Œ &#125;) &#125;&#125;const asyncFn = generatorToAsync(gen)asyncFn().then(res =&gt; console.log(res))","categories":[{"name":"ES6","slug":"ES6","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/ES6/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"}]},{"title":"ä¸€è¡Œä»£ç -ç½‘ç«™å˜ç°","slug":"blog10","date":"2022-11-30T16:00:00.000Z","updated":"2023-07-08T07:32:07.354Z","comments":false,"path":"2022/12/01/blog10/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/12/01/blog10/","excerpt":"","text":"åŠŸèƒ½å®ç° åœ¨å‡ºç°ä¸€äº›çªå‘æƒ…å†µä¸‹éœ€è¦å¿«é€Ÿå°†webç«¯é¡µé¢å˜ç°çš„éœ€æ±‚çš„æ—¶å€™ï¼Œä»…ç”¨ä¸€ä¸ªå±æ€§å³å¯è®©æ•´ä¸ªé¡¹ç›®å®ç°ï¼š 1filter: grayscale(1) // å‚æ•°ä¸º0-1çš„æ•°å€¼ åœ¨bodyå†…è”æ ·å¼æ·»åŠ å¦‚ä¸‹ä»£ç å®ç°å…¨ç«™å˜ç° 1&lt;body style=&quot;filter:grayscale(1);-webkit-filter:grayscale(1)&quot;&gt;&lt;/body&gt;","categories":[{"name":"CSS","slug":"CSS","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/CSS/"}],"tags":[{"name":"æ ·å¼","slug":"æ ·å¼","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E6%A0%B7%E5%BC%8F/"}]},{"title":"commitlint+husky+commitizen+lint-stageä»£ç é£æ ¼åŠä¸Šä¼ è§„èŒƒç®¡ç†","slug":"blog9","date":"2022-11-07T16:00:00.000Z","updated":"2023-07-08T07:32:07.355Z","comments":false,"path":"2022/11/08/blog9/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/11/08/blog9/","excerpt":"","text":"ç´§æ¥ä¸Šæ–‡è¯´åˆ°vite+vue3ä»£ç é£æ ¼åŠæ ¼å¼åŒ–æ“ä½œï¼Œå‰æ–‡ä¸»è¦é’ˆå¯¹æœ¬åœ°åŒ–é…ç½®æ ¼å¼åŒ–ã€‚ä¸ºäº†æ›´åŠ è§„èŒƒä»“åº“ä»£ç ï¼Œæœ¬æ–‡å¼•å…¥ä»‹ç»commitlintç­‰å·¥å…·ï¼Œåœ¨ä»£ç commitçš„æ—¶å€™å†æ¬¡æ ¡éªŒä¸ºä»£ç è§„èŒƒå†ä¸Šä¸€å±‚ä¿éšœã€‚ å®‰è£…commitlintåŠcommitlinté…ç½®åŒ…1npm install @commitlint/cli @commitlint/config-conventional -D æ·»åŠ @commitlint/config-conventionalåŒ…çš„ç›®çš„æ˜¯ä½¿ç”¨åŸºç¡€é…ç½®ï¼Œå¦å¤–ä¹Ÿå¯æ ¹æ®å®é™…éœ€è¦æ·»åŠ é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼šcommitlint.config.jsã€.commitlintrc.jsã€.commitlintrcã€.commitlintrc.jsonã€.commitlintrc.ymlæˆ–package.jsonä¸­çš„commité…ç½® å®‰è£…husky12345#ä½¿ç”¨ä¸‹è¿°å‘½ä»¤ä¼šåœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆ.huskyæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªpre-commité’©å­å®ä¾‹npx husky-init &amp;&amp; npm install # npmnpx husky-init &amp;&amp; yarn # Yarn 1yarn dlx husky-init --yarn2 &amp;&amp; yarn # Yarn 2+pnpm dlx husky-init &amp;&amp; pnpm install # pnpm è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®‰è£…huskyï¼š 1234npm install husky --save-dev #å®‰è£…ä¾èµ–npx --no-install husky install #åˆ›å»º.huskyç›®å½•(ä½¿ç”¨--no-installçš„ç›®çš„æ˜¯è®©npxå¼ºåˆ¶ä½¿ç”¨node_modulesç›®å½•ä¸‹çš„huskyä¾èµ–åŒ…)npm pkg set scripts.prepare=&quot;husky install&quot; #åœ¨package.jsonä¸­æ·»åŠ åˆå§‹åŒ–å‘½ä»¤(æ­¤æ­¥éª¤å¯ä»¥çœç•¥ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤šäººå¼€å‘ä¼šå¾ˆæœ‰å¿…è¦ï¼Œåˆå§‹åŒ–ä»“åº“å¯ä»¥æ‰§è¡Œè¯¥å‘½ä»¤)npx --no-instal husky add .husky/pre-commit &quot;npm run lint&quot; #å¿«é€Ÿåˆ›å»ºpre-commité’©å­ æ·»åŠ commit-msg hookï¼ˆè¯¥hookä¼šåœ¨commitlintæœªé€šè¿‡æ—¶æç¤ºç›¸å…³ä¿¡æ¯ï¼‰ 1npx husky add .husky/commit-msg &#x27;npx --no -- commitlint --edit $&#123;1&#125;&#x27; å¦‚ä½•åˆ¤æ–­ä¸Šè¿°æ­¥éª¤æ˜¯å¦æˆåŠŸå¯ä»¥ä½¿ç”¨ç®€å•çš„testå‘½ä»¤æµ‹è¯• 1npx commitlint --from HEAD~1 --to HEAD --verbose æ‰§è¡Œcommitä¹‹åå¦‚æœå‡ºç°ç±»ä¼¼çš„ä¿¡æ¯å³å¯è®¤ä¸ºé…ç½®æˆåŠŸ 12345678910git commit -m &quot;foo: this will fail&quot;husky &gt; commit-msg (node v10.1.0)No staged files match any of provided globs.â§— input: foo: this will failâœ– type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum]âœ– found 1 problems, 0 warningsâ“˜ Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlinthusky &gt; commit-msg hook failed (add --no-verify to bypass) æ·»åŠ commitizencommitizenå·¥å…·å¯ä»¥é€šè¿‡äº¤äº’å¼æ’°å†™ç¬¦åˆCommit Messageè§„èŒƒçš„Commit Message 123npm install commitizen -D#oryarn add commitizen -D æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç”Ÿæˆç¬¦åˆAngularçš„Commit messageæ ¼å¼æäº¤è§„èŒƒï¼ˆä½¿ç”¨å…¶ä»–è§„èŒƒå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ï¼‰ 1npx --no-install commitizen init cz-conventional-changelog --save-dev --save-exact !!!è‹¥ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ï¼Œéœ€è¦åœ¨package.jsonä¸­é…ç½®ä¸€ä¸‹commitizené€‚é…å™¨ 123456789&#123; ... &quot;config&quot;: &#123; &quot;commitizen&quot;: &#123; &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot; &#125; &#125; ...&#125; å¦å¤–åœ¨package.jsonä¸­çš„scriptsä¸­æ·»åŠ commitè„šæœ¬æ›¿ä»£git commit 123456...&quot;scripts&quot;: &#123; &quot;cz&quot;: &quot;git add . &amp;&amp; git-cz&quot;, &quot;prepare&quot;: &quot;husky install&quot; &#125;... æ‰§è¡Œå®Œä¸Šè¿°æ“ä½œå°±å¯ä»¥ä½¿ç”¨è„šæœ¬æäº¤ä»£ç  é…ç½®commitlintåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶.commitlintrc.jsï¼š 12345678910111213141516// å…·ä½“é…ç½®å¯å‚è€ƒhttps://commitlint.js.org/#/reference-rulesè‡ªè¡Œé…ç½®ä¸åšè¯¦ç»†è¯´æ˜module.exports = &#123; ignores: [(commit) =&gt; commit.includes(&#x27;init&#x27;)], extends: [&#x27;@commitlint/config-conventional&#x27;], rules: &#123; &#x27;header-max-length&#x27;: [2, &#x27;always&#x27;, 72], &#x27;scope-case&#x27;: [2, &#x27;always&#x27;, &#x27;lowerCase&#x27;], &#x27;subject-empty&#x27;: [2, &#x27;never&#x27;], &#x27;subject-case&#x27;: [2, &#x27;always&#x27;, [&#x27;lower-case&#x27;, &#x27;sentence-case&#x27;, &#x27;start-case&#x27;, &#x27;pascal-case&#x27;, &#x27;upper-case&#x27;]], &#x27;subject-full-stop&#x27;: [2, &#x27;never&#x27;, &#x27;.&#x27;], &#x27;type-empty&#x27;: [2, &#x27;never&#x27;], &#x27;type-case&#x27;: [2, &#x27;always&#x27;, &#x27;lowerCase&#x27;], &#x27;type-enum&#x27;: [2, &#x27;always&#x27;, [&#x27;feat&#x27;, &#x27;fix&#x27;, &#x27;docs&#x27;, &#x27;style&#x27;, &#x27;perf&#x27;, &#x27;chore&#x27;, &#x27;build&#x27;]] ] &#125;&#125; commitizenè¾“å‡ºæ±‰åŒ–å®‰è£…commitlint-config-czæ’ä»¶é…ç½®commit message 1234567npm install commitlint-config-cz -D #czé…ç½®æ’ä»¶#oryarn add commitlint-config-cz -D #czé…ç½®æ’ä»¶#andnpm install cz-customizable -D #czé€‚é…å™¨æ’ä»¶#oryarn add cz-customizable -D #czé€‚é…å™¨æ’ä»¶ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º.cz-config.jsæ–‡ä»¶ 123456789101112131415161718// é…ç½®æ–‡ä»¶å¯å‚è€ƒhttps://github.com/leoforfree/cz-customizable/blob/HEAD/cz-config-EXAMPLE.jsè‡ªè¡Œé…ç½®ä¸åšè¯¦ç»†è¯´æ˜module.exports = &#123; types: [ &#123; value: &#x27;:sparkles: feat&#x27;, name: &#x27;âœ¨ feat: ä¸€é¡¹æ–°åŠŸèƒ½&#x27; &#125;, &#123; value: &#x27;:bug: fix&#x27;, name: &#x27;ğŸ› fix: ä¿®å¤ä¸€ä¸ªBug&#x27; &#125;, &#123; value: &#x27;:memo: docs&#x27;, name: &#x27;ğŸ“ docs: æ–‡æ¡£å˜æ›´&#x27; &#125;, &#123; value: &#x27;:lipstick: style&#x27;, name: &#x27;ğŸ’„ style: ä»£ç é£æ ¼ï¼Œæ ¼å¼ä¿®å¤&#x27; &#125;, &#123; value: &#x27;:zap: perf&#x27;, name: &#x27;âš¡ï¸ perf: ä»£ç ä¼˜åŒ–,æ”¹å–„æ€§èƒ½&#x27; &#125;, &#123; value: &#x27;:rocket: chore&#x27;, name: &#x27;ğŸš€ chore: å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·&#x27; &#125;, &#123; value: &#x27;:package: build&#x27;, name: &#x27;ğŸ“¦ï¸ build: å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–&#x27; &#125; ], messages: &#123; type: &#x27;è¯·é€‰æ‹©æäº¤ç±»å‹(å¿…å¡«):&#x27;, subject: &#x27;è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):&#x27;, confirmCommit: &#x27;ç¡®å®šæäº¤æ­¤è¯´æ˜å—ï¼Ÿ&#x27; &#125;, skipQuestions: [&#x27;scope&#x27;, &#x27;body&#x27;, &#x27;breaking&#x27;, &#x27;footer&#x27;]&#125; åˆ›å»ºå®Œ.cz-config.js è¿”å›package.jsonä¿®æ”¹commitizené€‚é…å™¨é€‰é¡¹1234567...&quot;config&quot;: &#123; &quot;commitizen&quot;: &#123; &quot;path&quot;: &quot;node_modules/cz-customizable&quot; &#125;&#125;,... è‹¥ä¹‹å‰ä½¿ç”¨Angularçš„Commit messageæ ¼å¼æäº¤è§„èŒƒï¼Œéœ€ä¿®æ”¹.commitlintrc.jsæ–‡ä»¶ï¼ŒèŠ‚çº¦ç©ºé—´å¯ä»¥å¸è½½æ‰@commitlint/config-conventionalæ’ä»¶ï¼ˆç”¨ä¸ä¸Šäº†ï¼‰12345module.exports = &#123; ... extends: [], ...&#125; é›†æˆ gitmoji123npm install commitlint-config-gitmoji -D#oryarn add commitlint-config-gitmoji -D ä¿®æ”¹.commitlintrc.js12345module.exports = &#123; ... extends: [&#x27;gitmoji&#x27;], ...&#125; ä½¿ç”¨gitmojiçš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š æŠ¥é”™æ‰¾ä¸åˆ°gitmojis.json ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šåœ¨node_modules/commitlint-plugin-gitmoji/libä¸‹æ·»åŠ gitmojis.json åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ gitmojis.jsonå¹¶ä¿®æ”¹.cz-config.js 1234567891011121314 process.env.GITMOJI_PATH = &#x27;.gitmoji.json&#x27; modules.exports=&#123; ... &#125;``` 2. å¶é‡æ ¡éªŒä¸é€šè¿‡éœ€è¦ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°äº‹ä¾‹é…ç½®.commitlintrc.jsï¼ˆåˆ—å‡ºæ¥çš„ruleå‹¿æ”¹ï¼‰### å®‰è£…lint-stageæ–‡ä»¶è¿‡æ»¤å™¨ï¼Œæ¯æ¬¡åªæ ¡éªŒcommitçš„æ–‡ä»¶```shellnpm install lint-staged -D#oryarn add lint-stage -D ä¿®æ”¹.husky/pre-commit 1234#!/usr/bin/env sh. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;npx lint-staged ä¿®æ”¹package.json 12345678910111213// å…·ä½“ä½¿ç”¨å¯å‚è€ƒlint-stageä»‹ç»ï¼šhttps://github.com/okonet/lint-staged#readme...&quot;lint-staged&quot;: &#123; &quot;*.&#123;js,jsx,ts,tsx&#125;&quot;: [ &quot;eslint --fix&quot;, //eslintæ ¡éªŒ &quot;prettier --write&quot; //prettieræ ¼å¼åŒ– ], &quot;*.vue&quot;: [ &quot;eslint --fix&quot;, &quot;prettier --write&quot; ]&#125;... æœ‰å…³eslintåŠprettierçš„é—®é¢˜å¯ä»¥å‚è§ä¸Šç¯‡æ–‡ç« ã€‚vite+vue3ä»£ç é£æ ¼æ ¡éªŒåŠæ ¼å¼åŒ– ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡å…¨éƒ¨å†…å®¹ï¼Œç”±äºé¡¹ç›®æˆæœ¬å…³ç³»æ²¡æœ‰å¼•å…¥å…¶ä»–å·¥å…·ï¼Œåƒæ–‡ä»¶æ ¡éªŒï¼Œcommit-logè‡ªåŠ¨æ·»åŠ ï¼Œstylelintç­‰ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œå°è¯•ã€‚ é™„å½•gitmojis.jsonæ–‡ä»¶åœ°å€","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"ä»£ç è§„èŒƒ","slug":"ä»£ç è§„èŒƒ","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"}]},{"title":"prettier+eslint+commitlinté¡¹ç›®å®è·µ","slug":"blog8","date":"2022-10-28T00:00:00.000Z","updated":"2022-11-27T04:13:15.827Z","comments":false,"path":"2022/10/28/blog8/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/10/28/blog8/","excerpt":"","text":"å›¢é˜Ÿä»£ç é£æ ¼ç»Ÿä¸€ä¸€ç›´æ˜¯åšä¸»æƒ³å¹²åˆæ²¡æœ‰æ—¶é—´å»å¹²çš„äº‹æƒ…ï¼Œåˆšå¥½å€Ÿç€æ–°é¡¹ç›®æ­å»ºï¼Œå°è¯•ä¸€ä¸‹ä½¿ç”¨EslintåŠPrettierå·¥å…·æå‡ä¸€ä¸‹é¡¹ç›®ä»£ç çš„æ•´ä½“è´¨é‡ã€‚æœ¬æ–‡åœ¨é…ç½®æ–¹é¢ä»…åšç®€å•çš„é…ç½®ï¼Œæµç¨‹ç†Ÿæ‚‰å¯ä»¥å‚è€ƒEslintåŠPrettierå®˜æ–¹æ–‡æ¡£å®šåˆ¶è‡ªå·±å–œæ¬¢çš„æ ‡å‡†ã€‚ å®‰è£…EslintåŒ…1npm install eslint -D åˆå§‹åŒ–Eslint1npm init @eslint/config æ‰§è¡Œå‘½ä»¤åä¼šå‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼šï¼ˆå¯ä»¥æŒ‰ç…§å›¾ç‰‡é…ç½®ï¼Œä¹Ÿå¯ä»¥åé¢ç›´æ¥æ›´æ”¹.eslintrc.cjsæ–‡ä»¶ï¼‰å…·ä½“é…ç½®å¯ä»¥ä»¥è‡ªå·±é¡¹ç›®ä¸ºå‡†ï¼Œåšä¸»è¿™é‡Œä½¿ç”¨çš„æ˜¯vite+vue3+jså®‰è£…å®Œæˆä¹‹åé¡¹ç›®çš„æ ¹ç›®å½•ä¼šå‡ºç°.eslintrc.cjsæ–‡ä»¶ 12345678910111213141516171819202122module.exports = &#123; &quot;env&quot;: &#123; &quot;browser&quot;: true, &quot;es2021&quot;: true, &quot;node&quot;: true &#125;, &quot;extends&quot;: [ &quot;eslint:recommended&quot;, &quot;plugin:vue/vue3-essential&quot; ], &quot;overrides&quot;: [ ], &quot;parserOptions&quot;: &#123; &quot;ecmaVersion&quot;: &quot;latest&quot;, &quot;sourceType&quot;: &quot;module&quot; &#125;, &quot;plugins&quot;: [ &quot;vue&quot; ], &quot;rules&quot;: &#123; &#125;&#125; å®‰è£…vite-plugin-eslintåŒ…12// è¯¥åŒ…çš„ä½œç”¨æ˜¯åœ¨viteè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹eslintè§„èŒƒï¼Œæ ¹æ®é…ç½®åœ¨ç»ˆç«¯æ˜¾ç¤ºæœªé€šè¿‡çš„æ ¡éªŒä»£ç npm install vite-plugin-eslint -D å®‰è£…eslint-parser åŠ @babel/core åŒ…123// è¯¥åŒ…çš„ä½œç”¨æ˜¯å…è®¸eslintåœ¨babelè½¬æ¢çš„æºä»£ç ä¸Šè¿è¡Œnpm install @babel/eslint-parser -Dnpm install @babel/core -D å®‰è£…prettierç›¸å…³åŒ…123npm install prettier -Dnpm install eslint-config-prettier -D // eslintå…¼å®¹çš„æ’ä»¶,å°†å…³é—­eslintæ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸Prettierå†²çªçš„è§„åˆ™npm install eslint-plugin-prettier -D // eslintçš„prettier,å°†Prettierä½œä¸ºESLintè§„åˆ™è¿è¡Œï¼Œå¹¶å°†å·®å¼‚ä½œä¸ºå•ä¸ªESLinté—®é¢˜æŠ¥å‘Šã€‚ å®‰è£…vue-eslint-parseråŒ…12// ç”¨äº`.vue`æ–‡ä»¶çš„ESLintè‡ªå®šä¹‰è§£æå™¨ã€‚npm install vue-eslint-parser -D é…ç½®.prettierrc12345678910111213// .prettierrc, é…ç½®ä¸åšè¿‡å¤šè¯´æ˜ï¼Œå…·ä½“å¯æŸ¥é˜…ç›¸å…³æ–‡æ¡£&#123; &quot;printWidth&quot;: 120, &quot;tabWidth&quot;: 2, &quot;useTabs&quot;: false, &quot;semi&quot;: false, &quot;trailingComma&quot;: &quot;none&quot;, &quot;singleQuote&quot;: true, &quot;bracketSpacing&quot;: true, &quot;jsxBracketSameLine&quot;: false, &quot;endOfLine&quot;: &quot;auto&quot;, &quot;arrowParens&quot;: &quot;avoid&quot;&#125; é…ç½®.eslintrc.cjs1234567891011121314151617181920212223242526272829303132333435363738module.exports = &#123; env: &#123; browser: true, es2021: true, node: true &#125;, extends: [ &#x27;eslint:recommended&#x27;, // eslintæ ¸å¿ƒè§„åˆ™ &#x27;plugin:vue/vue3-essential&#x27;, // ç»§æ‰¿eslint-plugin-vueç»„ä»¶ä¸­çš„åŸºç¡€é…ç½® &#x27;plugin:prettier/recommended&#x27;, // ç»§æ‰¿eslint-plugin-prettierç»„ä»¶ä¸­çš„åŸºç¡€é…ç½® &#x27;eslint-config-prettier&#x27; // å¤„ç†é…ç½®å…¼å®¹é—®é¢˜ ], parser: &#x27;vue-eslint-parser&#x27;, // ä½¿ç”¨vueè§£æå™¨ parserOptions: &#123; // è®¾ç½®æ”¯æŒçš„JavaScriptè¯­è¨€é€‰é¡¹ ecmaVersion: &#x27;latest&#x27;, // æŒ‡å®šEcmaScriptçš„ç‰ˆæœ¬ sourceType: &#x27;module&#x27;, // script/module ecmaFeatures: &#123; jsx: true &#125; &#125;, plugins:[ &#x27;vue&#x27;, // eslint-plugin-vueç¼©å†™ &#x27;prettier&#x27; // eslint-plugin-prettierç¼©å†™ ], globals: &#123; // æ·»åŠ å…¨å±€å˜é‡ï¼Œé˜²æ­¢no-undef è§„åˆ™å‘å‡ºè­¦å‘Š defineProps: &#x27;readonly&#x27;, defineEmits: &#x27;readonly&#x27;, defineExpose: &#x27;readonly&#x27;, withDefaults: &#x27;readonly&#x27; &#125;, rules: &#123; &#x27;no-console&#x27;: &#x27;warn&#x27;, &#x27;vue/multi-word-component-names&#x27;: &#x27;off&#x27; // extendsä¸­ç»§æ‰¿è¿‡æ¥çš„å±æ€§ï¼Œå¯ä»¥é‡æ–°ä¿®æ”¹ ... &#125;&#125; VSCodeé…ç½®å®‰è£…ESLintåŠPrettieræ’ä»¶ æ‰“å¼€VSCodeè®¾ç½®&gt;ç”¨æˆ·&gt;æ–‡æœ¬ç¼–è¾‘å™¨&gt;æ ¼å¼åŒ–&gt;å‹¾é€‰Format On Save 2. æœç´¢Prettier&gt;å‹¾é€‰Require Config3.æ‰“å¼€VSCodeè®¾ç½®&gt;ç”¨æˆ·&gt;æ–‡æœ¬ç¼–è¾‘å™¨&gt;Default Formatter&gt;é€‰æ‹©Prettier - Code formatter4.ctr+shift+pæ‰“å¼€é¦–é€‰é¡¹é…ç½®settings.json&gt;æ·»åŠ eslint vueæ”¯æŒ 1234567...&quot;eslint.validate&quot;: [ &quot;javascript&quot;, &quot;javascriptreact&quot;, &quot;vue&quot; ],... ç‰¹åˆ«æé†’ï¼šæ¯æ¬¡ä¿®æ”¹å®ŒEslintåŠPrettieré…ç½®æœ€å¥½é‡æ–°å¯åŠ¨VSCodeï¼Œé˜²æ­¢å‡ºç°é…ç½®ä¸ç”Ÿæ•ˆçš„æƒ…å†µ","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"ä»£ç è§„èŒƒ","slug":"ä»£ç è§„èŒƒ","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"}]},{"title":"Elementç»„ä»¶MessageBoxå‰–æ","slug":"blog7","date":"2022-10-10T00:00:00.000Z","updated":"2022-10-10T11:00:56.172Z","comments":false,"path":"2022/10/10/blog7/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/10/10/blog7/","excerpt":"","text":"å› æœ€è¿‘ä¸šåŠ¡éœ€æ±‚éœ€è¦å®ç°ç±»ä¼¼äºElementä¸­çš„MessageBoxç»„ä»¶çš„æ•ˆæœï¼Œæ‰€ä»¥å°è¯•å°è£…äº†ä¸€ä¸ªç±»ä¼¼çš„å°ç»„ä»¶ï¼Œæœ¬æ–‡ä¸ä»‹ç»å°è£…ï¼Œå› ä¸ºå—åˆ°MessageBoxçš„å¯å‘ï¼Œæ‰€ä»¥é€šè¿‡æºç æ³¨é‡Šçš„æ–¹å¼è¯¦ç»†å‰–æä¸€ä¸‹Elementçš„MessageBoxå®ç°æ€æƒ³ã€‚ åŸºç¡€çŸ¥è¯†Vue.extend(options) å‚æ•°ï¼š{Object} options ç”¨æ³•ï¼šä½¿ç”¨åŸºç¡€ Vue æ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªâ€œå­ç±»â€ã€‚å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šdata é€‰é¡¹æ˜¯ç‰¹ä¾‹ï¼Œéœ€è¦æ³¨æ„ - åœ¨ Vue.extend() ä¸­å®ƒå¿…é¡»æ˜¯å‡½æ•° 1&lt;div id=&quot;mount-point&quot;&gt;&lt;/div&gt; 12345678910111213// åˆ›å»ºæ„é€ å™¨var Profile = Vue.extend(&#123; template: &#x27;&lt;p&gt;&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125; aka &#123;&#123;alias&#125;&#125;&lt;/p&gt;&#x27;, data: function () &#123; return &#123; firstName: &#x27;Walter&#x27;, lastName: &#x27;White&#x27;, alias: &#x27;Heisenberg&#x27; &#125; &#125;&#125;)// åˆ›å»º Profile å®ä¾‹ï¼Œå¹¶æŒ‚è½½åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚new Profile().$mount(&#x27;#mount-point&#x27;) ç»“æœï¼š 1&lt;p&gt;Walter White aka Heisenberg&lt;/p&gt; ä¸ºä»€ä¹ˆè¦ä»‹ç»Vue.extend(options)ï¼Œå› ä¸ºElementä¸­MessageBoxçš„ä½¿ç”¨æ–¹å¼ä¸ºå‡½æ•°å¼è°ƒç”¨ ï¼ˆthis.$confirm()ï¼‰çš„å½¢å¼ï¼Œä»¥è¿™ç§å½¢å¼è°ƒç”¨ç»„ä»¶å°±ä¸èƒ½æŒ‰ç…§å¸¸è§„çš„ç»„ä»¶å¼•å…¥æ³¨å†Œçš„å½¢å¼å»è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡Vue.extend(options)åˆ›å»ºä¸€ä¸ªvueå­ç±»å†é€šè¿‡å‡½æ•°æš´éœ²å‡ºå»çš„æ–¹å¼å®ç°å‡½æ•°å¼è°ƒç”¨ã€‚ Element MessageBox æºç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174// main.js ä»…ä»‹ç»ä¸»è¦éƒ¨åˆ†ä»£ç ...import Vue from &#x27;vue&#x27;;// å¼•å…¥æ¨¡æ¿æ–‡ä»¶import msgboxVue from &#x27;./main.vue&#x27;; // elementåˆå¹¶å¯¹è±¡çš„å·¥å…·å‡½æ•°ï¼Œä»£ç æ¯”è¾ƒç®€å•å¯ä»¥è‡ªè¡ŒæŸ¥é˜…import merge from &#x27;element-ui/src/utils/merge&#x27;; import &#123; isVNode &#125; from &#x27;element-ui/src/utils/vdom&#x27;;// åˆ›å»ºä¸€ä¸ªæ–°çš„vueæ„é€ å™¨ï¼Œæ„é€ å™¨å¯ä»¥æ‰‹åŠ¨æŒ‚è½½åˆ°ä¸€ä¸ªæ–°çš„Domä¸Šconst MessageBoxConstructor = Vue.extend(msgboxVue);let currentMsg, instance;let msgQueue = [];// åˆ›å»ºä¸€ä¸ªæ–°çš„vueå­å®ä¾‹const initInstance = () =&gt; &#123; instance = new MessageBoxConstructor(&#123; el: document.createElement(&#x27;div&#x27;) &#125;); // ç»™å®ä¾‹æ·»åŠ callbackå¯¹è±¡ï¼Œåé¢ä¼šåˆ†æåˆ° instance.callback = defaultCallback;&#125;;// defaultCallbackå¤„ç†äº†ä¸¤ç§å½¢å¼çš„å›è°ƒæ–¹å¼// 1.å¯ä»¥æ‰‹åŠ¨ä¼ å…¥ä¸€ä¸ªcallbackå‡½æ•°// 2.ä½¿ç”¨é»˜è®¤çš„promiseæ–¹å¼const defaultCallback = action =&gt; &#123; if (currentMsg) &#123; let callback = currentMsg.callback; // å¤„ç†ä¼ å…¥å›è°ƒå‡½æ•°æƒ…å†µ if (typeof callback === &#x27;function&#x27;) &#123; // showInputåŒºåˆ†æ˜¯å¦ä¸ºè¾“å…¥æ¡†MessageBox if (instance.showInput) &#123; callback(instance.inputValue, action); &#125; else &#123; callback(action, instance); &#125; &#125; // å¤„ç†promiseæƒ…å†µ if (currentMsg.resolve) &#123; if (action === &#x27;confirm&#x27;) &#123; if (instance.showInput) &#123; currentMsg.resolve(&#123; value: instance.inputValue, action &#125;); &#125; else &#123; currentMsg.resolve(action); &#125; &#125; else if (currentMsg.reject &amp;&amp; (action === &#x27;cancel&#x27; || action === &#x27;close&#x27;)) &#123; currentMsg.reject(action); &#125; &#125; &#125;&#125;;const showNextMsg = () =&gt; &#123; if (!instance) &#123; initInstance(); &#125; instance.action = &#x27;&#x27;; if (!instance.visible || instance.closeTimer) &#123; if (msgQueue.length &gt; 0) &#123; // é¡ºåºæ‰§è¡ŒmsgQueueä¸­çš„currentMsg currentMsg = msgQueue.shift(); // currentMsgå†…å®¹å¦‚ä¸‹: // &#123; // options: merge(&#123;&#125;, defaults, MessageBox.defaults, options), // callback: callback, // resolve: resolve, // reject: reject // &#125; let options = currentMsg.options; // å°†å‚æ•°æŒ‚è½½åˆ°æ–°åˆ›å»ºçš„å®ä¾‹dataä¸Š for (let prop in options) &#123; if (options.hasOwnProperty(prop)) &#123; // å®ä¾‹å‚æ•°ä¿®æ”¹ instance[prop] = options[prop]; &#125; &#125; // å¦‚æœoptionsæ²¡ä¼ å…¥callbackå°†é»˜è®¤çš„callbackèµ‹å€¼ç»™å®ä¾‹çš„callback if (options.callback === undefined) &#123; // å½“optionsé‡Œé¢æœ‰callbackä¼ å…¥ï¼Œæ­£å¸¸è¾“å‡ºã€‚ // å½“optionsé‡Œé¢æ²¡æœ‰callback,instance.callbackä½¿ç”¨defaultCallback instance.callback = defaultCallback; &#125; // å†æ¬¡å°è£…callback let oldCb = instance.callback; instance.callback = (action, instance) =&gt; &#123; oldCb(action, instance); showNextMsg(); &#125;; // åˆ¤æ–­messageæ˜¯å¦ä¼ å…¥çš„æ˜¯Htmlç‰‡æ®µ,å¦‚æœæ˜¯Htmlç‰‡æ®µæ·»åŠ åˆ°slot if (isVNode(instance.message)) &#123; instance.$slots.default = [instance.message]; instance.message = null; &#125; else &#123; delete instance.$slots.default; &#125; // å°†æŸäº›ç‰¹å®šçš„å‚æ•°è®¾å®šåˆå§‹å€¼ [&#x27;modal&#x27;, &#x27;showClose&#x27;, &#x27;closeOnClickModal&#x27;, &#x27;closeOnPressEscape&#x27;, &#x27;closeOnHashChange&#x27;].forEach(prop =&gt; &#123; if (instance[prop] === undefined) &#123; instance[prop] = true; &#125; &#125;); // æ³¨æ„messageæ˜¯æŒ‚è½½åˆ°bodyä¸Š document.body.appendChild(instance.$el); // æ§åˆ¶å¼¹çª—å‡ºç° Vue.nextTick(() =&gt; &#123; instance.visible = true; &#125;); &#125; &#125;&#125;;const MessageBox = function(options, callback) &#123; if (Vue.prototype.$isServer) return; if (typeof options === &#x27;string&#x27; || isVNode(options)) &#123; // å½“optionså‚æ•°ä¸ºå­—ç¬¦ä¸² this.$msgbox(&#x27;xxx&#x27;)æƒ…å†µä¸‹é»˜è®¤è®¾ç½®messageå­—æ®µ options = &#123; message: options &#125;; // è‹¥æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šå‚æ•°åˆ¤æ–­ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ä¸ºå­—ç¬¦ä¸²èµ‹å€¼ç»™title if (typeof arguments[1] === &#x27;string&#x27;) &#123; options.title = arguments[1]; &#125; &#125; else if (options.callback &amp;&amp; !callback) &#123; // å‚æ•°ä¸ºå¯¹è±¡ä¸”å¯¹è±¡æœ‰callbackå­—æ®µæ—¶ å°†callbackèµ‹å€¼ç»™callback callback = options.callback; &#125; // å…¼å®¹ä¸æ”¯æŒPromiseæƒ…å†µ if (typeof Promise !== &#x27;undefined&#x27;) &#123; return new Promise((resolve, reject) =&gt; &#123; // eslint-disable-line msgQueue.push(&#123; options: merge(&#123;&#125;, defaults, MessageBox.defaults, options), callback: callback, resolve: resolve, reject: reject &#125;); showNextMsg(); &#125;); &#125; else &#123; msgQueue.push(&#123; options: merge(&#123;&#125;, defaults, MessageBox.defaults, options), callback: callback &#125;); showNextMsg(); &#125;&#125;; // ä½¿ç”¨æ–¹å¼1: // this.$msgbox(&#123;title:&#x27;æµ‹è¯•&#x27;,message:&#x27;æµ‹è¯•&#x27;,callback:(action,instance)=&gt;&#123; // console.log(action) //confirm // console.log(instance) //vueå®ä¾‹ // &#125;&#125;) // ä½¿ç”¨æ–¹å¼2: // this.$msgbox(&#123;title:&#x27;æµ‹è¯•&#x27;,message:&#x27;æµ‹è¯•&#x27;&#125;,(action,instance)=&gt;&#123; // console.log(action) //confirm // console.log(instance) //undefined // &#125;)...// æš´éœ²MessageBoxæ–¹æ³•export default MessageBox;export &#123; MessageBox &#125;; å¯ä»¥çœ‹å‡ºMessageç»„ä»¶ä¸»è¦çš„ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªæ˜¯MessageBoxï¼Œä¸€ä¸ªæ˜¯showNextMsgï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¸»è¦åŠŸèƒ½ä¸€ä¸ªæ˜¯æ·»åŠ æ–°çš„messageå¯¹è±¡ä¸€ä¸ªæ˜¯è®¾ç½®å®ä¾‹å‚æ•°ï¼Œé™¤äº†callbackçš„ç†è§£æœ‰äº›å¤æ‚å¤–å…¶ä»–çš„ä»£ç ç†è§£åº”è¯¥ä¸éš¾ã€‚è‡³äºmain.vueæ–‡ä»¶å°±æ˜¯æ™®é€šçš„vueæ–‡ä»¶ä¸å†èµ˜è¿°ã€‚ ç®€å•å®ç°MessageBoxç»„ä»¶æºç ","categories":[{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Element","slug":"Element","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/Element/"}]},{"title":"Linuxå¸¸è§å‘½ä»¤æ€»ç»“","slug":"blog6","date":"2022-08-26T16:00:00.000Z","updated":"2022-08-27T09:43:39.955Z","comments":false,"path":"2022/08/27/blog6/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/08/27/blog6/","excerpt":"","text":"æ€»ç»“ä¸€ä¸‹å¸¸è§Linuxæ“ä½œå‘½ä»¤ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ ç›®å½•ä¸æ–‡ä»¶ç›¸å…³1234567891011pwd //æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•mkdir &#x27;dir&#x27; //åˆ›å»ºå·¥ä½œç›®å½•rmdir &#x27;dir&#x27; //åˆ é™¤å·¥ä½œç›®å½•cd &#x27;dir&#x27; //è¿›å…¥æ–‡ä»¶å¤¹cd .. //è¿”å›ä¸Šå±‚ç›®å½•touch &#x27;file&#x27; //åˆ›å»ºæ–‡ä»¶rm -rf &#x27;file/dir&#x27; //åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ls //åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ls -a //æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶(åŒ…æ‹¬éšè—æ–‡ä»¶)ls -l //è¯¦ç»†æ˜¾ç¤ºls -m //é€—å·åˆ†éš”æ˜¾ç¤º æ–‡ä»¶å†…å®¹æ˜¾ç¤º12cat &gt; &#x27;file&#x27; //åˆ›å»ºæ–‡ä»¶å¹¶ç¼–è¾‘å†…å®¹ï¼ˆctr+Dç»“æŸç¼–è¾‘ï¼‰cat -n &#x27;file&#x27; //æŸ¥çœ‹æ–‡ä»¶ viç¼–è¾‘å™¨12345vi [path/file] //æ‰“å¼€ç¼–è¾‘å™¨i //è¿›å…¥ç¼–è¾‘æ¨¡å¼esc //è¿›å…¥å‘½ä»¤æ¨¡å¼:wq //ä¿å­˜å¹¶æ¨å‡º:q! //é€€å‡ºä¸ä¿å­˜ å…¶ä»–å‘½ä»¤1234clear //æ¸…é™¤å±å¹•ä¿¡æ¯date //æ˜¾ç¤ºå½“å‰æ—¥æœŸps //æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹last //æ˜¾ç¤ºæœ€è¿‘ç™»é™†ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯","categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/Linux/"}]},{"title":"H5åœ¨IOSå¾®ä¿¡webviewä¸­æ— æ³•æ ¡éªŒè§†é¢‘æ—¶é•¿é—®é¢˜","slug":"blog5","date":"2022-07-30T16:00:00.000Z","updated":"2022-07-31T11:56:48.542Z","comments":false,"path":"2022/07/31/blog5/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2022/07/31/blog5/","excerpt":"","text":"å› ä¸šåŠ¡éœ€æ±‚éœ€è¦ä¸€ä¸ªå›¾ç‰‡è§†é¢‘æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œéœ€æ”¯æŒä¸»æµæµè§ˆå™¨åŠå¾®ä¿¡é’‰é’‰å†…ç½®æµè§ˆå™¨ï¼Œé‚è€ƒè™‘ç”¨ä¸€ä¸ªç®€å•çš„H5é¡µé¢åšä¸Šä¼ å®¢æˆ·ç«¯ã€‚è§†é¢‘ä¸Šä¼ å› ä¸ºè¦æ§åˆ¶è§†é¢‘é•¿åº¦ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­éƒ½æ ¡éªŒé€šè¿‡ï¼Œä½†æ˜¯åœ¨å¾®ä¿¡ä¸­å´å‡ºäº†é—®é¢˜ 123456789101112131415161718192021222324const beforeRead = (file)=&gt; &#123; return new Promise((resolve,reject)=&gt;&#123; if(props.type == &#x27;video&#x27;)&#123; let url = URL.createObjectURL(file) let audioElement = new Audio(url) audioElement.addEventListener(&quot;loadedmetadata&quot;, ()=&gt;&#123; let audioDuration = audioElement.duration; if(audioDuration&gt;60)&#123; Toast(`ä»…æ”¯æŒä¸Šä¼ 1åˆ†é’Ÿæ—¶é•¿ä»¥å†…è§†é¢‘`) reject() &#125;else&#123; resolve(file) &#125; &#125;) &#125;else&#123; if (![&#x27;image/jpeg&#x27;,&#x27;image/png&#x27;].includes(file.type)) &#123; Toast(&#x27;æ‰€é€‰æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ&#x27;); reject() &#125;else&#123; resolve(file) &#125; &#125; &#125;) &#125; é—®é¢˜åŸå› ï¼šIOSå¾®ä¿¡æµè§ˆå™¨éœ€è¦æ’­æ”¾è§†é¢‘æ‰èƒ½é€šè¿‡ç›‘å¬loadedmetadataäº‹ä»¶è·å–è§†é¢‘é•¿åº¦ï¼Œä»¥ä¸‹æ˜¯è§£å†³åŠæ³•ï¼š 12345678910111213141516171819202122232425262728const beforeRead = (file)=&gt; &#123; return new Promise((resolve,reject)=&gt;&#123; if(props.type == &#x27;video&#x27;)&#123; let url = URL.createObjectURL(file) let audioElement = new Audio(url) audioElement.muted = true audioElement.play().then(()=&gt;audioElement.pause()) audioElement.addEventListener(&quot;loadedmetadata&quot;, ()=&gt;&#123; let audioDuration = audioElement.duration; if(audioDuration&gt;60)&#123; audioElement.muted = false Toast(`ä»…æ”¯æŒä¸Šä¼ 1åˆ†é’Ÿæ—¶é•¿ä»¥å†…è§†é¢‘`) reject() &#125;else&#123; audioElement.muted = false resolve(file) &#125; &#125;) &#125;else&#123; if (![&#x27;image/jpeg&#x27;,&#x27;image/png&#x27;].includes(file.type)) &#123; Toast(&#x27;æ‰€é€‰æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ&#x27;); reject() &#125;else&#123; resolve(file) &#125; &#125; &#125;) &#125; H5é¡µé¢vue3.0+vantï¼Œå‚è§uploadç»„ä»¶ä¸å†èµ˜è¿°ï¼","categories":[{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"}],"tags":[{"name":"vue-3","slug":"vue-3","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-3/"}]},{"title":"Taroå°ç¨‹åºæ·»åŠ Echartsä»£ç åŒ…è¿‡å¤§è§£å†³åŠæ³•","slug":"blog4","date":"2021-10-19T00:00:00.000Z","updated":"2022-10-10T11:00:56.172Z","comments":false,"path":"2021/10/19/blog4/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2021/10/19/blog4/","excerpt":"","text":"ä¸Šå›ä¹¦è¯´åˆ°å¦‚ä½•åœ¨Taroå°ç¨‹åºä¸­å¼•å…¥Echartså›¾è¡¨ã€‚å¦‚æœå°ç¨‹åºä¸»åŒ…ä»£ç ä½“é‡ä¸å¤šå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœå°ç¨‹åºä»£ç ä½“é‡å¤§ï¼Œç¨ä¸ç•™ç¥å°±ä¼šå¯¼è‡´ä¸»åŒ…ä»£ç è¶…è¿‡2Mï¼Œæ— æ³•é¢„è§ˆä¹Ÿæ— æ³•çœŸæœºè°ƒè¯•ã€‚æœ¬æ–‡ç€é‡ä»‹ç»ä¸€ä¸‹Taroå¼•å…¥Echartsåˆ†åŒ…æ“ä½œä»¥åŠæ³¨æ„äº‹é¡¹ã€‚ å‰æ–‡é“¾æ¥ï¼Œå®Œæ•´æµç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜… taroå°ç¨‹åºæ·»åŠ Echartså®è·µåˆ†åŒ…æ“ä½œï¼š å°†ä¸echartsç»„ä»¶ç›¸å…³éƒ½ç§»åˆ°åˆ†åŒ…ä¸­ï¼Œç»“æ„ç›®å½•å¦‚ä¸‹ é…ç½®app.config.js 12345678910...subpackages: [ &#123; root: &quot;subpages&quot;, pages: [ &#x27;test/index&#x27; ] &#125; ],... é…ç½®config/index å¯¼è‡´åŒ…æ–‡ä»¶è¿‡å¤§çš„â€œç½ªé­ç¥¸é¦–â€å°±æ˜¯ec-canvasæ–‡ä»¶å¤¹ä¸‹çš„echarts.jsæ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåˆ†åŒ…ä½¿ç”¨Echartsç»„ä»¶ä¸èƒ½å°†echarts.jsæ‰“åŒ…åˆ°ä¸»åŒ…çš„common.jsé‡Œé¢ã€‚Taroæœºåˆ¶è®¤ä¸ºä¸€ä¸ªjsæ–‡ä»¶è¢«å¤šä¸ªæ¨¡å—ä¾èµ–ä¼šå°†è¯¥jsæŠ½ç¦»åˆ°common.jsã€‚è™½ç„¶æˆ‘ä»¬å…³äºEchartsç›¸å…³çš„æ–‡ä»¶éƒ½æ”¾åœ¨subpagesé‡Œé¢ï¼Œä½†æ˜¯å¦‚æœå¼•ç”¨å¤šæ¬¡è¿˜æ˜¯ä¼šæŠ½ç¦»åˆ°ä¸»åŒ…common.jsã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨splitChunkså°†Echartséƒ¨åˆ†å•ç‹¬æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨addChunkPages å¾€é¡µé¢æ³¨å…¥ä¾èµ–ã€‚ 12345678910111213141516171819202122232425262728293031// config/index.jsmini: &#123; compile: &#123; exclude: [ // è·³è¿‡ç¼–è¯‘ path.resolve(__dirname, &#x27;..&#x27;, &#x27;src/subpages/components/ec-canvas/echarts.js&#x27;) ] &#125;, addChunkPages (pages) &#123; pages.set(&#x27;subpages/test/index&#x27;, [&#x27;subpages/common&#x27;]) &#125;, webpackChain (chain) &#123; chain.merge(&#123; optimization: &#123; splitChunks: &#123; cacheGroups: &#123; subpackagesCommon: &#123; name: &#x27;subpages/common&#x27;, minChunks: 2, test: (module,chunks) =&gt; &#123; const isNoOnlySubpackRequired = chunks.find(chunk =&gt; !(/\\bsubpages\\b/.test(chunk.name))) return !isNoOnlySubpackRequired &#125;, priority: 200 &#125; &#125; &#125; &#125; &#125;) &#125; &#125; è‡³æ­¤å¯ä»¥çœ‹åˆ°æ‰“åŒ…æ•ˆæœï¼š é¡µé¢å¼•ç”¨å‚è€ƒå‰æ–‡é¡µé¢ä½¿ç”¨ã€‚æ­¤æ—¶å¦‚æœæˆ‘ä»¬è¿è¡Œä»£ç ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šæ³¨æ„è¿™ä¸ªé”™è¯¯ï¼æç¤ºæ‰¾ä¸åˆ°ec-canvasç»„ä»¶ã€‚æ³¨æ„ç¼–è¯‘åçš„ç»„ä»¶ec-canvas.jså› ä¸ºä¹‹å‰æŠ½ç¦»äº†echarts.jsï¼Œç°åœ¨å·²ç»æ— æ³•å¼•å…¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç¼–è¯‘åçš„æ–‡ä»¶ä¸­å¼•å…¥subpagesé‡Œé¢çš„common.jsã€‚ æ·»åŠ å¼•å…¥plugin(ä»£ç å¾ˆç®€å•ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶) 123456789101112131415161718/* eslint-disable import/no-commonjs *//* è§£å†³chunkåŒ…æ²¡æœ‰å¼•ç”¨èµ„æºçš„é—®é¢˜**/const fs = require(&#x27;fs&#x27;);const path = require(&quot;path&quot;);module.exports.default = module.exports = (ctx, options) =&gt; &#123; ctx.onBuildFinish(() =&gt; &#123; const chunkRequireArray = options.chunkRequireArray for(let i in chunkRequireArray)&#123; const unitData = chunkRequireArray[i]; const target = path.join(ctx.paths.outputPath, unitData.fileDistPath); const data = fs.readFileSync(target, &#x27;utf8&#x27;); fs.writeFileSync(target, `$&#123;unitData.prependContent&#125;;$&#123;data&#125;`) &#125; &#125;)&#125; é…ç½®config/index.js 12345678910111213plugins: [ [ path.resolve(__dirname, &#x27;..&#x27;, &#x27;plugin/chunkCacheRequirePlugin&#x27;), &#123; chunkRequireArray:[ //å¯é…ç½®å¤šä¸ªç›®æ ‡å¼•å…¥æ–‡ä»¶ &#123; fileDistPath: &#x27;subpages/components/ec-canvas/ec-canvas.js&#x27;, prependContent: &#x27;require(&quot;../../common&quot;);&#x27; &#125; ] &#125; ] ], é‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†ï¼š","categories":[{"name":"taro","slug":"taro","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/taro/"}],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]},{"title":"Taroå°ç¨‹åºå¼•å…¥Echartsæ•™ç¨‹","slug":"blog3","date":"2021-10-18T00:00:00.000Z","updated":"2022-07-31T11:43:24.895Z","comments":false,"path":"2021/10/18/blog3/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2021/10/18/blog3/","excerpt":"","text":"å°ç¨‹åºéœ€è¦æ·»åŠ ç®€å•çš„æ•°æ®ç»Ÿè®¡åŠŸèƒ½ã€‚å› ä¸ºå¯¹Echatsæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰€ä»¥æƒ³å°†Echatså¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæœ‰å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼Œè®°å½•ä¸€ä¸‹ã€‚ taroç‰ˆæœ¬ï¼š3.3.2ï¼ˆæ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼‰,å®˜æ–¹ç‰©æ–™ä»“åº“é‡Œé¢çš„Echartså¤§å¤šä¸å…¼å®¹æœ€æ–°ç‰ˆæœ¬taroæ¡†æ¶ï¼Œä½†æ˜¯å®ç°çš„æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¤§è‡´è¯´ä¸€ä¸‹ï¼š å‡†å¤‡å·¥ä½œ ä¸‹è½½Echartså®˜æ–¹çš„å°ç¨‹åºæ’ä»¶echarts-for-weixin ä¼ é€é—¨ å°†é¡¹ç›®ä¸­çš„ec-canvasæ–‡ä»¶å¤¹å¤åˆ¶ä¿å­˜ å»Echartså®˜ç½‘å®šåˆ¶å›¾è¡¨(ä¸å»ºè®®å…¨éƒ¨ä¸‹è½½ï¼Œæ–‡ä»¶å¤ªå¤§ï¼Œå°ç¨‹åºä½“ç§¯å¤§éœ€è¦åˆ†åŒ…) ä¼ é€é—¨ å‹ç¼©echarts.jsæ–‡ä»¶(å‹ç¼©æ–¹æ³•å¯ä»¥è‡ªè¡Œæ‰¾çº¿ä¸Šå‹ç¼©ç½‘ç«™æˆ–è‡ªè¡Œå‹ç¼©ï¼Œæ–¹æ³•é™„åæ–‡ï¼‰ æ›¿æ¢ec-canvasæ–‡ä»¶ä¸­çš„echarts.jsæ–‡ä»¶ æœ¬åœ°å‹ç¼©æ–¹æ³• 12npm install uglify-js -guglifyjs echarts.js -m -o echarts.min.js //æ³¨æ„ï¼šæ›¿æ¢ec-canvasé‡Œé¢çš„æ–‡ä»¶æ—¶å°†echarts.min.jsæ¢å›æ¥ å°ç¨‹åºå°è£…å›¾è¡¨ç»„ä»¶(ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465// æŸ±çŠ¶å›¾import &#123; Component &#125; from &quot;react&quot;;import &#123; View &#125; from &quot;@tarojs/components&quot;;import &#123; getCurrentInstance &#125; from &quot;@tarojs/taro&quot; //Taro3.xéœ€è¦ä½¿ç”¨getCurrentInstance è·å–é¡µé¢DOMimport &#x27;./index.scss&#x27;function setChartData(chart)&#123; const defautOption = &#123; xAxis: &#123; type: &quot;category&quot;, data: [&quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;], &#125;, yAxis: &#123; type: &quot;value&quot;, &#125;, series: [ &#123; data: [120, 200, 150, 80, 70, 110, 130], type: &quot;bar&quot;, showBackground: true, backgroundStyle: &#123; color: &quot;rgba(220, 220, 220, 0.8)&quot;, &#125;, &#125;, ], &#125;; chart.setOption(defautOption);&#125;export default class BarChart extends Component &#123; constructor(props) &#123; super(props) this.state = &#123; ec: &#123; lazyLoad: true &#125; &#125; &#125; componentDidMount() &#123; &#125; refresh(data) &#123; getCurrentInstance().page.selectComponent(&#x27;#mychart-area&#x27;).init((canvas, width, height) =&gt; &#123; const chart = echarts.init(canvas, null, &#123; width: width, height: height &#125;); setChartData(chart, data); return chart; &#125;); &#125; render() &#123; return ( &lt;View className=&#x27;bar-chart&#x27;&gt; &lt;ec-canvas id=&#x27;mychart-area&#x27; canvasId=&#x27;mychart-area&#x27; ec=&#123;this.state.ec&#125; /&gt; &lt;/View&gt; ); &#125;&#125; é¡µé¢ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738import React, &#123; Component &#125; from &#x27;react&#x27;import &#123; View &#125; from &#x27;@tarojs/components&#x27;import BarChart from &#x27;@/components/barChart&#x27;import &#x27;./index.scss&#x27;export default class Index extends Component &#123; constructor (props) &#123; super(props) this.barChart = React.createRef() this.state = &#123; &#125; &#125; componentWillMount () &#123; &#125; componentDidMount () &#123; // å»¶è¿Ÿè°ƒç”¨ï¼Œç¡®ä¿ ec-canvas èŠ‚ç‚¹å·²å­˜åœ¨ setTimeout(() =&gt; &#123; this.barChart.current.refresh() &#125;, 100) &#125; componentWillUnmount () &#123; &#125; componentDidShow () &#123; &#125; componentDidHide () &#123; &#125; render () &#123; return ( &lt;View className=&#x27;selfstudy-container&#x27;&gt; &lt;BarChart ref=&#123;this.barChart&#125; /&gt; &lt;/View&gt; ) &#125;&#125; â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è‡³æ­¤å›¾è¡¨å¼•å…¥å·²å®Œæˆ90%â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-ç›´æ¥é¡µé¢ä½¿ç”¨çš„è¯ä¼šæŠ¥ä¸¤ä¸ªé”™è¯¯ï¼š echarts is not definedã€‚ï¼ˆæ²¡æœ‰æ‹¿åˆ°ec-canvasé¡µé¢å®ä¾‹ï¼‰ è§£å†³æ–¹æ³•ï¼šåœ¨ app æˆ–é¡µé¢é…ç½®æ–‡ä»¶ä¸­é…ç½® usingComponents å±æ€§ã€‚ 12345678export default &#123; usingComponents: &#123; // å®šä¹‰éœ€è¦å¼•å…¥çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ // 1. key å€¼æŒ‡å®šç¬¬ä¸‰æ–¹ç»„ä»¶åå­—ï¼Œä»¥å°å†™å¼€å¤´ // 2. value å€¼æŒ‡å®šç¬¬ä¸‰æ–¹ç»„ä»¶ js æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ &#x27;ec-canvas&#x27;: &#x27;../../components/ec-canvas/ec-canvas&#x27; &#125;&#125; æ³¨æ„ï¼šTaro3 çš„ç»„ä»¶æ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶çš„ï¼Œå› æ­¤ usingComponents å¿…é¡»é…ç½®åœ¨â€œé¡µé¢â€çš„é…ç½®æ–‡ä»¶ä¸­ã€‚2. t.addEventListener is not a function è§£å†³æ–¹æ³•ï¼šåœ¨ ec-canvasæ–‡ä»¶å¤¹ä¸‹é¢çš„wx-canvas.jsæ–‡ä»¶æ·»åŠ ä»£ç ï¼š 123456789101112131415161718192021222324252627export default class WxCanvas &#123; constructor(ctx, canvasId, isNew, canvasNode) &#123; this.ctx = ctx; this.canvasId = canvasId; this.chart = null; this.isNew = isNew if (isNew) &#123; this.canvasNode = canvasNode; &#125; else &#123; this._initStyle(ctx); &#125; // this._initCanvas(zrender, ctx); this._initEvent(); &#125; // æ–°å¢ç©ºå‡½æ•°ï¼Œä¿®å¤è°ƒç”¨ echarts.init æ—¶æŠ¥é”™ addEventListener () &#123;&#125; getContext(contextType) &#123; if (contextType === &#x27;2d&#x27;) &#123; return this.ctx; &#125; &#125;&#125;","categories":[{"name":"taro","slug":"taro","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/taro/"}],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]},{"title":"Taroå°ç¨‹åºåˆ†äº«","slug":"blog2","date":"2020-04-03T00:00:00.000Z","updated":"2022-07-31T11:43:24.894Z","comments":false,"path":"2020/04/03/blog2/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2020/04/03/blog2/","excerpt":"","text":"åœ¨å¼€å‘å°ç¨‹åºçš„æ—¶å€™é‡åˆ°è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®åˆ†äº«å¡ç‰‡åˆ°å¥½å‹çš„éœ€æ±‚ï¼Œç”±äºå°ç¨‹åºçš„åˆ†äº«åªæœ‰åœ¨é¡µé¢ js ä¸­å®šä¹‰äº† onShareAppMessage(Object)æ–¹æ³•æ‰ä¼šå‡ºç°å³ä¸Šè§’çš„åˆ†äº«æŒ‰é’®,æ‰€ä»¥éœ€è¦åœ¨é¡µé¢ä¸­è‡ªå®šä¹‰åˆ†äº«æ–¹æ³•ã€‚å…·ä½“è§ä¸‹ï¼š object å‚æ•° onShareAppMessage(Object)äº‹ä»¶éœ€è¦è¿”å›ä¸€ä¸ª Object å¯¹è±¡å¯¹è±¡é‡Œé¢åŒ…å«è¦åˆ†äº«çš„æ ‡é¢˜ï¼Œè½¬å‘çš„è·¯å¾„ï¼Œä»¥åŠè‡ªå®šä¹‰å›¾ç‰‡çš„è·¯å¾„ã€‚å®Œæˆäº†è¿™ä¸€ç³»åˆ—æ“ä½œå°±å¯ä»¥æ„‰å¿«çš„å»åˆ†äº«å¾®ä¿¡å°ç¨‹åºçš„é¡µé¢äº†ã€‚ 1234567891011121314151617// åœ¨é¡µé¢ä¸­ä½¿ç”¨import Taro, &#123; Component &#125; from &quot;@tarojs/taro&quot;;import &#123; View &#125; from &quot;@tarojs/components&quot;;class index extends Component &#123; onShareAppMessage() &#123; return &#123; title: &quot;è‡ªå®šä¹‰æ ‡é¢˜&quot;, path: &quot;/page/user?id=123&quot;, // è‡ªå®šä¹‰çš„åˆ†äº«è·¯å¾„ï¼Œç‚¹å‡»åˆ†äº«çš„å¡ç‰‡ä¹‹åä¼šè·³è½¬è¿™é‡Œå®šä¹‰çš„è·¯ç”± imageUrl: &quot;&quot;, // å›¾ç‰‡è·¯å¾„ &#125;; &#125; render() &#123; return &lt;View&gt;å¾®ä¿¡åˆ†äº«&lt;/View&gt;; &#125;&#125;export default index; è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®äº‹ä»¶çš„å®ç°ã€‚æœ‰æ—¶å€™ï¼Œåœ¨å¤§å¤šæ•°çš„ä¸šåŠ¡åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸­ç‚¹å‡»æŸä¸ªæŒ‰é’®è§¦å‘åˆ†äº«çš„äº‹ä»¶ï¼Œæ­¤æ—¶éœ€è¦ç›‘å¬ç”¨æˆ·ç‚¹å‡»é¡µé¢å†…è½¬å‘æŒ‰é’®ï¼ˆButton ç»„ä»¶ openType=â€™shareâ€™ï¼‰å°±ä¼šè‡ªåŠ¨è§¦å‘ onShareAppMessage æ–¹æ³•ã€‚å¦‚æœéœ€è¦åœ¨ button ä¸­æºå¸¦ä¿¡æ¯ï¼Œéœ€è¦è‡ªå®šä¹‰ button å±æ€§ï¼Œé€šè¿‡ res.target.dataset è·å–ã€‚ 1234567891011121314151617181920212223242526272829303132// åœ¨é¡µé¢ä¸­ä½¿ç”¨import Taro, &#123; Component &#125; from &quot;@tarojs/taro&quot;;import &#123; View &#125; from &quot;@tarojs/components&quot;;class index extends Component &#123; onShareAppMessage(res) &#123; if (res.from === &quot;button&quot;) &#123; const &#123; share = &#123;&#125; &#125; = res.target.dataset; return &#123; title: `è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®$&#123;share.title&#125;`, path: `/pages/bill/index`, imageUrl: &quot;&quot;, &#125;; &#125; else &#123; return &#123; title: &quot;å³ä¸Šè§’åˆ†äº«äº‹ä»¶&quot;, path: `/pages/bill/index`, imageUrl: &quot;&quot;, &#125;; &#125; &#125; render() &#123; return ( &lt;View&gt; &lt;Button open-type=&quot;share&quot; data-share=&#123;data&#125;&gt; ç‚¹å‡»åˆ†äº« &lt;/Button&gt; &lt;/View&gt; ); &#125;&#125;export default index; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒonShareAppMessage ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œå¦‚æœæœ‰éœ€æ±‚æ˜¯å…ˆè¯·æ±‚æ¥å£çš„æ•°æ®å†åˆ†äº«ä¼šå› ä¸ºæ‹¿ä¸åˆ°æ•°æ®å¯¼è‡´åˆ†äº«ä¿¡æ¯ä¸æ­£ç¡®çš„é”™è¯¯ã€‚","categories":[{"name":"taro","slug":"taro","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/taro/"}],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]},{"title":"vue ä½¿ç”¨é«˜å¾·åœ°å›¾ Api è·å–å½“å‰ç»çº¬åº¦ä¿¡æ¯","slug":"blog1","date":"2020-04-02T00:00:00.000Z","updated":"2022-07-31T11:43:24.894Z","comments":false,"path":"2020/04/02/blog1/","link":"","permalink":"https://ovyvo.github.io/yanblog.github.io/2020/04/02/blog1/","excerpt":"","text":"åœ¨ utils é‡Œé¢æ–°å»º getLocation.js å°è£…è·å–ç»çº¬åº¦çš„å…¬ç”¨æ–¹æ³•(ä¼˜åŒ–åŠ è½½é€Ÿåº¦åŠ¨æ€ cdn å¼•å…¥é«˜å¾·åœ°å›¾) ç”±äºé«˜å¾· Api æ–¹æ³•è·å–å½“å‰ç»çº¬åº¦æ¯”è¾ƒæ…¢ï¼Œå¦‚æœéœ€æ±‚æ˜¯åœ¨è·å–åˆ°å½“å‰ç»çº¬åº¦æ•°æ®ä¹‹åè¯·æ±‚ä¸€äº›æ•°æ®ï¼Œéœ€è¦æ­é… promise ä½¿ç”¨ä¿è¯è·å–åˆ°ç»çº¬åº¦ä¿¡æ¯ã€‚å…·ä½“è§ä¸‹é¢ä»£ç  1234567891011121314151617181920212223242526272829function loadSDK() &#123; if (window.AMap) return; return new Promise((resolve, reject) =&gt; &#123; const script = document.createElement(&quot;script&quot;); script.src = &quot;http://webapi.amap.com/maps?v=1.4.6&amp;key=*****************&quot;; //***ä¸ºç”³è¯·çš„é«˜å¾·key document.head.appendChild(script); script.onload = resolve; script.onerror = reject; &#125;);&#125;export default async () =&gt; &#123; await loadSDK(); return new Promise((resolve) =&gt; &#123; // eslint-disable-next-line no-undef AMap.plugin(&quot;AMap.Geolocation&quot;, () =&gt; &#123; // eslint-disable-next-line no-undef const geolocation = new AMap.Geolocation(&#123; enableHighAccuracy: false &#125;); geolocation.getCurrentPosition((status, result) =&gt; &#123; const res = status === &quot;complete&quot; ? result.position : &#123; lat: 39.909187, lng: 116.397451 &#125;; //é»˜è®¤åŒ—äº¬ 116.397451ã€39.909187 console.log(&quot;å®šä½ç»“æœ&quot;, res); resolve(res); &#125;); &#125;); &#125;);&#125;; åœ¨ vue é¡µé¢ä¸­çš„ä½¿ç”¨ï¼ˆè¿™é‡Œå‡è®¾éœ€æ±‚æ˜¯è¯·æ±‚ç¦»æˆ‘æœ€è¿‘åº—é“ºä¿¡æ¯åˆ—è¡¨ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;template&gt; &lt;div class=&quot;main-container&quot;&gt; &lt;div class=&quot;list&quot;&gt; &lt;div class=&quot;list-item&quot; v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt; //you can do something &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import * as Api from &#x27;@/api/xxx.js&#x27; //å¼•å…¥è¯·æ±‚æ¥å£çš„Apiimport getLocation from &#x27;@/utils/getLocation&#x27; //å¼•å…¥getLocationæ–¹æ³•export default &#123; data() &#123; return &#123; params: &#123;&#125;, list: [] &#125; &#125;, mounted() &#123; this.fetchList() &#125;, methods: &#123; async getPosition() &#123; const &#123; lng, lat &#125; = await getLocation() this.params = &#123; lng, lat &#125; &#125;, async fetchList() &#123; await this.getPosition() const &#123; list &#125; = await Api.fetchList(this.params) this.list = list &#125; &#125;&#125;&lt;/script&gt;&lt;style lang=&#x27;less&#x27; scoped&gt;&lt;/style&gt; æ³¨æ„å¦‚æœåœ¨ index.html ä¸­å¼•å…¥é«˜å¾·åœ°å›¾åœ¨å…¨å±€ä½¿ç”¨ AMap æ„é€ å‡½æ•°éœ€è¦åœ¨ vue.config.js æ·»åŠ å¦‚ä¸‹é…ç½®,å¦åˆ™ä¼šæŠ¥â€˜AMap is not definedâ€™é”™è¯¯ 1234567module.exports = &#123; configureWebpack: &#123; externals: &#123; AMap: &quot;AMap&quot;, &#125;, &#125;,&#125;; åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼ˆä¸¾ä¸ª ğŸŒ°ï¼Œä»£ç æœªæµ‹è¯•ï¼‰ 12345678910111213141516171819&lt;script&gt;import AMap from &#x27;AMap&#x27;export default&#123; methods:&#123; fn()&#123; AMap.plugin(&#x27;AMap.Geolocation&#x27;, () =&gt; &#123; const geolocation = new AMap.Geolocation(&#123; enableHighAccuracy: false &#125;) geolocation.getCurrentPosition((status, result) =&gt; &#123; const res = status === &#x27;complete&#x27; ? result.position : &#123; lat: 39.909187, lng: 116.397451 &#125; //é»˜è®¤åŒ—äº¬ 116.397451ã€39.909187 console.log(&#x27;å®šä½ç»“æœ&#x27;, res) &#125;) &#125;) &#125; &#125;&#125;&lt;/script&gt;","categories":[{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B7%A5%E5%85%B7/"}]}],"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"},{"name":"vue","slug":"vue","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/vue/"},{"name":"ES6","slug":"ES6","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/ES6/"},{"name":"CSS","slug":"CSS","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/CSS/"},{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/%E7%BB%84%E4%BB%B6/"},{"name":"taro","slug":"taro","permalink":"https://ovyvo.github.io/yanblog.github.io/categories/taro/"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"JS","slug":"JS","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/JS/"},{"name":"Element","slug":"Element","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/Element/"},{"name":"vue-2","slug":"vue-2","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-2/"},{"name":"vue-3","slug":"vue-3","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/vue-3/"},{"name":"æ ·å¼","slug":"æ ·å¼","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E6%A0%B7%E5%BC%8F/"},{"name":"ä»£ç è§„èŒƒ","slug":"ä»£ç è§„èŒƒ","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"},{"name":"Linux","slug":"Linux","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/Linux/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]}