<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yan&#39;s Blog</title>
  
  
  <link href="https://ovyvo.github.io/yanblog.github.io/atom.xml" rel="self"/>
  
  <link href="https://ovyvo.github.io/yanblog.github.io/"/>
  <updated>2022-11-27T04:13:15.827Z</updated>
  <id>https://ovyvo.github.io/yanblog.github.io/</id>
  
  <author>
    <name>OVYVO</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>commitlint+husky+commitizen+lint-stageä»£ç é£æ ¼åŠä¸Šä¼ è§„èŒƒç®¡ç†</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2022/11/08/blog9/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2022/11/08/blog9/</id>
    <published>2022-11-07T16:00:00.000Z</published>
    <updated>2022-11-27T04:13:15.827Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç´§æ¥ä¸Šæ–‡è¯´åˆ°vite+vue3ä»£ç é£æ ¼åŠæ ¼å¼åŒ–æ“ä½œï¼Œå‰æ–‡ä¸»è¦é’ˆå¯¹æœ¬åœ°åŒ–é…ç½®æ ¼å¼åŒ–ã€‚ä¸ºäº†æ›´åŠ è§„èŒƒä»“åº“ä»£ç ï¼Œæœ¬æ–‡å¼•å…¥ä»‹ç»commitlintç­‰å·¥å…·ï¼Œåœ¨ä»£ç commitçš„æ—¶å€™å†æ¬¡æ ¡éªŒä¸ºä»£ç è§„èŒƒå†ä¸Šä¸€å±‚ä¿éšœã€‚</p></blockquote><h3 id="å®‰è£…commitlintåŠcommitlinté…ç½®åŒ…"><a href="#å®‰è£…commitlintåŠcommitlinté…ç½®åŒ…" class="headerlink" title="å®‰è£…commitlintåŠcommitlinté…ç½®åŒ…"></a>å®‰è£…commitlintåŠcommitlinté…ç½®åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @commitlint/cli  @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure><blockquote><p>æ·»åŠ @commitlint/config-conventionalåŒ…çš„ç›®çš„æ˜¯ä½¿ç”¨åŸºç¡€é…ç½®ï¼Œå¦å¤–ä¹Ÿå¯æ ¹æ®å®é™…éœ€è¦æ·»åŠ é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼šcommitlint.config.jsã€.commitlintrc.jsã€.commitlintrcã€.commitlintrc.jsonã€.commitlintrc.ymlæˆ–package.jsonä¸­çš„commité…ç½®</p></blockquote><h3 id="å®‰è£…husky"><a href="#å®‰è£…husky" class="headerlink" title="å®‰è£…husky"></a>å®‰è£…husky</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ä¸‹è¿°å‘½ä»¤ä¼šåœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆ.huskyæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªpre-commité’©å­å®ä¾‹</span></span><br><span class="line">npx husky-init &amp;&amp; npm install       # npm</span><br><span class="line">npx husky-init &amp;&amp; yarn              # Yarn 1</span><br><span class="line">yarn dlx husky-init --yarn2 &amp;&amp; yarn # Yarn 2+</span><br><span class="line">pnpm dlx husky-init &amp;&amp; pnpm install # pnpm</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®‰è£…huskyï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install husky --save-dev #å®‰è£…ä¾èµ–</span><br><span class="line">npx --no-install husky install #åˆ›å»º.huskyç›®å½•(ä½¿ç”¨--no-installçš„ç›®çš„æ˜¯è®©npxå¼ºåˆ¶ä½¿ç”¨node_modulesç›®å½•ä¸‹çš„huskyä¾èµ–åŒ…)</span><br><span class="line">npm pkg set scripts.prepare=&quot;husky install&quot; #åœ¨package.jsonä¸­æ·»åŠ åˆå§‹åŒ–å‘½ä»¤(æ­¤æ­¥éª¤å¯ä»¥çœç•¥ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤šäººå¼€å‘ä¼šå¾ˆæœ‰å¿…è¦ï¼Œåˆå§‹åŒ–ä»“åº“å¯ä»¥æ‰§è¡Œè¯¥å‘½ä»¤)</span><br><span class="line">npx --no-instal husky add .husky/pre-commit &quot;npm run lint&quot; #å¿«é€Ÿåˆ›å»ºpre-commité’©å­</span><br></pre></td></tr></table></figure><p>æ·»åŠ commit-msg hookï¼ˆè¯¥hookä¼šåœ¨commitlintæœªé€šè¿‡æ—¶æç¤ºç›¸å…³ä¿¡æ¯ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg  &#x27;npx --no -- commitlint --edit $&#123;1&#125;&#x27;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•åˆ¤æ–­ä¸Šè¿°æ­¥éª¤æ˜¯å¦æˆåŠŸå¯ä»¥ä½¿ç”¨ç®€å•çš„testå‘½ä»¤æµ‹è¯•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx commitlint --from HEAD~1 --to HEAD --verbose</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œcommitä¹‹åå¦‚æœå‡ºç°ç±»ä¼¼çš„ä¿¡æ¯å³å¯è®¤ä¸ºé…ç½®æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;foo: this will fail&quot;</span><br><span class="line">husky &gt; commit-msg (node v10.1.0)</span><br><span class="line">No staged files match any of provided globs.</span><br><span class="line">â§—   input: foo: this will fail</span><br><span class="line">âœ–   type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum]</span><br><span class="line"></span><br><span class="line">âœ–   found 1 problems, 0 warnings</span><br><span class="line">â“˜   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint</span><br><span class="line"></span><br><span class="line">husky &gt; commit-msg hook failed (add --no-verify to bypass)</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ commitizen"><a href="#æ·»åŠ commitizen" class="headerlink" title="æ·»åŠ commitizen"></a>æ·»åŠ commitizen</h3><p>commitizenå·¥å…·å¯ä»¥é€šè¿‡äº¤äº’å¼æ’°å†™ç¬¦åˆCommit Messageè§„èŒƒçš„Commit Message</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install commitizen -D</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">or</span></span><br><span class="line">yarn add commitizen -D</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç”Ÿæˆç¬¦åˆAngularçš„Commit messageæ ¼å¼æäº¤è§„èŒƒï¼ˆä½¿ç”¨å…¶ä»–è§„èŒƒå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx --no-install commitizen init cz-conventional-changelog --save-dev --save-exact</span><br></pre></td></tr></table></figure><p>!!!è‹¥ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ï¼Œéœ€è¦åœ¨package.jsonä¸­é…ç½®ä¸€ä¸‹commitizené€‚é…å™¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;./node_modules/cz-conventional-changelog&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–åœ¨package.jsonä¸­çš„scriptsä¸­æ·»åŠ commitè„šæœ¬æ›¿ä»£git commit</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;cz&quot;</span>: <span class="string">&quot;git add . &amp;&amp; git-cz&quot;</span>,</span><br><span class="line">    <span class="string">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œä¸Šè¿°æ“ä½œå°±å¯ä»¥ä½¿ç”¨è„šæœ¬æäº¤ä»£ç </p><h3 id="é…ç½®commitlint"><a href="#é…ç½®commitlint" class="headerlink" title="é…ç½®commitlint"></a>é…ç½®commitlint</h3><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶.commitlintrc.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“é…ç½®å¯å‚è€ƒhttps://commitlint.js.org/#/reference-rulesè‡ªè¡Œé…ç½®ä¸åšè¯¦ç»†è¯´æ˜</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">ignores</span>: [<span class="function">(<span class="params">commit</span>) =&gt;</span> commit.<span class="title function_">includes</span>(<span class="string">&#x27;init&#x27;</span>)],</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;header-max-length&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, <span class="number">72</span>],</span><br><span class="line">    <span class="string">&#x27;scope-case&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, <span class="string">&#x27;lowerCase&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;subject-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;subject-case&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, [<span class="string">&#x27;lower-case&#x27;</span>, <span class="string">&#x27;sentence-case&#x27;</span>, <span class="string">&#x27;start-case&#x27;</span>, <span class="string">&#x27;pascal-case&#x27;</span>, <span class="string">&#x27;upper-case&#x27;</span>]],</span><br><span class="line">    <span class="string">&#x27;subject-full-stop&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>, <span class="string">&#x27;.&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;type-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;type-case&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, <span class="string">&#x27;lowerCase&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;type-enum&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>, <span class="string">&#x27;docs&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;perf&#x27;</span>, <span class="string">&#x27;chore&#x27;</span>, <span class="string">&#x27;build&#x27;</span>]]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="commitizenè¾“å‡ºæ±‰åŒ–"><a href="#commitizenè¾“å‡ºæ±‰åŒ–" class="headerlink" title="commitizenè¾“å‡ºæ±‰åŒ–"></a>commitizenè¾“å‡ºæ±‰åŒ–</h3><p>å®‰è£…commitlint-config-czæ’ä»¶é…ç½®commit message</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install commitlint-config-cz -D #czé…ç½®æ’ä»¶</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">or</span></span><br><span class="line">yarn add commitlint-config-cz -D #czé…ç½®æ’ä»¶</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">and</span></span><br><span class="line">npm install cz-customizable -D #czé€‚é…å™¨æ’ä»¶</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">or</span></span><br><span class="line">yarn add cz-customizable -D #czé€‚é…å™¨æ’ä»¶</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º.cz-config.jsæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®æ–‡ä»¶å¯å‚è€ƒhttps://github.com/leoforfree/cz-customizable/blob/HEAD/cz-config-EXAMPLE.jsè‡ªè¡Œé…ç½®ä¸åšè¯¦ç»†è¯´æ˜</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">types</span>: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:sparkles: feat&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;âœ¨ feat: ä¸€é¡¹æ–°åŠŸèƒ½&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:bug: fix&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ğŸ› fix: ä¿®å¤ä¸€ä¸ªBug&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:memo: docs&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ğŸ“ docs: æ–‡æ¡£å˜æ›´&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:lipstick: style&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ğŸ’„ style: ä»£ç é£æ ¼ï¼Œæ ¼å¼ä¿®å¤&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:zap: perf&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;âš¡ï¸ perf: ä»£ç ä¼˜åŒ–,æ”¹å–„æ€§èƒ½&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:rocket: chore&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ğŸš€ chore: å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;:package: build&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ğŸ“¦ï¸ build: å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">messages</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;è¯·é€‰æ‹©æäº¤ç±»å‹(å¿…å¡«):&#x27;</span>,</span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmCommit</span>: <span class="string">&#x27;ç¡®å®šæäº¤æ­¤è¯´æ˜å—ï¼Ÿ&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">skipQuestions</span>: [<span class="string">&#x27;scope&#x27;</span>, <span class="string">&#x27;body&#x27;</span>, <span class="string">&#x27;breaking&#x27;</span>, <span class="string">&#x27;footer&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œ.cz-config.js </p><ul><li>è¿”å›package.jsonä¿®æ”¹commitizené€‚é…å™¨é€‰é¡¹<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;path&quot;</span>: <span class="string">&quot;node_modules/cz-customizable&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li>è‹¥ä¹‹å‰ä½¿ç”¨Angularçš„Commit messageæ ¼å¼æäº¤è§„èŒƒï¼Œéœ€ä¿®æ”¹.commitlintrc.jsæ–‡ä»¶ï¼ŒèŠ‚çº¦ç©ºé—´å¯ä»¥å¸è½½æ‰@commitlint/config-conventionalæ’ä»¶ï¼ˆç”¨ä¸ä¸Šäº†ï¼‰<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">extends</span>: [],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é›†æˆ-gitmoji"><a href="#é›†æˆ-gitmoji" class="headerlink" title="é›†æˆ gitmoji"></a>é›†æˆ gitmoji</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install commitlint-config-gitmoji -D</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">or</span></span><br><span class="line">yarn add commitlint-config-gitmoji -D</span><br></pre></td></tr></table></figure>ä¿®æ”¹.commitlintrc.js<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;gitmoji&#x27;</span>],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>ä½¿ç”¨gitmojiçš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</li></ul><ol><li>æŠ¥é”™æ‰¾ä¸åˆ°gitmojis.json ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š<pre><code>åœ¨node_modules/commitlint-plugin-gitmoji/libä¸‹æ·»åŠ gitmojis.json</code></pre> åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ gitmojis.jsonå¹¶ä¿®æ”¹.cz-config.js <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">process.<span class="property">env</span>.<span class="property">GITMOJI_PATH</span> = <span class="string">&#x27;.gitmoji.json&#x27;</span></span><br><span class="line">modules.<span class="property">exports</span>=&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">2. å¶é‡æ ¡éªŒä¸é€šè¿‡éœ€è¦ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°äº‹ä¾‹é…ç½®.commitlintrc.jsï¼ˆåˆ—å‡ºæ¥çš„ruleå‹¿æ”¹ï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### å®‰è£…lint-stage</span></span><br><span class="line"><span class="string">æ–‡ä»¶è¿‡æ»¤å™¨ï¼Œæ¯æ¬¡åªæ ¡éªŒcommitçš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>shell</span><br><span class="line">npm install lint-staged -D</span><br><span class="line">#or</span><br><span class="line">yarn add lint-stage -D</span><br></pre></td></tr></table></figure>ä¿®æ”¹.husky/pre-commit<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!<span class="regexp">/usr/</span>bin/env sh</span><br><span class="line">. <span class="string">&quot;$(dirname -- &quot;</span>$<span class="number">0</span><span class="string">&quot;)/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line">npx lint-staged</span><br></pre></td></tr></table></figure>ä¿®æ”¹package.json<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“ä½¿ç”¨å¯å‚è€ƒlint-stageä»‹ç»ï¼šhttps://github.com/okonet/lint-staged#readme</span></span><br><span class="line">...</span><br><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;eslint --fix&quot;</span>, <span class="comment">//eslintæ ¡éªŒ</span></span><br><span class="line">    <span class="string">&quot;prettier --write&quot;</span> <span class="comment">//prettieræ ¼å¼åŒ–</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;*.vue&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;eslint --fix&quot;</span>,</span><br><span class="line">    <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>æœ‰å…³eslintåŠprettierçš„é—®é¢˜å¯ä»¥å‚è§ä¸Šç¯‡æ–‡ç« ã€‚<a href="https://ovyvo.github.io/yanblog.github.io/2022/10/28/blog8/">vite+vue3ä»£ç é£æ ¼æ ¡éªŒåŠæ ¼å¼åŒ–</a></li></ol><p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡å…¨éƒ¨å†…å®¹ï¼Œç”±äºé¡¹ç›®æˆæœ¬å…³ç³»æ²¡æœ‰å¼•å…¥å…¶ä»–å·¥å…·ï¼Œåƒæ–‡ä»¶æ ¡éªŒï¼Œcommit-logè‡ªåŠ¨æ·»åŠ ï¼Œstylelintç­‰ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œå°è¯•ã€‚</p><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><p><a href="https://download.csdn.net/download/V_AYA_V/86725149?spm=1001.2014.3001.5503">gitmojis.jsonæ–‡ä»¶åœ°å€</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ç´§æ¥ä¸Šæ–‡è¯´åˆ°vite+vue3ä»£ç é£æ ¼åŠæ ¼å¼åŒ–æ“ä½œï¼Œå‰æ–‡ä¸»è¦é’ˆå¯¹æœ¬åœ°åŒ–é…ç½®æ ¼å¼åŒ–ã€‚ä¸ºäº†æ›´åŠ è§„èŒƒä»“åº“ä»£ç ï¼Œæœ¬æ–‡å¼•å…¥ä»‹ç»commitlintç­‰å·¥å…·ï¼Œåœ¨ä»£ç commitçš„æ—¶å€™å†æ¬¡æ ¡éªŒä¸ºä»£ç è§„èŒƒå†ä¸Šä¸€å±‚ä¿éšœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 i</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="ä»£ç è§„èŒƒ" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>prettier+eslint+commitlinté¡¹ç›®å®è·µ</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2022/10/28/blog8/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2022/10/28/blog8/</id>
    <published>2022-10-28T00:00:00.000Z</published>
    <updated>2022-11-27T04:13:15.827Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å›¢é˜Ÿä»£ç é£æ ¼ç»Ÿä¸€ä¸€ç›´æ˜¯åšä¸»æƒ³å¹²åˆæ²¡æœ‰æ—¶é—´å»å¹²çš„äº‹æƒ…ï¼Œåˆšå¥½å€Ÿç€æ–°é¡¹ç›®æ­å»ºï¼Œå°è¯•ä¸€ä¸‹ä½¿ç”¨EslintåŠPrettierå·¥å…·æå‡ä¸€ä¸‹é¡¹ç›®ä»£ç çš„æ•´ä½“è´¨é‡ã€‚æœ¬æ–‡åœ¨é…ç½®æ–¹é¢ä»…åšç®€å•çš„é…ç½®ï¼Œæµç¨‹ç†Ÿæ‚‰å¯ä»¥å‚è€ƒEslintåŠPrettierå®˜æ–¹æ–‡æ¡£å®šåˆ¶è‡ªå·±å–œæ¬¢çš„æ ‡å‡†ã€‚</p></blockquote><h3 id="å®‰è£…EslintåŒ…"><a href="#å®‰è£…EslintåŒ…" class="headerlink" title="å®‰è£…EslintåŒ…"></a>å®‰è£…EslintåŒ…</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–Eslint"><a href="#åˆå§‹åŒ–Eslint" class="headerlink" title="åˆå§‹åŒ–Eslint"></a>åˆå§‹åŒ–Eslint</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init @eslint/config</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤åä¼šå‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼šï¼ˆå¯ä»¥æŒ‰ç…§å›¾ç‰‡é…ç½®ï¼Œä¹Ÿå¯ä»¥åé¢ç›´æ¥æ›´æ”¹.eslintrc.cjsæ–‡ä»¶ï¼‰<br><img src="https://img-blog.csdnimg.cn/d9d106e8d2724340b5e4c5b7dd63cf9e.png" alt="initè¯¦æƒ…"><br>å…·ä½“é…ç½®å¯ä»¥ä»¥è‡ªå·±é¡¹ç›®ä¸ºå‡†ï¼Œåšä¸»è¿™é‡Œä½¿ç”¨çš„æ˜¯vite+vue3+js<br>å®‰è£…å®Œæˆä¹‹åé¡¹ç›®çš„æ ¹ç›®å½•ä¼šå‡ºç°.eslintrc.cjsæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es2021&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:vue/vue3-essential&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;overrides&quot;</span>: [</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;vue&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…vite-plugin-eslintåŒ…"><a href="#å®‰è£…vite-plugin-eslintåŒ…" class="headerlink" title="å®‰è£…vite-plugin-eslintåŒ…"></a>å®‰è£…vite-plugin-eslintåŒ…</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è¯¥åŒ…çš„ä½œç”¨æ˜¯åœ¨viteè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹eslintè§„èŒƒï¼Œæ ¹æ®é…ç½®åœ¨ç»ˆç«¯æ˜¾ç¤ºæœªé€šè¿‡çš„æ ¡éªŒä»£ç </span><br><span class="line">npm install vite<span class="literal">-plugin-eslint</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…eslint-parser-åŠ-babel-core-åŒ…"><a href="#å®‰è£…eslint-parser-åŠ-babel-core-åŒ…" class="headerlink" title="å®‰è£…eslint-parser åŠ @babel/core åŒ…"></a>å®‰è£…eslint-parser åŠ @babel/core åŒ…</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// è¯¥åŒ…çš„ä½œç”¨æ˜¯å…è®¸eslintåœ¨babelè½¬æ¢çš„æºä»£ç ä¸Šè¿è¡Œ</span><br><span class="line">npm install @babel/eslint<span class="literal">-parser</span> <span class="literal">-D</span></span><br><span class="line">npm install @babel/core <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…prettierç›¸å…³åŒ…"><a href="#å®‰è£…prettierç›¸å…³åŒ…" class="headerlink" title="å®‰è£…prettierç›¸å…³åŒ…"></a>å®‰è£…prettierç›¸å…³åŒ…</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install prettier <span class="literal">-D</span></span><br><span class="line">npm install eslint<span class="literal">-config-prettier</span> <span class="literal">-D</span> // eslintå…¼å®¹çš„æ’ä»¶,å°†å…³é—­eslintæ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸Prettierå†²çªçš„è§„åˆ™</span><br><span class="line">npm install eslint<span class="literal">-plugin-prettier</span> <span class="literal">-D</span> // eslintçš„prettier,å°†Prettierä½œä¸ºESLintè§„åˆ™è¿è¡Œï¼Œå¹¶å°†å·®å¼‚ä½œä¸ºå•ä¸ªESLinté—®é¢˜æŠ¥å‘Šã€‚</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…vue-eslint-parseråŒ…"><a href="#å®‰è£…vue-eslint-parseråŒ…" class="headerlink" title="å®‰è£…vue-eslint-parseråŒ…"></a>å®‰è£…vue-eslint-parseråŒ…</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ç”¨äº`.vue`æ–‡ä»¶çš„ESLintè‡ªå®šä¹‰è§£æå™¨ã€‚</span><br><span class="line">npm install vue<span class="literal">-eslint-parser</span> <span class="literal">-D</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®-prettierrc"><a href="#é…ç½®-prettierrc" class="headerlink" title="é…ç½®.prettierrc"></a>é…ç½®.prettierrc</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .prettierrc, é…ç½®ä¸åšè¿‡å¤šè¯´æ˜ï¼Œå…·ä½“å¯æŸ¥é˜…ç›¸å…³æ–‡æ¡£</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;printWidth&quot;</span>: <span class="number">120</span>,</span><br><span class="line">  <span class="string">&quot;tabWidth&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;useTabs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;trailingComma&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="string">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;bracketSpacing&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;jsxBracketSameLine&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="string">&quot;endOfLine&quot;</span>: <span class="string">&quot;auto&quot;</span>,</span><br><span class="line">  <span class="string">&quot;arrowParens&quot;</span>: <span class="string">&quot;avoid&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-eslintrc-cjs"><a href="#é…ç½®-eslintrc-cjs" class="headerlink" title="é…ç½®.eslintrc.cjs"></a>é…ç½®.eslintrc.cjs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span>, <span class="comment">// eslintæ ¸å¿ƒè§„åˆ™</span></span><br><span class="line">    <span class="string">&#x27;plugin:vue/vue3-essential&#x27;</span>, <span class="comment">// ç»§æ‰¿eslint-plugin-vueç»„ä»¶ä¸­çš„åŸºç¡€é…ç½®</span></span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>, <span class="comment">// ç»§æ‰¿eslint-plugin-prettierç»„ä»¶ä¸­çš„åŸºç¡€é…ç½®</span></span><br><span class="line">    <span class="string">&#x27;eslint-config-prettier&#x27;</span> <span class="comment">// å¤„ç†é…ç½®å…¼å®¹é—®é¢˜</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;vue-eslint-parser&#x27;</span>, <span class="comment">// ä½¿ç”¨vueè§£æå™¨</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123; <span class="comment">// è®¾ç½®æ”¯æŒçš„JavaScriptè¯­è¨€é€‰é¡¹</span></span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="string">&#x27;latest&#x27;</span>, <span class="comment">// æŒ‡å®šEcmaScriptçš„ç‰ˆæœ¬</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>, <span class="comment">// script/module</span></span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>:[</span><br><span class="line">  <span class="string">&#x27;vue&#x27;</span>, <span class="comment">// eslint-plugin-vueç¼©å†™</span></span><br><span class="line">  <span class="string">&#x27;prettier&#x27;</span> <span class="comment">// eslint-plugin-prettierç¼©å†™</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">globals</span>: &#123;</span><br><span class="line">  <span class="comment">// æ·»åŠ å…¨å±€å˜é‡ï¼Œé˜²æ­¢no-undef è§„åˆ™å‘å‡ºè­¦å‘Š</span></span><br><span class="line">    <span class="attr">defineProps</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="attr">defineEmits</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="attr">defineExpose</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="attr">withDefaults</span>: <span class="string">&#x27;readonly&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>: <span class="string">&#x27;off&#x27;</span> <span class="comment">// extendsä¸­ç»§æ‰¿è¿‡æ¥çš„å±æ€§ï¼Œå¯ä»¥é‡æ–°ä¿®æ”¹</span></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="VSCodeé…ç½®"><a href="#VSCodeé…ç½®" class="headerlink" title="VSCodeé…ç½®"></a>VSCodeé…ç½®</h3><p>å®‰è£…ESLintåŠPrettieræ’ä»¶<br><img src="https://img-blog.csdnimg.cn/4690e67f62214702b6661568c0861a34.png" alt="Eslintæ’ä»¶"><br><img src="https://img-blog.csdnimg.cn/bce24e7cf92543f6b7a9552221ccb58c.png" alt="Prettieræ’ä»¶"></p><ol><li>æ‰“å¼€VSCodeè®¾ç½®&gt;ç”¨æˆ·&gt;æ–‡æœ¬ç¼–è¾‘å™¨&gt;æ ¼å¼åŒ–&gt;å‹¾é€‰Format On Save</li></ol><p><img src="https://img-blog.csdnimg.cn/6b72652fe60d4251b7b213b4ab0b4175.png" alt="é…ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–"><br>2. æœç´¢Prettier&gt;å‹¾é€‰Require Config<br><img src="https://img-blog.csdnimg.cn/fb501a9997c947f2b4a2b5be516add31.png" alt="é…ç½®æ–¹æ¡ˆæ–‡ä»¶"><br>3.æ‰“å¼€VSCodeè®¾ç½®&gt;ç”¨æˆ·&gt;æ–‡æœ¬ç¼–è¾‘å™¨&gt;Default Formatter&gt;é€‰æ‹©Prettier - Code formatter<br><img src="https://img-blog.csdnimg.cn/4a56242e17a443fdad906b636403427a.png" alt="é…ç½®é»˜è®¤æ ¼å¼åŒ–ç¨‹åº"><br>4.ctr+shift+pæ‰“å¼€é¦–é€‰é¡¹é…ç½®settings.json&gt;æ·»åŠ eslint vueæ”¯æŒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">&quot;eslint.validate&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">   <span class="string">&quot;javascriptreact&quot;</span>,</span><br><span class="line">   <span class="string">&quot;vue&quot;</span></span><br><span class="line"> ],</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>ç‰¹åˆ«æé†’ï¼šæ¯æ¬¡ä¿®æ”¹å®ŒEslintåŠPrettieré…ç½®æœ€å¥½é‡æ–°å¯åŠ¨VSCodeï¼Œé˜²æ­¢å‡ºç°é…ç½®ä¸ç”Ÿæ•ˆçš„æƒ…å†µ</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å›¢é˜Ÿä»£ç é£æ ¼ç»Ÿä¸€ä¸€ç›´æ˜¯åšä¸»æƒ³å¹²åˆæ²¡æœ‰æ—¶é—´å»å¹²çš„äº‹æƒ…ï¼Œåˆšå¥½å€Ÿç€æ–°é¡¹ç›®æ­å»ºï¼Œå°è¯•ä¸€ä¸‹ä½¿ç”¨EslintåŠPrettierå·¥å…·æå‡ä¸€ä¸‹é¡¹ç›®ä»£ç çš„æ•´ä½“è´¨é‡ã€‚æœ¬æ–‡åœ¨é…ç½®æ–¹é¢ä»…åšç®€å•çš„é…ç½®ï¼Œæµç¨‹ç†Ÿæ‚‰å¯ä»¥å‚è€ƒEslintåŠPrettierå®˜æ–¹æ–‡æ¡£å®šåˆ¶è‡ªå·±å–œæ¬¢çš„æ ‡å‡†</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="ä»£ç è§„èŒƒ" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>Elementç»„ä»¶MessageBoxå‰–æ</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2022/10/10/blog7/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2022/10/10/blog7/</id>
    <published>2022-10-10T00:00:00.000Z</published>
    <updated>2022-10-10T11:00:56.172Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å› æœ€è¿‘ä¸šåŠ¡éœ€æ±‚éœ€è¦å®ç°ç±»ä¼¼äºElementä¸­çš„MessageBoxç»„ä»¶çš„æ•ˆæœï¼Œæ‰€ä»¥å°è¯•å°è£…äº†ä¸€ä¸ªç±»ä¼¼çš„å°ç»„ä»¶ï¼Œæœ¬æ–‡ä¸ä»‹ç»å°è£…ï¼Œå› ä¸ºå—åˆ°MessageBoxçš„å¯å‘ï¼Œæ‰€ä»¥é€šè¿‡æºç æ³¨é‡Šçš„æ–¹å¼è¯¦ç»†å‰–æä¸€ä¸‹Elementçš„MessageBoxå®ç°æ€æƒ³ã€‚</p></blockquote><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><p>Vue.extend(options)</p><ul><li>å‚æ•°ï¼š{Object} options</li><li>ç”¨æ³•ï¼šä½¿ç”¨åŸºç¡€ Vue æ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªâ€œå­ç±»â€ã€‚å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šdata é€‰é¡¹æ˜¯ç‰¹ä¾‹ï¼Œéœ€è¦æ³¨æ„ - åœ¨ Vue.extend() ä¸­å®ƒå¿…é¡»æ˜¯å‡½æ•°</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mount-point&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ„é€ å™¨</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Profile</span> = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;p&gt;&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125; aka &#123;&#123;alias&#125;&#125;&lt;/p&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">firstName</span>: <span class="string">&#x27;Walter&#x27;</span>,</span><br><span class="line">      <span class="attr">lastName</span>: <span class="string">&#x27;White&#x27;</span>,</span><br><span class="line">      <span class="attr">alias</span>: <span class="string">&#x27;Heisenberg&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// åˆ›å»º Profile å®ä¾‹ï¼Œå¹¶æŒ‚è½½åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Profile</span>().$mount(<span class="string">&#x27;#mount-point&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Walter White aka Heisenberg<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸ºä»€ä¹ˆè¦ä»‹ç»Vue.extend(options)ï¼Œå› ä¸ºElementä¸­MessageBoxçš„ä½¿ç”¨æ–¹å¼ä¸ºå‡½æ•°å¼è°ƒç”¨ ï¼ˆthis.$confirm()ï¼‰çš„å½¢å¼ï¼Œä»¥è¿™ç§å½¢å¼è°ƒç”¨ç»„ä»¶å°±ä¸èƒ½æŒ‰ç…§å¸¸è§„çš„ç»„ä»¶å¼•å…¥æ³¨å†Œçš„å½¢å¼å»è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡Vue.extend(options)åˆ›å»ºä¸€ä¸ªvueå­ç±»å†é€šè¿‡å‡½æ•°æš´éœ²å‡ºå»çš„æ–¹å¼å®ç°å‡½æ•°å¼è°ƒç”¨ã€‚</p></blockquote><h3 id="Element-MessageBox-æºç "><a href="#Element-MessageBox-æºç " class="headerlink" title="Element MessageBox æºç "></a>Element MessageBox æºç </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js ä»…ä»‹ç»ä¸»è¦éƒ¨åˆ†ä»£ç </span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="comment">// å¼•å…¥æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> msgboxVue <span class="keyword">from</span> <span class="string">&#x27;./main.vue&#x27;</span>; </span><br><span class="line"><span class="comment">// elementåˆå¹¶å¯¹è±¡çš„å·¥å…·å‡½æ•°ï¼Œä»£ç æ¯”è¾ƒç®€å•å¯ä»¥è‡ªè¡ŒæŸ¥é˜…</span></span><br><span class="line"><span class="keyword">import</span> merge <span class="keyword">from</span> <span class="string">&#x27;element-ui/src/utils/merge&#x27;</span>; </span><br><span class="line"><span class="keyword">import</span> &#123; isVNode &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui/src/utils/vdom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„vueæ„é€ å™¨ï¼Œæ„é€ å™¨å¯ä»¥æ‰‹åŠ¨æŒ‚è½½åˆ°ä¸€ä¸ªæ–°çš„Domä¸Š</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MessageBoxConstructor</span> = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(msgboxVue);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> currentMsg, instance;</span><br><span class="line"><span class="keyword">let</span> msgQueue = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„vueå­å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">initInstance</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  instance = <span class="keyword">new</span> <span class="title class_">MessageBoxConstructor</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ç»™å®ä¾‹æ·»åŠ callbackå¯¹è±¡ï¼Œåé¢ä¼šåˆ†æåˆ°</span></span><br><span class="line">  instance.<span class="property">callback</span> = defaultCallback;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// defaultCallbackå¤„ç†äº†ä¸¤ç§å½¢å¼çš„å›è°ƒæ–¹å¼</span></span><br><span class="line"><span class="comment">// 1.å¯ä»¥æ‰‹åŠ¨ä¼ å…¥ä¸€ä¸ªcallbackå‡½æ•°</span></span><br><span class="line"><span class="comment">// 2.ä½¿ç”¨é»˜è®¤çš„promiseæ–¹å¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">defaultCallback</span> = action =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (currentMsg) &#123;</span><br><span class="line">    <span class="keyword">let</span> callback = currentMsg.<span class="property">callback</span>;</span><br><span class="line">    <span class="comment">// å¤„ç†ä¼ å…¥å›è°ƒå‡½æ•°æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// showInputåŒºåˆ†æ˜¯å¦ä¸ºè¾“å…¥æ¡†MessageBox</span></span><br><span class="line">      <span class="keyword">if</span> (instance.<span class="property">showInput</span>) &#123;</span><br><span class="line">        <span class="title function_">callback</span>(instance.<span class="property">inputValue</span>, action);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">callback</span>(action, instance);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¤„ç†promiseæƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (currentMsg.<span class="property">resolve</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (action === <span class="string">&#x27;confirm&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance.<span class="property">showInput</span>) &#123;</span><br><span class="line">          currentMsg.<span class="title function_">resolve</span>(&#123; <span class="attr">value</span>: instance.<span class="property">inputValue</span>, action &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          currentMsg.<span class="title function_">resolve</span>(action);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentMsg.<span class="property">reject</span> &amp;&amp; (action === <span class="string">&#x27;cancel&#x27;</span> || action === <span class="string">&#x27;close&#x27;</span>)) &#123;</span><br><span class="line">        currentMsg.<span class="title function_">reject</span>(action);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">showNextMsg</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">    <span class="title function_">initInstance</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  instance.<span class="property">action</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!instance.<span class="property">visible</span> || instance.<span class="property">closeTimer</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (msgQueue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// é¡ºåºæ‰§è¡ŒmsgQueueä¸­çš„currentMsg</span></span><br><span class="line">      currentMsg = msgQueue.<span class="title function_">shift</span>();</span><br><span class="line">      <span class="comment">// currentMsgå†…å®¹å¦‚ä¸‹:</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   options: merge(&#123;&#125;, defaults, MessageBox.defaults, options),</span></span><br><span class="line">      <span class="comment">//   callback: callback,</span></span><br><span class="line">      <span class="comment">//   resolve: resolve,</span></span><br><span class="line">      <span class="comment">//   reject: reject</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="keyword">let</span> options = currentMsg.<span class="property">options</span>;</span><br><span class="line">      <span class="comment">// å°†å‚æ•°æŒ‚è½½åˆ°æ–°åˆ›å»ºçš„å®ä¾‹dataä¸Š</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> options) &#123;</span><br><span class="line">        <span class="keyword">if</span> (options.<span class="title function_">hasOwnProperty</span>(prop)) &#123;</span><br><span class="line">          <span class="comment">// å®ä¾‹å‚æ•°ä¿®æ”¹</span></span><br><span class="line">          instance[prop] = options[prop];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¦‚æœoptionsæ²¡ä¼ å…¥callbackå°†é»˜è®¤çš„callbackèµ‹å€¼ç»™å®ä¾‹çš„callback</span></span><br><span class="line">      <span class="keyword">if</span> (options.<span class="property">callback</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="comment">// å½“optionsé‡Œé¢æœ‰callbackä¼ å…¥ï¼Œæ­£å¸¸è¾“å‡ºã€‚</span></span><br><span class="line">        <span class="comment">// å½“optionsé‡Œé¢æ²¡æœ‰callback,instance.callbackä½¿ç”¨defaultCallback</span></span><br><span class="line">        instance.<span class="property">callback</span> = defaultCallback;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å†æ¬¡å°è£…callback</span></span><br><span class="line">      <span class="keyword">let</span> oldCb = instance.<span class="property">callback</span>;</span><br><span class="line">      instance.<span class="property">callback</span> = <span class="function">(<span class="params">action, instance</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">oldCb</span>(action, instance);</span><br><span class="line">        <span class="title function_">showNextMsg</span>();</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ¤æ–­messageæ˜¯å¦ä¼ å…¥çš„æ˜¯Htmlç‰‡æ®µ,å¦‚æœæ˜¯Htmlç‰‡æ®µæ·»åŠ åˆ°slot</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isVNode</span>(instance.<span class="property">message</span>)) &#123;</span><br><span class="line">        instance.<span class="property">$slots</span>.<span class="property">default</span> = [instance.<span class="property">message</span>];</span><br><span class="line">        instance.<span class="property">message</span> = <span class="literal">null</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">delete</span> instance.<span class="property">$slots</span>.<span class="property">default</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// å°†æŸäº›ç‰¹å®šçš„å‚æ•°è®¾å®šåˆå§‹å€¼</span></span><br><span class="line">      [<span class="string">&#x27;modal&#x27;</span>, <span class="string">&#x27;showClose&#x27;</span>, <span class="string">&#x27;closeOnClickModal&#x27;</span>, <span class="string">&#x27;closeOnPressEscape&#x27;</span>, <span class="string">&#x27;closeOnHashChange&#x27;</span>].<span class="title function_">forEach</span>(<span class="function"><span class="params">prop</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance[prop] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">          instance[prop] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// æ³¨æ„messageæ˜¯æŒ‚è½½åˆ°bodyä¸Š</span></span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(instance.<span class="property">$el</span>);</span><br><span class="line">      <span class="comment">// æ§åˆ¶å¼¹çª—å‡ºç°</span></span><br><span class="line">      <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        instance.<span class="property">visible</span> = <span class="literal">true</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MessageBox</span> = <span class="keyword">function</span>(<span class="params">options, callback</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$isServer</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">&#x27;string&#x27;</span> || <span class="title function_">isVNode</span>(options)) &#123;</span><br><span class="line">    <span class="comment">// å½“optionså‚æ•°ä¸ºå­—ç¬¦ä¸² this.$msgbox(&#x27;xxx&#x27;)æƒ…å†µä¸‹é»˜è®¤è®¾ç½®messageå­—æ®µ</span></span><br><span class="line">    options = &#123;</span><br><span class="line">      <span class="attr">message</span>: options</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// è‹¥æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šå‚æ•°åˆ¤æ–­ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ä¸ºå­—ç¬¦ä¸²èµ‹å€¼ç»™title</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">arguments</span>[<span class="number">1</span>] === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      options.<span class="property">title</span> = <span class="variable language_">arguments</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.<span class="property">callback</span> &amp;&amp; !callback) &#123;</span><br><span class="line">    <span class="comment">// å‚æ•°ä¸ºå¯¹è±¡ä¸”å¯¹è±¡æœ‰callbackå­—æ®µæ—¶ å°†callbackèµ‹å€¼ç»™callback</span></span><br><span class="line">    callback = options.<span class="property">callback</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¼å®¹ä¸æ”¯æŒPromiseæƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Promise</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; <span class="comment">// eslint-disable-line</span></span><br><span class="line">      msgQueue.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">options</span>: <span class="title function_">merge</span>(&#123;&#125;, defaults, <span class="title class_">MessageBox</span>.<span class="property">defaults</span>, options),</span><br><span class="line">        <span class="attr">callback</span>: callback,</span><br><span class="line">        <span class="attr">resolve</span>: resolve,</span><br><span class="line">        <span class="attr">reject</span>: reject</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">showNextMsg</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    msgQueue.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">options</span>: <span class="title function_">merge</span>(&#123;&#125;, defaults, <span class="title class_">MessageBox</span>.<span class="property">defaults</span>, options),</span><br><span class="line">      <span class="attr">callback</span>: callback</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">showNextMsg</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨æ–¹å¼1:</span></span><br><span class="line">  <span class="comment">// this.$msgbox(&#123;title:&#x27;æµ‹è¯•&#x27;,message:&#x27;æµ‹è¯•&#x27;,callback:(action,instance)=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//   console.log(action) //confirm</span></span><br><span class="line">  <span class="comment">//   console.log(instance) //vueå®ä¾‹</span></span><br><span class="line">  <span class="comment">// &#125;&#125;)</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨æ–¹å¼2:</span></span><br><span class="line">  <span class="comment">// this.$msgbox(&#123;title:&#x27;æµ‹è¯•&#x27;,message:&#x27;æµ‹è¯•&#x27;&#125;,(action,instance)=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//   console.log(action) //confirm</span></span><br><span class="line">  <span class="comment">//   console.log(instance) //undefined</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²MessageBoxæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MessageBox</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">MessageBox</span> &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥çœ‹å‡ºMessageç»„ä»¶ä¸»è¦çš„ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªæ˜¯MessageBoxï¼Œä¸€ä¸ªæ˜¯showNextMsgï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¸»è¦åŠŸèƒ½ä¸€ä¸ªæ˜¯æ·»åŠ æ–°çš„messageå¯¹è±¡ä¸€ä¸ªæ˜¯è®¾ç½®å®ä¾‹å‚æ•°ï¼Œé™¤äº†callbackçš„ç†è§£æœ‰äº›å¤æ‚å¤–å…¶ä»–çš„ä»£ç ç†è§£åº”è¯¥ä¸éš¾ã€‚è‡³äºmain.vueæ–‡ä»¶å°±æ˜¯æ™®é€šçš„vueæ–‡ä»¶ä¸å†èµ˜è¿°ã€‚</p></blockquote><h3 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h3><p><a href="https://ovyvo.github.io/rocket-ui/components/message-box.html">MessageBoxç»„ä»¶</a><br><a href="https://github.com/OVYVO/rocket-ui/tree/main/packages/message-box/src">æºç </a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å› æœ€è¿‘ä¸šåŠ¡éœ€æ±‚éœ€è¦å®ç°ç±»ä¼¼äºElementä¸­çš„MessageBoxç»„ä»¶çš„æ•ˆæœï¼Œæ‰€ä»¥å°è¯•å°è£…äº†ä¸€ä¸ªç±»ä¼¼çš„å°ç»„ä»¶ï¼Œæœ¬æ–‡ä¸ä»‹ç»å°è£…ï¼Œå› ä¸ºå—åˆ°MessageBoxçš„å¯å‘ï¼Œæ‰€ä»¥é€šè¿‡æºç æ³¨é‡Šçš„æ–¹å¼è¯¦ç»†å‰–æä¸€ä¸‹Elementçš„MessageBoxå®ç°æ€æƒ³ã€‚&lt;/p</summary>
      
    
    
    
    <category term="ç»„ä»¶" scheme="https://ovyvo.github.io/yanblog.github.io/categories/%E7%BB%84%E4%BB%B6/"/>
    
    
    <category term="Element" scheme="https://ovyvo.github.io/yanblog.github.io/tags/Element/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¸¸è§å‘½ä»¤æ€»ç»“</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2022/08/27/blog6/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2022/08/27/blog6/</id>
    <published>2022-08-26T16:00:00.000Z</published>
    <updated>2022-08-27T09:43:39.955Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ€»ç»“ä¸€ä¸‹å¸¸è§Linuxæ“ä½œå‘½ä»¤ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€</p></blockquote><h4 id="ç›®å½•ä¸æ–‡ä»¶ç›¸å…³"><a href="#ç›®å½•ä¸æ–‡ä»¶ç›¸å…³" class="headerlink" title="ç›®å½•ä¸æ–‡ä»¶ç›¸å…³"></a>ç›®å½•ä¸æ–‡ä»¶ç›¸å…³</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pwd <span class="comment">//æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line">mkdir <span class="string">&#x27;dir&#x27;</span> <span class="comment">//åˆ›å»ºå·¥ä½œç›®å½•</span></span><br><span class="line">rmdir <span class="string">&#x27;dir&#x27;</span> <span class="comment">//åˆ é™¤å·¥ä½œç›®å½•</span></span><br><span class="line">cd <span class="string">&#x27;dir&#x27;</span> <span class="comment">//è¿›å…¥æ–‡ä»¶å¤¹</span></span><br><span class="line">cd .. <span class="comment">//è¿”å›ä¸Šå±‚ç›®å½•</span></span><br><span class="line">touch <span class="string">&#x27;file&#x27;</span> <span class="comment">//åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">rm -rf <span class="string">&#x27;file/dir&#x27;</span> <span class="comment">//åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">ls <span class="comment">//åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line">ls -a <span class="comment">//æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶(åŒ…æ‹¬éšè—æ–‡ä»¶)</span></span><br><span class="line">ls -l <span class="comment">//è¯¦ç»†æ˜¾ç¤º</span></span><br><span class="line">ls -m <span class="comment">//é€—å·åˆ†éš”æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶å†…å®¹æ˜¾ç¤º"><a href="#æ–‡ä»¶å†…å®¹æ˜¾ç¤º" class="headerlink" title="æ–‡ä»¶å†…å®¹æ˜¾ç¤º"></a>æ–‡ä»¶å†…å®¹æ˜¾ç¤º</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; <span class="string">&#x27;file&#x27;</span> <span class="comment">//åˆ›å»ºæ–‡ä»¶å¹¶ç¼–è¾‘å†…å®¹ï¼ˆctr+Dç»“æŸç¼–è¾‘ï¼‰</span></span><br><span class="line">cat -n <span class="string">&#x27;file&#x27;</span> <span class="comment">//æŸ¥çœ‹æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="viç¼–è¾‘å™¨"><a href="#viç¼–è¾‘å™¨" class="headerlink" title="viç¼–è¾‘å™¨"></a>viç¼–è¾‘å™¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi [path/file] <span class="comment">//æ‰“å¼€ç¼–è¾‘å™¨</span></span><br><span class="line">i <span class="comment">//è¿›å…¥ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">esc <span class="comment">//è¿›å…¥å‘½ä»¤æ¨¡å¼</span></span><br><span class="line">:wq <span class="comment">//ä¿å­˜å¹¶æ¨å‡º</span></span><br><span class="line">:q! <span class="comment">//é€€å‡ºä¸ä¿å­˜</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clear <span class="comment">//æ¸…é™¤å±å¹•ä¿¡æ¯</span></span><br><span class="line">date <span class="comment">//æ˜¾ç¤ºå½“å‰æ—¥æœŸ</span></span><br><span class="line">ps <span class="comment">//æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹</span></span><br><span class="line">last <span class="comment">//æ˜¾ç¤ºæœ€è¿‘ç™»é™†ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹å¸¸è§Linuxæ“ä½œå‘½ä»¤ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;ç›®å½•ä¸æ–‡ä»¶ç›¸å…³&quot;&gt;&lt;a href=&quot;#ç›®å½•ä¸æ–‡ä»¶ç›¸å…³&quot; class=&quot;headerlink&quot; title=&quot;ç›®å½•ä¸æ–‡ä»¶ç›¸å…³&quot;&gt;&lt;/a&gt;ç›®å½•ä¸æ–‡ä»¶ç›¸å…³&lt;</summary>
      
    
    
    
    <category term="å·¥å…·" scheme="https://ovyvo.github.io/yanblog.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Linux" scheme="https://ovyvo.github.io/yanblog.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>H5åœ¨IOSå¾®ä¿¡webviewä¸­æ— æ³•æ ¡éªŒè§†é¢‘æ—¶é•¿é—®é¢˜</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2022/07/31/blog5/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2022/07/31/blog5/</id>
    <published>2022-07-30T16:00:00.000Z</published>
    <updated>2022-07-31T11:56:48.542Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å› ä¸šåŠ¡éœ€æ±‚éœ€è¦ä¸€ä¸ªå›¾ç‰‡è§†é¢‘æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œéœ€æ”¯æŒä¸»æµæµè§ˆå™¨åŠå¾®ä¿¡é’‰é’‰å†…ç½®æµè§ˆå™¨ï¼Œé‚è€ƒè™‘ç”¨ä¸€ä¸ªç®€å•çš„H5é¡µé¢åšä¸Šä¼ å®¢æˆ·ç«¯ã€‚è§†é¢‘ä¸Šä¼ å› ä¸ºè¦æ§åˆ¶è§†é¢‘é•¿åº¦ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­éƒ½æ ¡éªŒé€šè¿‡ï¼Œä½†æ˜¯åœ¨å¾®ä¿¡ä¸­å´å‡ºäº†é—®é¢˜</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">beforeRead</span> = (<span class="params">file</span>)=&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(props.<span class="property">type</span> == <span class="string">&#x27;video&#x27;</span>)&#123;</span><br><span class="line">          <span class="keyword">let</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(file)</span><br><span class="line">          <span class="keyword">let</span> audioElement = <span class="keyword">new</span> <span class="title class_">Audio</span>(url)</span><br><span class="line">          audioElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;loadedmetadata&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> audioDuration = audioElement.<span class="property">duration</span>;</span><br><span class="line">            <span class="keyword">if</span>(audioDuration&gt;<span class="number">60</span>)&#123;</span><br><span class="line">              <span class="title class_">Toast</span>(<span class="string">`ä»…æ”¯æŒä¸Šä¼ 1åˆ†é’Ÿæ—¶é•¿ä»¥å†…è§†é¢‘`</span>)</span><br><span class="line">              <span class="title function_">reject</span>()</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="title function_">resolve</span>(file)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (![<span class="string">&#x27;image/jpeg&#x27;</span>,<span class="string">&#x27;image/png&#x27;</span>].<span class="title function_">includes</span>(file.<span class="property">type</span>)) &#123;</span><br><span class="line">            <span class="title class_">Toast</span>(<span class="string">&#x27;æ‰€é€‰æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ&#x27;</span>);</span><br><span class="line">            <span class="title function_">reject</span>()</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(file)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜åŸå› ï¼šIOSå¾®ä¿¡æµè§ˆå™¨éœ€è¦æ’­æ”¾è§†é¢‘æ‰èƒ½é€šè¿‡ç›‘å¬loadedmetadataäº‹ä»¶è·å–è§†é¢‘é•¿åº¦ï¼Œä»¥ä¸‹æ˜¯è§£å†³åŠæ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">beforeRead</span> = (<span class="params">file</span>)=&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(props.<span class="property">type</span> == <span class="string">&#x27;video&#x27;</span>)&#123;</span><br><span class="line">          <span class="keyword">let</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(file)</span><br><span class="line">          <span class="keyword">let</span> audioElement = <span class="keyword">new</span> <span class="title class_">Audio</span>(url)</span><br><span class="line">          audioElement.<span class="property">muted</span> = <span class="literal">true</span></span><br><span class="line">          audioElement.<span class="title function_">play</span>().<span class="title function_">then</span>(<span class="function">()=&gt;</span>audioElement.<span class="title function_">pause</span>())</span><br><span class="line">          audioElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;loadedmetadata&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> audioDuration = audioElement.<span class="property">duration</span>;</span><br><span class="line">            <span class="keyword">if</span>(audioDuration&gt;<span class="number">60</span>)&#123;</span><br><span class="line">              audioElement.<span class="property">muted</span> = <span class="literal">false</span></span><br><span class="line">              <span class="title class_">Toast</span>(<span class="string">`ä»…æ”¯æŒä¸Šä¼ 1åˆ†é’Ÿæ—¶é•¿ä»¥å†…è§†é¢‘`</span>)</span><br><span class="line">              <span class="title function_">reject</span>()</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              audioElement.<span class="property">muted</span> = <span class="literal">false</span></span><br><span class="line">              <span class="title function_">resolve</span>(file)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (![<span class="string">&#x27;image/jpeg&#x27;</span>,<span class="string">&#x27;image/png&#x27;</span>].<span class="title function_">includes</span>(file.<span class="property">type</span>)) &#123;</span><br><span class="line">            <span class="title class_">Toast</span>(<span class="string">&#x27;æ‰€é€‰æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ&#x27;</span>);</span><br><span class="line">            <span class="title function_">reject</span>()</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(file)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>H5é¡µé¢vue3.0+vantï¼Œå‚è§uploadç»„ä»¶ä¸å†èµ˜è¿°ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å› ä¸šåŠ¡éœ€æ±‚éœ€è¦ä¸€ä¸ªå›¾ç‰‡è§†é¢‘æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œéœ€æ”¯æŒä¸»æµæµè§ˆå™¨åŠå¾®ä¿¡é’‰é’‰å†…ç½®æµè§ˆå™¨ï¼Œé‚è€ƒè™‘ç”¨ä¸€ä¸ªç®€å•çš„H5é¡µé¢åšä¸Šä¼ å®¢æˆ·ç«¯ã€‚è§†é¢‘ä¸Šä¼ å› ä¸ºè¦æ§åˆ¶è§†é¢‘é•¿åº¦ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­éƒ½æ ¡éªŒé€šè¿‡ï¼Œä½†æ˜¯åœ¨å¾®ä¿¡ä¸­å´å‡ºäº†é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure </summary>
      
    
    
    
    <category term="vue" scheme="https://ovyvo.github.io/yanblog.github.io/categories/vue/"/>
    
    
    <category term="vue-3" scheme="https://ovyvo.github.io/yanblog.github.io/tags/vue-3/"/>
    
  </entry>
  
  <entry>
    <title>Taroå°ç¨‹åºæ·»åŠ Echartsä»£ç åŒ…è¿‡å¤§è§£å†³åŠæ³•</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2021/10/19/blog4/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2021/10/19/blog4/</id>
    <published>2021-10-19T00:00:00.000Z</published>
    <updated>2022-10-10T11:00:56.172Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸Šå›ä¹¦è¯´åˆ°å¦‚ä½•åœ¨Taroå°ç¨‹åºä¸­å¼•å…¥Echartså›¾è¡¨ã€‚å¦‚æœå°ç¨‹åºä¸»åŒ…ä»£ç ä½“é‡ä¸å¤šå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœå°ç¨‹åºä»£ç ä½“é‡å¤§ï¼Œç¨ä¸ç•™ç¥å°±ä¼šå¯¼è‡´ä¸»åŒ…ä»£ç è¶…è¿‡2Mï¼Œæ— æ³•é¢„è§ˆä¹Ÿæ— æ³•çœŸæœºè°ƒè¯•ã€‚æœ¬æ–‡ç€é‡ä»‹ç»ä¸€ä¸‹Taroå¼•å…¥Echartsåˆ†åŒ…æ“ä½œä»¥åŠæ³¨æ„äº‹é¡¹ã€‚</p></blockquote><h6 id="å‰æ–‡é“¾æ¥ï¼Œå®Œæ•´æµç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…-taroå°ç¨‹åºæ·»åŠ Echartså®è·µ"><a href="#å‰æ–‡é“¾æ¥ï¼Œå®Œæ•´æµç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…-taroå°ç¨‹åºæ·»åŠ Echartså®è·µ" class="headerlink" title="å‰æ–‡é“¾æ¥ï¼Œå®Œæ•´æµç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜… taroå°ç¨‹åºæ·»åŠ Echartså®è·µ"></a>å‰æ–‡é“¾æ¥ï¼Œå®Œæ•´æµç¨‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜… <a href="https://blog.csdn.net/V_AYA_V/article/details/120828878">taroå°ç¨‹åºæ·»åŠ Echartså®è·µ</a></h6><h6 id="åˆ†åŒ…æ“ä½œï¼š"><a href="#åˆ†åŒ…æ“ä½œï¼š" class="headerlink" title="åˆ†åŒ…æ“ä½œï¼š"></a>åˆ†åŒ…æ“ä½œï¼š</h6><ol><li>å°†ä¸echartsç»„ä»¶ç›¸å…³éƒ½ç§»åˆ°åˆ†åŒ…ä¸­ï¼Œç»“æ„ç›®å½•å¦‚ä¸‹<br><img src="https://img-blog.csdnimg.cn/e54a142d784945938153d51fd8769eed.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>é…ç½®app.config.js</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">subpackages</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">root</span>: <span class="string">&quot;subpages&quot;</span>,</span><br><span class="line">      <span class="attr">pages</span>: [</span><br><span class="line">        <span class="string">&#x27;test/index&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="3"><li>é…ç½®config/index<blockquote><p>å¯¼è‡´åŒ…æ–‡ä»¶è¿‡å¤§çš„â€œç½ªé­ç¥¸é¦–â€å°±æ˜¯ec-canvasæ–‡ä»¶å¤¹ä¸‹çš„echarts.jsæ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåˆ†åŒ…ä½¿ç”¨Echartsç»„ä»¶ä¸èƒ½å°†echarts.jsæ‰“åŒ…åˆ°ä¸»åŒ…çš„common.jsé‡Œé¢ã€‚Taroæœºåˆ¶è®¤ä¸ºä¸€ä¸ªjsæ–‡ä»¶è¢«å¤šä¸ªæ¨¡å—ä¾èµ–ä¼šå°†è¯¥jsæŠ½ç¦»åˆ°common.jsã€‚è™½ç„¶æˆ‘ä»¬å…³äºEchartsç›¸å…³çš„æ–‡ä»¶éƒ½æ”¾åœ¨subpagesé‡Œé¢ï¼Œä½†æ˜¯å¦‚æœå¼•ç”¨å¤šæ¬¡è¿˜æ˜¯ä¼šæŠ½ç¦»åˆ°ä¸»åŒ…common.jsã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨splitChunkså°†Echartséƒ¨åˆ†å•ç‹¬æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨addChunkPages å¾€é¡µé¢æ³¨å…¥ä¾èµ–ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config/index.js</span></span><br><span class="line"><span class="attr">mini</span>: &#123;</span><br><span class="line">    <span class="attr">compile</span>: &#123;</span><br><span class="line">      <span class="attr">exclude</span>: [</span><br><span class="line">        <span class="comment">// è·³è¿‡ç¼–è¯‘</span></span><br><span class="line">        path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;..&#x27;</span>, <span class="string">&#x27;src/subpages/components/ec-canvas/echarts.js&#x27;</span>)</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    addChunkPages (pages) &#123;</span><br><span class="line">      pages.<span class="title function_">set</span>(<span class="string">&#x27;subpages/test/index&#x27;</span>, [<span class="string">&#x27;subpages/common&#x27;</span>])</span><br><span class="line">    &#125;,</span><br><span class="line">    webpackChain (chain) &#123;</span><br><span class="line">      chain.<span class="title function_">merge</span>(&#123;</span><br><span class="line">        <span class="attr">optimization</span>: &#123;</span><br><span class="line">          <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">            <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">              <span class="attr">subpackagesCommon</span>: &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;subpages/common&#x27;</span>,</span><br><span class="line">                <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">test</span>: <span class="function">(<span class="params"><span class="variable language_">module</span>,chunks</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">const</span> isNoOnlySubpackRequired = chunks.<span class="title function_">find</span>(<span class="function"><span class="params">chunk</span> =&gt;</span> !(<span class="regexp">/\bsubpages\b/</span>.<span class="title function_">test</span>(chunk.<span class="property">name</span>)))</span><br><span class="line">                  <span class="keyword">return</span> !isNoOnlySubpackRequired</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">priority</span>: <span class="number">200</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ol><p>è‡³æ­¤å¯ä»¥çœ‹åˆ°æ‰“åŒ…æ•ˆæœï¼š<br><img src="https://img-blog.csdnimg.cn/620ab1f3bf9b4e3cb4ec911ba06d41fe.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVl9BWUFfVg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h6 id="é¡µé¢å¼•ç”¨"><a href="#é¡µé¢å¼•ç”¨" class="headerlink" title="é¡µé¢å¼•ç”¨"></a>é¡µé¢å¼•ç”¨</h6><p>å‚è€ƒå‰æ–‡é¡µé¢ä½¿ç”¨ã€‚æ­¤æ—¶å¦‚æœæˆ‘ä»¬è¿è¡Œä»£ç ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼š<br><img src="https://img-blog.csdnimg.cn/90ee2801ff3d4c0b84bfa9fa359a0ce4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVl9BWUFfVg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ³¨æ„è¿™ä¸ªé”™è¯¯ï¼æç¤ºæ‰¾ä¸åˆ°ec-canvasç»„ä»¶ã€‚<br><img src="https://img-blog.csdnimg.cn/dd60c0daa96c497ebc5d3c0dcfe6e101.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVl9BWUFfVg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ³¨æ„ç¼–è¯‘åçš„ç»„ä»¶ec-canvas.jså› ä¸ºä¹‹å‰æŠ½ç¦»äº†echarts.jsï¼Œç°åœ¨å·²ç»æ— æ³•å¼•å…¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç¼–è¯‘åçš„æ–‡ä»¶ä¸­å¼•å…¥subpagesé‡Œé¢çš„common.jsã€‚</p><ol><li>æ·»åŠ å¼•å…¥plugin(ä»£ç å¾ˆç®€å•ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£<a href="https://taro-docs.jd.com/taro/docs/plugin#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E6%8F%92%E4%BB%B6">å¦‚ä½•ç¼–å†™ä¸€ä¸ªæ’ä»¶</a>)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable import/no-commonjs */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  è§£å†³chunkåŒ…æ²¡æœ‰å¼•ç”¨èµ„æºçš„é—®é¢˜</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">default</span> = <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">ctx, options</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="title function_">onBuildFinish</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> chunkRequireArray = options.<span class="property">chunkRequireArray</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> chunkRequireArray)&#123;</span><br><span class="line">      <span class="keyword">const</span> unitData = chunkRequireArray[i];</span><br><span class="line">      <span class="keyword">const</span> target = path.<span class="title function_">join</span>(ctx.<span class="property">paths</span>.<span class="property">outputPath</span>, unitData.<span class="property">fileDistPath</span>);</span><br><span class="line">      <span class="keyword">const</span> data = fs.<span class="title function_">readFileSync</span>(target, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">      fs.<span class="title function_">writeFileSync</span>(target, <span class="string">`<span class="subst">$&#123;unitData.prependContent&#125;</span>;<span class="subst">$&#123;data&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®config/index.js</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;..&#x27;</span>, <span class="string">&#x27;plugin/chunkCacheRequirePlugin&#x27;</span>),</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">chunkRequireArray</span>:[ <span class="comment">//å¯é…ç½®å¤šä¸ªç›®æ ‡å¼•å…¥æ–‡ä»¶</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">fileDistPath</span>: <span class="string">&#x27;subpages/components/ec-canvas/ec-canvas.js&#x27;</span>,</span><br><span class="line">            <span class="attr">prependContent</span>: <span class="string">&#x27;require(&quot;../../common&quot;);&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure><p>é‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/847970db1d2e464dad26045b1f0f5520.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVl9BWUFfVg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä¸Šå›ä¹¦è¯´åˆ°å¦‚ä½•åœ¨Taroå°ç¨‹åºä¸­å¼•å…¥Echartså›¾è¡¨ã€‚å¦‚æœå°ç¨‹åºä¸»åŒ…ä»£ç ä½“é‡ä¸å¤šå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœå°ç¨‹åºä»£ç ä½“é‡å¤§ï¼Œç¨ä¸ç•™ç¥å°±ä¼šå¯¼è‡´ä¸»åŒ…ä»£ç è¶…è¿‡2Mï¼Œæ— æ³•é¢„è§ˆä¹Ÿæ— æ³•çœŸæœºè°ƒè¯•ã€‚æœ¬æ–‡ç€é‡ä»‹ç»ä¸€ä¸‹Taroå¼•å…¥Echartsåˆ†åŒ…æ“ä½œä»¥åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/</summary>
      
    
    
    
    <category term="taro" scheme="https://ovyvo.github.io/yanblog.github.io/categories/taro/"/>
    
    
    <category term="å°ç¨‹åº" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Taroå°ç¨‹åºå¼•å…¥Echartsæ•™ç¨‹</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2021/10/18/blog3/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2021/10/18/blog3/</id>
    <published>2021-10-18T00:00:00.000Z</published>
    <updated>2022-07-31T11:43:24.895Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å°ç¨‹åºéœ€è¦æ·»åŠ ç®€å•çš„æ•°æ®ç»Ÿè®¡åŠŸèƒ½ã€‚å› ä¸ºå¯¹Echatsæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰€ä»¥æƒ³å°†Echatså¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæœ‰å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p></blockquote><blockquote><p>taroç‰ˆæœ¬ï¼š3.3.2ï¼ˆæ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼‰,å®˜æ–¹ç‰©æ–™ä»“åº“é‡Œé¢çš„Echartså¤§å¤šä¸å…¼å®¹æœ€æ–°ç‰ˆæœ¬taroæ¡†æ¶ï¼Œä½†æ˜¯å®ç°çš„æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¤§è‡´è¯´ä¸€ä¸‹ï¼š</p></blockquote><h5 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h5><ol><li><p>ä¸‹è½½Echartså®˜æ–¹çš„å°ç¨‹åºæ’ä»¶echarts-for-weixin <a href="https://github.com/ecomfe/echarts-for-weixin">ä¼ é€é—¨</a><br><img src="https://img-blog.csdnimg.cn/c8b4e2c4f67c43dd88457ada54a57fc5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAVl9BWUFfVg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>å°†é¡¹ç›®ä¸­çš„ec-canvasæ–‡ä»¶å¤¹å¤åˆ¶ä¿å­˜</p></li><li><p>å»Echartså®˜ç½‘å®šåˆ¶å›¾è¡¨(ä¸å»ºè®®å…¨éƒ¨ä¸‹è½½ï¼Œæ–‡ä»¶å¤ªå¤§ï¼Œå°ç¨‹åºä½“ç§¯å¤§éœ€è¦åˆ†åŒ…) <a href="https://echarts.apache.org/zh/builder.html">ä¼ é€é—¨</a></p></li><li><p>å‹ç¼©echarts.jsæ–‡ä»¶(å‹ç¼©æ–¹æ³•å¯ä»¥è‡ªè¡Œæ‰¾çº¿ä¸Šå‹ç¼©ç½‘ç«™æˆ–è‡ªè¡Œå‹ç¼©ï¼Œæ–¹æ³•é™„åæ–‡ï¼‰</p></li><li><p>æ›¿æ¢ec-canvasæ–‡ä»¶ä¸­çš„echarts.jsæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/375e575d3d6542d0915643b9ac1e9cda.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h5 id="æœ¬åœ°å‹ç¼©æ–¹æ³•"><a href="#æœ¬åœ°å‹ç¼©æ–¹æ³•" class="headerlink" title="æœ¬åœ°å‹ç¼©æ–¹æ³•"></a>æœ¬åœ°å‹ç¼©æ–¹æ³•</h5></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install uglify-js -g</span><br><span class="line">uglifyjs echarts.<span class="property">js</span> -m -o echarts.<span class="property">min</span>.<span class="property">js</span> <span class="comment">//æ³¨æ„ï¼šæ›¿æ¢ec-canvasé‡Œé¢çš„æ–‡ä»¶æ—¶å°†echarts.min.jsæ¢å›æ¥</span></span><br></pre></td></tr></table></figure><h5 id="å°ç¨‹åºå°è£…å›¾è¡¨ç»„ä»¶-ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹"><a href="#å°ç¨‹åºå°è£…å›¾è¡¨ç»„ä»¶-ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹" class="headerlink" title="å°ç¨‹åºå°è£…å›¾è¡¨ç»„ä»¶(ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹)"></a>å°ç¨‹åºå°è£…å›¾è¡¨ç»„ä»¶(ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹)</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ±çŠ¶å›¾</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/components&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/taro&quot;</span> <span class="comment">//Taro3.xéœ€è¦ä½¿ç”¨getCurrentInstance è·å–é¡µé¢DOM</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setChartData</span>(<span class="params">chart</span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> defautOption = &#123;</span><br><span class="line">    <span class="attr">xAxis</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: [<span class="string">&quot;Mon&quot;</span>, <span class="string">&quot;Tue&quot;</span>, <span class="string">&quot;Wed&quot;</span>, <span class="string">&quot;Thu&quot;</span>, <span class="string">&quot;Fri&quot;</span>, <span class="string">&quot;Sat&quot;</span>, <span class="string">&quot;Sun&quot;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">yAxis</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;value&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">data</span>: [<span class="number">120</span>, <span class="number">200</span>, <span class="number">150</span>, <span class="number">80</span>, <span class="number">70</span>, <span class="number">110</span>, <span class="number">130</span>],</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        <span class="attr">showBackground</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">backgroundStyle</span>: &#123;</span><br><span class="line">          <span class="attr">color</span>: <span class="string">&quot;rgba(220, 220, 220, 0.8)&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">  chart.<span class="title function_">setOption</span>(defautOption);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">BarChart</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">ec</span>: &#123;</span><br><span class="line">        <span class="attr">lazyLoad</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">refresh</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="title function_">getCurrentInstance</span>().<span class="property">page</span>.<span class="title function_">selectComponent</span>(<span class="string">&#x27;#mychart-area&#x27;</span>).<span class="title function_">init</span>(<span class="function">(<span class="params">canvas, width, height</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> chart = echarts.<span class="title function_">init</span>(canvas, <span class="literal">null</span>, &#123;</span><br><span class="line">        <span class="attr">width</span>: width,</span><br><span class="line">        <span class="attr">height</span>: height</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="title function_">setChartData</span>(chart, data);</span><br><span class="line">      <span class="keyword">return</span> chart;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">className</span>=<span class="string">&#x27;bar-chart&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ec-canvas</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">id</span>=<span class="string">&#x27;mychart-area&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">canvasId</span>=<span class="string">&#x27;mychart-area&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ec</span>=<span class="string">&#123;this.state.ec&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="é¡µé¢ä½¿ç”¨"><a href="#é¡µé¢ä½¿ç”¨" class="headerlink" title="é¡µé¢ä½¿ç”¨"></a>é¡µé¢ä½¿ç”¨</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@tarojs/components&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BarChart</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/barChart&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span> (props) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">barChart</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="comment">// å»¶è¿Ÿè°ƒç”¨ï¼Œç¡®ä¿ ec-canvas èŠ‚ç‚¹å·²å­˜åœ¨</span></span><br><span class="line">     <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">barChart</span>.<span class="property">current</span>.<span class="title function_">refresh</span>()</span><br><span class="line">     &#125;, <span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  componentDidShow () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  componentDidHide () &#123; &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">className</span>=<span class="string">&#x27;selfstudy-container&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">BarChart</span> <span class="attr">ref</span>=<span class="string">&#123;this.barChart&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è‡³æ­¤å›¾è¡¨å¼•å…¥å·²å®Œæˆ90%â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-<br>ç›´æ¥é¡µé¢ä½¿ç”¨çš„è¯ä¼šæŠ¥ä¸¤ä¸ªé”™è¯¯ï¼š</p><ol><li>echarts is not definedã€‚ï¼ˆæ²¡æœ‰æ‹¿åˆ°ec-canvasé¡µé¢å®ä¾‹ï¼‰<br><img src="https://img-blog.csdnimg.cn/c1a7c829effb4f3c9c1c49e8c6604460.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol><p><strong>è§£å†³æ–¹æ³•ï¼šåœ¨ app æˆ–é¡µé¢é…ç½®æ–‡ä»¶ä¸­é…ç½® usingComponents å±æ€§ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">usingComponents</span>: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰éœ€è¦å¼•å…¥çš„ç¬¬ä¸‰æ–¹ç»„ä»¶</span></span><br><span class="line">    <span class="comment">// 1. key å€¼æŒ‡å®šç¬¬ä¸‰æ–¹ç»„ä»¶åå­—ï¼Œä»¥å°å†™å¼€å¤´</span></span><br><span class="line">    <span class="comment">// 2. value å€¼æŒ‡å®šç¬¬ä¸‰æ–¹ç»„ä»¶ js æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="string">&#x27;ec-canvas&#x27;</span>: <span class="string">&#x27;../../components/ec-canvas/ec-canvas&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šTaro3 çš„ç»„ä»¶æ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶çš„ï¼Œå› æ­¤ usingComponents å¿…é¡»é…ç½®åœ¨â€œé¡µé¢â€çš„é…ç½®æ–‡ä»¶ä¸­ã€‚<br>2.  t.addEventListener is not a function<br> <img src="https://img-blog.csdnimg.cn/bafdf484508b477ba134037598e2654e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>è§£å†³æ–¹æ³•ï¼šåœ¨ ec-canvasæ–‡ä»¶å¤¹ä¸‹é¢çš„wx-canvas.jsæ–‡ä»¶æ·»åŠ ä»£ç ï¼š</strong></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">WxCanvas</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">ctx, canvasId, isNew, canvasNode</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = ctx;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvasId</span> = canvasId;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">chart</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isNew</span> = isNew</span><br><span class="line">    <span class="keyword">if</span> (isNew) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">canvasNode</span> = canvasNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">_initStyle</span>(ctx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// this._initCanvas(zrender, ctx);</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_initEvent</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ–°å¢ç©ºå‡½æ•°ï¼Œä¿®å¤è°ƒç”¨ echarts.init æ—¶æŠ¥é”™</span></span><br><span class="line">  addEventListener () &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getContext</span>(<span class="params">contextType</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (contextType === <span class="string">&#x27;2d&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ctx</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å°ç¨‹åºéœ€è¦æ·»åŠ ç®€å•çš„æ•°æ®ç»Ÿè®¡åŠŸèƒ½ã€‚å› ä¸ºå¯¹Echatsæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰€ä»¥æƒ³å°†Echatså¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œæœ‰å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼Œè®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;taroç‰ˆæœ¬ï¼š3.3.2ï¼ˆæ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯ï¼‰,å®˜æ–¹ç‰©æ–™ä»“</summary>
      
    
    
    
    <category term="taro" scheme="https://ovyvo.github.io/yanblog.github.io/categories/taro/"/>
    
    
    <category term="å°ç¨‹åº" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Taroå°ç¨‹åºåˆ†äº«</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2020/04/03/blog2/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2020/04/03/blog2/</id>
    <published>2020-04-03T00:00:00.000Z</published>
    <updated>2022-07-31T11:43:24.894Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨å¼€å‘å°ç¨‹åºçš„æ—¶å€™é‡åˆ°è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®åˆ†äº«å¡ç‰‡åˆ°å¥½å‹çš„éœ€æ±‚ï¼Œç”±äºå°ç¨‹åºçš„åˆ†äº«åªæœ‰åœ¨é¡µé¢ js ä¸­å®šä¹‰äº† onShareAppMessage(Object)æ–¹æ³•æ‰ä¼šå‡ºç°å³ä¸Šè§’çš„åˆ†äº«æŒ‰é’®,æ‰€ä»¥éœ€è¦åœ¨é¡µé¢ä¸­è‡ªå®šä¹‰åˆ†äº«æ–¹æ³•ã€‚å…·ä½“è§ä¸‹ï¼š</p></blockquote><h6 id="object-å‚æ•°"><a href="#object-å‚æ•°" class="headerlink" title="object å‚æ•°"></a>object å‚æ•°</h6><p><img src="https://img-blog.csdnimg.cn/20200403173141911.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1ZfQVlBX1Y=,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h6 id="onShareAppMessage-Object-äº‹ä»¶éœ€è¦è¿”å›ä¸€ä¸ª-Object-å¯¹è±¡å¯¹è±¡é‡Œé¢åŒ…å«è¦åˆ†äº«çš„æ ‡é¢˜ï¼Œè½¬å‘çš„è·¯å¾„ï¼Œä»¥åŠè‡ªå®šä¹‰å›¾ç‰‡çš„è·¯å¾„ã€‚å®Œæˆäº†è¿™ä¸€ç³»åˆ—æ“ä½œå°±å¯ä»¥æ„‰å¿«çš„å»åˆ†äº«å¾®ä¿¡å°ç¨‹åºçš„é¡µé¢äº†ã€‚"><a href="#onShareAppMessage-Object-äº‹ä»¶éœ€è¦è¿”å›ä¸€ä¸ª-Object-å¯¹è±¡å¯¹è±¡é‡Œé¢åŒ…å«è¦åˆ†äº«çš„æ ‡é¢˜ï¼Œè½¬å‘çš„è·¯å¾„ï¼Œä»¥åŠè‡ªå®šä¹‰å›¾ç‰‡çš„è·¯å¾„ã€‚å®Œæˆäº†è¿™ä¸€ç³»åˆ—æ“ä½œå°±å¯ä»¥æ„‰å¿«çš„å»åˆ†äº«å¾®ä¿¡å°ç¨‹åºçš„é¡µé¢äº†ã€‚" class="headerlink" title="onShareAppMessage(Object)äº‹ä»¶éœ€è¦è¿”å›ä¸€ä¸ª Object å¯¹è±¡å¯¹è±¡é‡Œé¢åŒ…å«è¦åˆ†äº«çš„æ ‡é¢˜ï¼Œè½¬å‘çš„è·¯å¾„ï¼Œä»¥åŠè‡ªå®šä¹‰å›¾ç‰‡çš„è·¯å¾„ã€‚å®Œæˆäº†è¿™ä¸€ç³»åˆ—æ“ä½œå°±å¯ä»¥æ„‰å¿«çš„å»åˆ†äº«å¾®ä¿¡å°ç¨‹åºçš„é¡µé¢äº†ã€‚"></a>onShareAppMessage(Object)äº‹ä»¶éœ€è¦è¿”å›ä¸€ä¸ª Object å¯¹è±¡å¯¹è±¡é‡Œé¢åŒ…å«è¦åˆ†äº«çš„æ ‡é¢˜ï¼Œè½¬å‘çš„è·¯å¾„ï¼Œä»¥åŠè‡ªå®šä¹‰å›¾ç‰‡çš„è·¯å¾„ã€‚å®Œæˆäº†è¿™ä¸€ç³»åˆ—æ“ä½œå°±å¯ä»¥æ„‰å¿«çš„å»åˆ†äº«å¾®ä¿¡å°ç¨‹åºçš„é¡µé¢äº†ã€‚</h6><p><img src="https://img-blog.csdnimg.cn/20200403173002500.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1ZfQVlBX1Y=,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Taro</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/taro&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;è‡ªå®šä¹‰æ ‡é¢˜&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/page/user?id=123&quot;</span>, <span class="comment">// è‡ªå®šä¹‰çš„åˆ†äº«è·¯å¾„ï¼Œç‚¹å‡»åˆ†äº«çš„å¡ç‰‡ä¹‹åä¼šè·³è½¬è¿™é‡Œå®šä¹‰çš„è·¯ç”±</span></span><br><span class="line">      <span class="attr">imageUrl</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>å¾®ä¿¡åˆ†äº«<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> index;</span><br></pre></td></tr></table></figure><blockquote><p>è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®äº‹ä»¶çš„å®ç°ã€‚æœ‰æ—¶å€™ï¼Œåœ¨å¤§å¤šæ•°çš„ä¸šåŠ¡åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸­ç‚¹å‡»æŸä¸ªæŒ‰é’®è§¦å‘åˆ†äº«çš„äº‹ä»¶ï¼Œæ­¤æ—¶éœ€è¦ç›‘å¬ç”¨æˆ·ç‚¹å‡»é¡µé¢å†…è½¬å‘æŒ‰é’®ï¼ˆButton ç»„ä»¶ openType=â€™shareâ€™ï¼‰å°±ä¼šè‡ªåŠ¨è§¦å‘ onShareAppMessage æ–¹æ³•ã€‚å¦‚æœéœ€è¦åœ¨ button ä¸­æºå¸¦ä¿¡æ¯ï¼Œéœ€è¦è‡ªå®šä¹‰ button å±æ€§ï¼Œé€šè¿‡ res.target.dataset è·å–ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Taro</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/taro&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@tarojs/components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">from</span> === <span class="string">&quot;button&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; share = &#123;&#125; &#125; = res.<span class="property">target</span>.<span class="property">dataset</span>;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">`è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®<span class="subst">$&#123;share.title&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">`/pages/bill/index`</span>,</span><br><span class="line">        <span class="attr">imageUrl</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&quot;å³ä¸Šè§’åˆ†äº«äº‹ä»¶&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">`/pages/bill/index`</span>,</span><br><span class="line">        <span class="attr">imageUrl</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">open-type</span>=<span class="string">&quot;share&quot;</span> <span class="attr">data-share</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ç‚¹å‡»åˆ†äº«</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> index;</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒonShareAppMessage ä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œå¦‚æœæœ‰éœ€æ±‚æ˜¯å…ˆè¯·æ±‚æ¥å£çš„æ•°æ®å†åˆ†äº«ä¼šå› ä¸ºæ‹¿ä¸åˆ°æ•°æ®å¯¼è‡´åˆ†äº«ä¿¡æ¯ä¸æ­£ç¡®çš„é”™è¯¯ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;åœ¨å¼€å‘å°ç¨‹åºçš„æ—¶å€™é‡åˆ°è‡ªå®šä¹‰åˆ†äº«æŒ‰é’®åˆ†äº«å¡ç‰‡åˆ°å¥½å‹çš„éœ€æ±‚ï¼Œç”±äºå°ç¨‹åºçš„åˆ†äº«åªæœ‰åœ¨é¡µé¢ js ä¸­å®šä¹‰äº† onShareAppMessage(Object)æ–¹æ³•æ‰ä¼šå‡ºç°å³ä¸Šè§’çš„åˆ†äº«æŒ‰é’®,æ‰€ä»¥éœ€è¦åœ¨é¡µé¢ä¸­è‡ªå®šä¹‰åˆ†äº«æ–¹æ³•ã€‚å…·ä½“è§ä¸‹ï¼š&lt;/p&gt;
&lt;/block</summary>
      
    
    
    
    <category term="taro" scheme="https://ovyvo.github.io/yanblog.github.io/categories/taro/"/>
    
    
    <category term="å°ç¨‹åº" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>vue ä½¿ç”¨é«˜å¾·åœ°å›¾ Api è·å–å½“å‰ç»çº¬åº¦ä¿¡æ¯</title>
    <link href="https://ovyvo.github.io/yanblog.github.io/2020/04/02/blog1/"/>
    <id>https://ovyvo.github.io/yanblog.github.io/2020/04/02/blog1/</id>
    <published>2020-04-02T00:00:00.000Z</published>
    <updated>2022-07-31T11:43:24.894Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨ utils é‡Œé¢æ–°å»º getLocation.js å°è£…è·å–ç»çº¬åº¦çš„å…¬ç”¨æ–¹æ³•(ä¼˜åŒ–åŠ è½½é€Ÿåº¦åŠ¨æ€ cdn å¼•å…¥é«˜å¾·åœ°å›¾) ç”±äºé«˜å¾· Api æ–¹æ³•è·å–å½“å‰ç»çº¬åº¦æ¯”è¾ƒæ…¢ï¼Œå¦‚æœéœ€æ±‚æ˜¯åœ¨è·å–åˆ°å½“å‰ç»çº¬åº¦æ•°æ®ä¹‹åè¯·æ±‚ä¸€äº›æ•°æ®ï¼Œéœ€è¦æ­é… promise ä½¿ç”¨ä¿è¯è·å–åˆ°ç»çº¬åº¦ä¿¡æ¯ã€‚å…·ä½“è§ä¸‹é¢ä»£ç </p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadSDK</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">AMap</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    script.<span class="property">src</span> = <span class="string">&quot;http://webapi.amap.com/maps?v=1.4.6&amp;key=*****************&quot;</span>; <span class="comment">//***ä¸ºç”³è¯·çš„é«˜å¾·key</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(script);</span><br><span class="line">    script.<span class="property">onload</span> = resolve;</span><br><span class="line">    script.<span class="property">onerror</span> = reject;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">loadSDK</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// eslint-disable-next-line no-undef</span></span><br><span class="line">    <span class="title class_">AMap</span>.<span class="title function_">plugin</span>(<span class="string">&quot;AMap.Geolocation&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// eslint-disable-next-line no-undef</span></span><br><span class="line">      <span class="keyword">const</span> geolocation = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Geolocation</span>(&#123; <span class="attr">enableHighAccuracy</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">      geolocation.<span class="title function_">getCurrentPosition</span>(<span class="function">(<span class="params">status, result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> res =</span><br><span class="line">          status === <span class="string">&quot;complete&quot;</span></span><br><span class="line">            ? result.<span class="property">position</span></span><br><span class="line">            : &#123; <span class="attr">lat</span>: <span class="number">39.909187</span>, <span class="attr">lng</span>: <span class="number">116.397451</span> &#125;; <span class="comment">//é»˜è®¤åŒ—äº¬ 116.397451ã€39.909187</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å®šä½ç»“æœ&quot;</span>, res);</span><br><span class="line">        <span class="title function_">resolve</span>(res);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ vue é¡µé¢ä¸­çš„ä½¿ç”¨ï¼ˆè¿™é‡Œå‡è®¾éœ€æ±‚æ˜¯è¯·æ±‚ç¦»æˆ‘æœ€è¿‘åº—é“ºä¿¡æ¯åˆ—è¡¨ï¼‰</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">//you can do something</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Api</span> <span class="keyword">from</span> <span class="string">&#x27;@/api/xxx.js&#x27;</span> <span class="comment">//å¼•å…¥è¯·æ±‚æ¥å£çš„Api</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> getLocation <span class="keyword">from</span> <span class="string">&#x27;@/utils/getLocation&#x27;</span> <span class="comment">//å¼•å…¥getLocationæ–¹æ³•</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">params</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">list</span>: []</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">fetchList</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">async</span> <span class="title function_">getPosition</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> &#123; lng, lat &#125; = <span class="keyword">await</span> <span class="title function_">getLocation</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">params</span> = &#123; lng, lat &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">async</span> <span class="title function_">fetchList</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getPosition</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">await</span> <span class="title class_">Api</span>.<span class="title function_">fetchList</span>(<span class="variable language_">this</span>.<span class="property">params</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">list</span> = list</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&#x27;less&#x27;</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„å¦‚æœåœ¨ index.html ä¸­å¼•å…¥é«˜å¾·åœ°å›¾åœ¨å…¨å±€ä½¿ç”¨ AMap æ„é€ å‡½æ•°éœ€è¦åœ¨ vue.config.js æ·»åŠ å¦‚ä¸‹é…ç½®,å¦åˆ™ä¼šæŠ¥â€˜AMap is not definedâ€™é”™è¯¯</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">externals</span>: &#123;</span><br><span class="line">      <span class="title class_">AMap</span>: <span class="string">&quot;AMap&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼ˆä¸¾ä¸ª ğŸŒ°ï¼Œä»£ç æœªæµ‹è¯•ï¼‰</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AMap</span> <span class="keyword">from</span> <span class="string">&#x27;AMap&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title class_">AMap</span>.<span class="title function_">plugin</span>(<span class="string">&#x27;AMap.Geolocation&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> geolocation = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Geolocation</span>(&#123; <span class="attr">enableHighAccuracy</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">      geolocation.<span class="title function_">getCurrentPosition</span>(<span class="function">(<span class="params">status, result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> res =</span><br><span class="line">          status === <span class="string">&#x27;complete&#x27;</span></span><br><span class="line">            ? result.<span class="property">position</span></span><br><span class="line">            : &#123; <span class="attr">lat</span>: <span class="number">39.909187</span>, <span class="attr">lng</span>: <span class="number">116.397451</span> &#125; <span class="comment">//é»˜è®¤åŒ—äº¬ 116.397451ã€39.909187</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®šä½ç»“æœ&#x27;</span>, res)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;åœ¨ utils é‡Œé¢æ–°å»º getLocation.js å°è£…è·å–ç»çº¬åº¦çš„å…¬ç”¨æ–¹æ³•(ä¼˜åŒ–åŠ è½½é€Ÿåº¦åŠ¨æ€ cdn å¼•å…¥é«˜å¾·åœ°å›¾) ç”±äºé«˜å¾· Api æ–¹æ³•è·å–å½“å‰ç»çº¬åº¦æ¯”è¾ƒæ…¢ï¼Œå¦‚æœéœ€æ±‚æ˜¯åœ¨è·å–åˆ°å½“å‰ç»çº¬åº¦æ•°æ®ä¹‹åè¯·æ±‚ä¸€äº›æ•°æ®ï¼Œéœ€è¦æ­é… promise ä½¿ç”¨</summary>
      
    
    
    
    <category term="vue" scheme="https://ovyvo.github.io/yanblog.github.io/categories/vue/"/>
    
    
    <category term="å·¥å…·" scheme="https://ovyvo.github.io/yanblog.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
